<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Pipes.Concurrent</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">pipes-concurrency-2.0.14: Concurrency for the pipes ecosystem</span><ul class="links" id="page-menu"><li><a href="src/Pipes.Concurrent.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pipes.Concurrent</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Inputs and Outputs</a></li><li><a href="#g:2">Pipe utilities</a></li><li><a href="#g:3">Mailboxes</a></li><li><a href="#g:4">Actors</a></li><li><a href="#g:5">Re-exports</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Asynchronous communication between pipes</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Input">Input</a> a = <a href="#v:Input">Input</a> {<ul class="subs"><li><a href="#v:recv">recv</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../base-4.20.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Output">Output</a> a = <a href="#v:Output">Output</a> {<ul class="subs"><li><a href="#v:send">send</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> <a href="../base-4.20.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:fromInput">fromInput</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Producer-39-" title="Pipes.Core">Producer'</a> a m ()</li><li class="src short"><a href="#v:toOutput">toOutput</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Consumer-39-" title="Pipes.Core">Consumer'</a> a m ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:Mailbox">Mailbox</a> a = (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a)</li><li class="src short"><a href="#v:fromMailbox">fromMailbox</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Producer-39-" title="Pipes.Core">Producer'</a> a m ()</li><li class="src short"><a href="#v:toMailbox">toMailbox</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Consumer-39-" title="Pipes.Core">Consumer'</a> a m ()</li><li class="src short"><a href="#v:send-39-">send'</a> :: <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> <a href="../base-4.20.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:recv-39-">recv'</a> :: <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../base-4.20.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:spawn">spawn</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a)</li><li class="src short"><a href="#v:spawn-39-">spawn'</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a, <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> ())</li><li class="src short"><a href="#v:withSpawn">withSpawn</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; ((<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> r) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> r</li><li class="src short"><a href="#v:withBuffer">withBuffer</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> l) -&gt; (<a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> r) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (l, r)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Buffer">Buffer</a> a<ul class="subs"><li>= <a href="#v:Unbounded">Unbounded</a></li><li>| <a href="#v:Bounded">Bounded</a> <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li>| <a href="#v:Single">Single</a></li><li>| <a href="#v:Latest">Latest</a> a</li><li>| <a href="#v:Newest">Newest</a> <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li>| <a href="#v:New">New</a></li></ul></li><li class="src short"><a href="#v:unbounded">unbounded</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a</li><li class="src short"><a href="#v:bounded">bounded</a> :: <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a</li><li class="src short"><a href="#v:latest">latest</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a</li><li class="src short"><a href="#v:newest">newest</a> :: <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a</li><li class="src short"><a href="#v:forkIO">forkIO</a> :: <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> () -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> <a href="../base-4.20.2.0/Control-Concurrent.html#t:ThreadId" title="Control.Concurrent">ThreadId</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:STM">STM</a> a</li><li class="src short"><a href="#v:atomically">atomically</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> a</li><li class="src short"><a href="#v:newTVarIO">newTVarIO</a> :: a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a)</li><li class="src short"><a href="#v:readTVar">readTVar</a> :: <a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a</li><li class="src short"><a href="#v:mkWeakTVar">mkWeakTVar</a> :: <a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> () -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="../base-4.20.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a> (<a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a))</li><li class="src short"><a href="#v:performGC">performGC</a> :: <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Inputs and Outputs</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Input" class="def">Input</a> a <a href="src/Pipes.Concurrent.html#Input" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></p><div class="doc"><p>An exhaustible source of values</p><p><code><a href="Pipes-Concurrent.html#v:recv" title="Pipes.Concurrent">recv</a></code> returns <code><a href="../base-4.20.2.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the source is exhausted</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Input" class="def">Input</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:recv" class="def">recv</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../base-4.20.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Input">Instances</h4><details id="i:Input" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Alternative:1"></span> <a href="../base-4.20.2.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></span> <a href="src/Pipes.Concurrent.html#line-81" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Alternative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> [a] <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Applicative:2"></span> <a href="../base-4.20.2.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></span> <a href="src/Pipes.Concurrent.html#line-69" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> (a -&gt; b) -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Functor:3"></span> <a href="../base-4.20.2.0/Control-Monad.html#t:Functor" title="Control.Monad">Functor</a> <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></span> <a href="src/Pipes.Concurrent.html#line-66" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Monad:4"></span> <a href="../base-4.20.2.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></span> <a href="src/Pipes.Concurrent.html#line-73" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; (a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b) -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:MonadPlus:5"></span> <a href="../base-4.20.2.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></span> <a href="src/Pipes.Concurrent.html#line-89" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:MonadPlus:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Monoid:6"></span> <a href="../base-4.20.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a)</span> <a href="src/Pipes.Concurrent.html#line-96" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Monoid:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a] -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Input:Semigroup:7"></span> <a href="../base-4.20.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a)</span> <a href="src/Pipes.Concurrent.html#line-93" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Input:Semigroup:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.20.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a) -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.20.2.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Output" class="def">Output</a> a <a href="src/Pipes.Concurrent.html#Output" class="link">Source</a> <a href="#t:Output" class="selflink">#</a></p><div class="doc"><p>An exhaustible sink of values</p><p><code><a href="Pipes-Concurrent.html#v:send" title="Pipes.Concurrent">send</a></code> returns <code><a href="../base-4.20.2.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> if the sink is exhausted</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Output" class="def">Output</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:send" class="def">send</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> <a href="../base-4.20.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Output">Instances</h4><details id="i:Output" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Output:Contravariant:1"></span> <a href="../base-4.20.2.0/Data-Functor-Contravariant.html#t:Contravariant" title="Data.Functor.Contravariant">Contravariant</a> <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></span> <a href="src/Pipes.Concurrent.html#line-122" class="link">Source</a> <a href="#t:Output" class="selflink">#</a></td><td class="doc"><p>This instance is useful for creating new tagged address, similar to elm's
 Signal.forwardTo. In fact elm's forwardTo is just 'flip contramap'</p></td></tr><tr><td colspan="2"><details id="i:id:Output:Contravariant:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:contramap">contramap</a> :: (a' -&gt; a) -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a' <a href="#v:contramap" class="selflink">#</a></p><p class="src"><a href="#v:-62--36-">(&gt;$)</a> :: b -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> b -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:-62--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Output:Decidable:2"></span> <a href="../contravariant-1.5.5/Data-Functor-Contravariant-Divisible.html#t:Decidable" title="Data.Functor.Contravariant.Divisible">Decidable</a> <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></span> <a href="src/Pipes.Concurrent.html#line-130" class="link">Source</a> <a href="#t:Output" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Output:Decidable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lose">lose</a> :: (a -&gt; <a href="../base-4.20.2.0/Data-Void.html#t:Void" title="Data.Void">Void</a>) -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:lose" class="selflink">#</a></p><p class="src"><a href="#v:choose">choose</a> :: (a -&gt; <a href="../base-4.20.2.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> b -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> c -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:choose" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Output:Divisible:3"></span> <a href="../contravariant-1.5.5/Data-Functor-Contravariant-Divisible.html#t:Divisible" title="Data.Functor.Contravariant.Divisible">Divisible</a> <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></span> <a href="src/Pipes.Concurrent.html#line-125" class="link">Source</a> <a href="#t:Output" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Output:Divisible:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:divide">divide</a> :: (a -&gt; (b, c)) -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> b -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> c -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:divide" class="selflink">#</a></p><p class="src"><a href="#v:conquer">conquer</a> :: <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:conquer" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Output:Monoid:4"></span> <a href="../base-4.20.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a)</span> <a href="src/Pipes.Concurrent.html#line-113" class="link">Source</a> <a href="#t:Output" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Output:Monoid:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a] -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Output:Semigroup:5"></span> <a href="../base-4.20.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a)</span> <a href="src/Pipes.Concurrent.html#line-110" class="link">Source</a> <a href="#t:Output" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Output:Semigroup:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Pipes-Concurrent.html">Pipes.Concurrent</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.20.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a) -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.20.2.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Pipe utilities</h1></a><div class="top"><p class="src"><a id="v:fromInput" class="def">fromInput</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Producer-39-" title="Pipes.Core">Producer'</a> a m () <a href="src/Pipes.Concurrent.html#fromInput" class="link">Source</a> <a href="#v:fromInput" class="selflink">#</a></p><div class="doc"><p>Convert an <code><a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></code> to a <code><a href="../pipes-4.3.16/Pipes.html#v:Producer" title="Pipes">Producer</a></code></p><p><code><a href="Pipes-Concurrent.html#v:fromInput" title="Pipes.Concurrent">fromInput</a></code> terminates when the <code><a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></code> is exhausted.</p></div></div><div class="top"><p class="src"><a id="v:toOutput" class="def">toOutput</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Consumer-39-" title="Pipes.Core">Consumer'</a> a m () <a href="src/Pipes.Concurrent.html#toOutput" class="link">Source</a> <a href="#v:toOutput" class="selflink">#</a></p><div class="doc"><p>Convert an <code><a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></code> to a <code><a href="../pipes-4.3.16/Pipes.html#v:Consumer" title="Pipes">Consumer</a></code></p><p><code><a href="Pipes-Concurrent.html#v:toOutput" title="Pipes.Concurrent">toOutput</a></code> terminates when the <code><a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></code> is exhausted.</p></div></div><a href="#g:3" id="g:3"><h1>Mailboxes</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Mailbox" class="def">Mailbox</a> a = (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a) <a href="src/Pipes.Concurrent.html#Mailbox" class="link">Source</a> <a href="#t:Mailbox" class="selflink">#</a></p><div class="doc"><p>Combines a source of values and a sink of values</p><p><code><a href="Pipes-Concurrent.html#v:fromMailbox" title="Pipes.Concurrent">fromMailbox</a></code> uses <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> as <code><a href="../pipes-4.3.16/Pipes.html#v:Producer" title="Pipes">Producer</a></code>
    <code><a href="Pipes-Concurrent.html#v:toMailbox" title="Pipes.Concurrent">toMailbox</a></code> uses <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> as <code><a href="../pipes-4.3.16/Pipes.html#v:Consumer" title="Pipes">Consumer</a></code>
    'send'' puts a value in the <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code>
    'recv'' obtains a value from the <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code></p></div></div><div class="top"><p class="src"><a id="v:fromMailbox" class="def">fromMailbox</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Producer-39-" title="Pipes.Core">Producer'</a> a m () <a href="src/Pipes.Concurrent.html#fromMailbox" class="link">Source</a> <a href="#v:fromMailbox" class="selflink">#</a></p><div class="doc"><p>Convert a <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> to a <code><a href="../pipes-4.3.16/Pipes.html#v:Producer" title="Pipes">Producer</a></code></p><p><code><a href="Pipes-Concurrent.html#v:fromMailbox" title="Pipes.Concurrent">fromMailbox</a></code> terminates when the <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> source of values is exhausted.</p></div></div><div class="top"><p class="src"><a id="v:toMailbox" class="def">toMailbox</a> :: <span class="keyword">forall</span> (m :: <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.20.2.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base-4.20.2.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; <a href="../pipes-4.3.16/Pipes-Core.html#t:Consumer-39-" title="Pipes.Core">Consumer'</a> a m () <a href="src/Pipes.Concurrent.html#toMailbox" class="link">Source</a> <a href="#v:toMailbox" class="selflink">#</a></p><div class="doc"><p>Convert a <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> to a <code><a href="../pipes-4.3.16/Pipes.html#v:Consumer" title="Pipes">Consumer</a></code></p><p><code><a href="Pipes-Concurrent.html#v:toMailbox" title="Pipes.Concurrent">toMailbox</a></code> terminates when the <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> sink of values is exhausted.</p></div></div><div class="top"><p class="src"><a id="v:send-39-" class="def">send'</a> :: <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> <a href="../base-4.20.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Pipes.Concurrent.html#send%27" class="link">Source</a> <a href="#v:send-39-" class="selflink">#</a></p><div class="doc"><p>Put a value in a <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code></p><p><code><a href="Pipes-Concurrent.html#v:send" title="Pipes.Concurrent">send</a></code> returns <code><a href="../base-4.20.2.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> if the <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> sink is exhausted</p></div></div><div class="top"><p class="src"><a id="v:recv-39-" class="def">recv'</a> :: <a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../base-4.20.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Pipes.Concurrent.html#recv%27" class="link">Source</a> <a href="#v:recv-39-" class="selflink">#</a></p><div class="doc"><p>Obtain a value from a <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code></p><p><code><a href="Pipes-Concurrent.html#v:recv" title="Pipes.Concurrent">recv</a></code> returns <code><a href="../base-4.20.2.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the <code><a href="Pipes-Concurrent.html#t:Mailbox" title="Pipes.Concurrent">Mailbox</a></code> source is exhausted</p></div></div><a href="#g:4" id="g:4"><h1>Actors</h1></a><div class="top"><p class="src"><a id="v:spawn" class="def">spawn</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a) <a href="src/Pipes.Concurrent.html#spawn" class="link">Source</a> <a href="#v:spawn" class="selflink">#</a></p><div class="doc"><p>Spawn a mailbox using the specified <code><a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a></code> to store messages</p><p>Using <code><a href="Pipes-Concurrent.html#v:send" title="Pipes.Concurrent">send</a></code> on the <code><a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></code></p><ul><li>fails and returns <code><a href="../base-4.20.2.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> if the mailbox is sealed, otherwise it:</li><li>retries if the mailbox is full, or:</li><li>adds a message to the mailbox and returns <code><a href="../base-4.20.2.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>.</li></ul><p>Using <code><a href="Pipes-Concurrent.html#v:recv" title="Pipes.Concurrent">recv</a></code> on the <code><a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></code>:</p><ul><li>retrieves a message from the mailbox wrapped in <code><a href="../base-4.20.2.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> if the mailbox
          is not empty, otherwise it:</li><li>retries if the mailbox is not sealed, or:</li><li>fails and returns <code><a href="../base-4.20.2.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>.</li></ul><p>If either the <code><a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></code> or <code><a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></code> is garbage collected the mailbox will
    become sealed.</p></div></div><div class="top"><p class="src"><a id="v:spawn-39-" class="def">spawn'</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a, <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> ()) <a href="src/Pipes.Concurrent.html#spawn%27" class="link">Source</a> <a href="#v:spawn-39-" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Pipes-Concurrent.html#v:spawn" title="Pipes.Concurrent">spawn</a></code>, but also returns an action to manually <code>seal</code> the mailbox
    early:</p><pre>(output, input, seal) &lt;- spawn' buffer
...</pre><p>Use the <code>seal</code> action to allow early cleanup of readers and writers to the
    mailbox without waiting for the next garbage collection cycle.</p></div></div><div class="top"><p class="src"><a id="v:withSpawn" class="def">withSpawn</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; ((<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a, <a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> r) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> r <a href="src/Pipes.Concurrent.html#withSpawn" class="link">Source</a> <a href="#v:withSpawn" class="selflink">#</a></p><div class="doc"><p><code><a href="Pipes-Concurrent.html#v:withSpawn" title="Pipes.Concurrent">withSpawn</a></code> passes its enclosed action an <code><a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a></code> and <code><a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a></code> like you'd get from <code><a href="Pipes-Concurrent.html#v:spawn" title="Pipes.Concurrent">spawn</a></code>,
    but automatically <code>seal</code>s them after the action completes.  This can be used when you need the
    <code>seal</code>ing behavior available from 'spawn'', but want to work at a bit higher level:</p><pre>withSpawn buffer $ \(output, input) -&gt; ...</pre><p><code><a href="Pipes-Concurrent.html#v:withSpawn" title="Pipes.Concurrent">withSpawn</a></code> is exception-safe, since it uses <code><a href="../base-4.20.2.0/Control-Exception.html#v:bracket" title="Control.Exception">bracket</a></code> internally.</p></div></div><div class="top"><p class="src"><a id="v:withBuffer" class="def">withBuffer</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a -&gt; (<a href="Pipes-Concurrent.html#t:Output" title="Pipes.Concurrent">Output</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> l) -&gt; (<a href="Pipes-Concurrent.html#t:Input" title="Pipes.Concurrent">Input</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> r) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (l, r) <a href="src/Pipes.Concurrent.html#withBuffer" class="link">Source</a> <a href="#v:withBuffer" class="selflink">#</a></p><div class="doc"><p>A more restrictive alternative to <code><a href="Pipes-Concurrent.html#v:withSpawn" title="Pipes.Concurrent">withSpawn</a></code> that prevents deadlocks</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Buffer" class="def">Buffer</a> a <a href="src/Pipes.Concurrent.html#Buffer" class="link">Source</a> <a href="#t:Buffer" class="selflink">#</a></p><div class="doc"><p><code><a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a></code> specifies how to buffer messages stored within the mailbox</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Unbounded" class="def">Unbounded</a></td><td class="doc"><div class="warning"><p>Deprecated: Use <code><a href="Pipes-Concurrent.html#v:unbounded" title="Pipes.Concurrent">unbounded</a></code> instead</p></div></td></tr><tr><td class="src"><a id="v:Bounded" class="def">Bounded</a> <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><div class="warning"><p>Deprecated: Use <code><a href="Pipes-Concurrent.html#v:bounded" title="Pipes.Concurrent">bounded</a></code> instead</p></div></td></tr><tr><td class="src"><a id="v:Single" class="def">Single</a></td><td class="doc"><div class="warning"><p>Deprecated: Use <code><code><a href="Pipes-Concurrent.html#v:bounded" title="Pipes.Concurrent">bounded</a></code> 1</code> instead</p></div></td></tr><tr><td class="src"><a id="v:Latest" class="def">Latest</a> a</td><td class="doc"><div class="warning"><p>Deprecated: Use <code><a href="Pipes-Concurrent.html#v:latest" title="Pipes.Concurrent">latest</a></code> instead</p></div></td></tr><tr><td class="src"><a id="v:Newest" class="def">Newest</a> <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><div class="warning"><p>Deprecated: Use <code><a href="Pipes-Concurrent.html#v:newest" title="Pipes.Concurrent">newest</a></code> instead</p></div></td></tr><tr><td class="src"><a id="v:New" class="def">New</a></td><td class="doc"><div class="warning"><p>Deprecated: Use <code><code><a href="Pipes-Concurrent.html#v:newest" title="Pipes.Concurrent">newest</a></code> 1</code> instead</p></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:unbounded" class="def">unbounded</a> :: <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a <a href="src/Pipes.Concurrent.html#unbounded" class="link">Source</a> <a href="#v:unbounded" class="selflink">#</a></p><div class="doc"><p>Store an unbounded number of messages in a FIFO queue</p></div></div><div class="top"><p class="src"><a id="v:bounded" class="def">bounded</a> :: <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a <a href="src/Pipes.Concurrent.html#bounded" class="link">Source</a> <a href="#v:bounded" class="selflink">#</a></p><div class="doc"><p>Store a bounded number of messages, specified by the <code><a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> argument</p></div></div><div class="top"><p class="src"><a id="v:latest" class="def">latest</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a <a href="src/Pipes.Concurrent.html#latest" class="link">Source</a> <a href="#v:latest" class="selflink">#</a></p><div class="doc"><p>Only store the <code><a href="Pipes-Concurrent.html#v:Latest" title="Pipes.Concurrent">Latest</a></code> message, beginning with an initial value</p><p><code><a href="Pipes-Concurrent.html#v:Latest" title="Pipes.Concurrent">Latest</a></code> is never empty nor full.</p></div></div><div class="top"><p class="src"><a id="v:newest" class="def">newest</a> :: <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Pipes-Concurrent.html#t:Buffer" title="Pipes.Concurrent">Buffer</a> a <a href="src/Pipes.Concurrent.html#newest" class="link">Source</a> <a href="#v:newest" class="selflink">#</a></p><div class="doc"><p>Like <code>Bounded</code>, but <code><a href="Pipes-Concurrent.html#v:send" title="Pipes.Concurrent">send</a></code> never fails (the buffer is never full).
    Instead, old elements are discarded to make room for new elements</p></div></div><a href="#g:5" id="g:5"><h1>Re-exports</h1></a><div class="doc"><p><code>Control.Concurrent</code> re-exports <code><a href="Pipes-Concurrent.html#v:forkIO" title="Pipes.Concurrent">forkIO</a></code>, although I recommend using the
    <code>async</code> library instead.</p><p><code>Control.Concurrent.STM</code> re-exports <code><a href="Pipes-Concurrent.html#v:atomically" title="Pipes.Concurrent">atomically</a></code> and <code><a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></code>.</p><p><code>System.Mem</code> re-exports <code><a href="Pipes-Concurrent.html#v:performGC" title="Pipes.Concurrent">performGC</a></code>.</p></div><div class="top"><p class="src"><a id="v:forkIO" class="def">forkIO</a> :: <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> () -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> <a href="../base-4.20.2.0/Control-Concurrent.html#t:ThreadId" title="Control.Concurrent">ThreadId</a> <a href="#v:forkIO" class="selflink">#</a></p><div class="doc"><p>Creates a new thread to run the <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> computation passed as the
first argument, and returns the <code><a href="../base-4.20.2.0/Control-Concurrent.html#t:ThreadId" title="Control.Concurrent">ThreadId</a></code> of the newly created
thread.</p><p>The new thread will be a lightweight, <em>unbound</em> thread.  Foreign calls
made by this thread are not guaranteed to be made by any particular OS
thread; if you need foreign calls to be made by a particular OS
thread, then use <code><a href="../base-4.20.2.0/Control-Concurrent.html#v:forkOS" title="Control.Concurrent">forkOS</a></code> instead.</p><p>The new thread inherits the <em>masked</em> state of the parent (see
<code><a href="GHC-Control-Exception.html#v:mask" title="GHC.Control.Exception">mask</a></code>).</p><p>The newly created thread has an exception handler that discards the
exceptions <code><a href="../base-4.20.2.0/Control-Exception.html#t:BlockedIndefinitelyOnMVar" title="Control.Exception">BlockedIndefinitelyOnMVar</a></code>, <code><a href="../base-4.20.2.0/Control-Exception.html#t:BlockedIndefinitelyOnSTM" title="Control.Exception">BlockedIndefinitelyOnSTM</a></code>, and
<code><a href="../base-4.20.2.0/Control-Exception.html#v:ThreadKilled" title="Control.Exception">ThreadKilled</a></code>, and passes all other exceptions to the uncaught
exception handler.</p><p>WARNING: Exceptions in the new thread will not be rethrown in the thread that
created it. This means that you might be completely unaware of the problem
if/when this happens.  You may want to use the
<a href="https://hackage.haskell.org/package/async">async</a> library instead.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:STM" class="def">STM</a> a <a href="#t:STM" class="selflink">#</a></p><div class="doc"><p>A monad supporting atomic memory transactions.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:STM">Instances</h4><details id="i:STM" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Alternative:1"></span> <a href="../base-4.20.2.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc"><p>Takes the first non-<code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#v:retry" title="GHC.Conc.Sync">retry</a></code>ing <code><a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></code> action.</p><p><em>Since: base-4.8.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Alternative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> [a] <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Applicative:2"></span> <a href="../base-4.20.2.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc"><p><em>Since: base-4.8.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (a -&gt; b) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Functor:3"></span> <a href="../base-4.20.2.0/Control-Monad.html#t:Functor" title="Control.Monad">Functor</a> <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc"><p><em>Since: base-4.3.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Monad:4"></span> <a href="../base-4.20.2.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc"><p><em>Since: base-4.3.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; (a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:MonadPlus:5"></span> <a href="../base-4.20.2.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc"><p>Takes the first non-<code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#v:retry" title="GHC.Conc.Sync">retry</a></code>ing <code><a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></code> action.</p><p><em>Since: base-4.3.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:MonadPlus:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:MonadFix:6"></span> <a href="../base-4.20.2.0/Control-Monad-Fix.html#t:MonadFix" title="Control.Monad.Fix">MonadFix</a> <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc"><p><em>Since: stm-2.3</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:MonadFix:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../stm-2.5.3.1/Control-Monad-STM.html">Control.Monad.STM</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mfix">mfix</a> :: (a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:mfix" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:MArray:7"></span> <a href="../array-0.5.8.0/Data-Array-MArray.html#t:MArray" title="Data.Array.MArray">MArray</a> <a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> e <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:STM:MArray:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html">Control.Concurrent.STM.TArray</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getBounds">getBounds</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (i, i) <a href="#v:getBounds" class="selflink">#</a></p><p class="src"><a href="#v:getNumElements">getNumElements</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:getNumElements" class="selflink">#</a></p><p class="src"><a href="#v:newArray">newArray</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; (i, i) -&gt; e -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e) <a href="#v:newArray" class="selflink">#</a></p><p class="src"><a href="#v:newArray_">newArray_</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; (i, i) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e) <a href="#v:newArray_" class="selflink">#</a></p><p class="src"><a href="#v:unsafeNewArray_">unsafeNewArray_</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; (i, i) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> (<a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e) <a href="#v:unsafeNewArray_" class="selflink">#</a></p><p class="src"><a href="#v:unsafeRead">unsafeRead</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e -&gt; <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> e <a href="#v:unsafeRead" class="selflink">#</a></p><p class="src"><a href="#v:unsafeWrite">unsafeWrite</a> :: <a href="../base-4.20.2.0/Data-Ix.html#t:Ix" title="Data.Ix">Ix</a> i =&gt; <a href="../stm-2.5.3.1/Control-Concurrent-STM-TArray.html#t:TArray" title="Control.Concurrent.STM.TArray">TArray</a> i e -&gt; <a href="../base-4.20.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; e -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> () <a href="#v:unsafeWrite" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Monoid:8"></span> <a href="../base-4.20.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a =&gt; <a href="../base-4.20.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a)</span></td><td class="doc"><p><em>Since: base-4.17.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Monoid:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a] -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Semigroup:9"></span> <a href="../base-4.20.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> a =&gt; <a href="../base-4.20.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a)</span></td><td class="doc"><p><em>Since: base-4.17.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Semigroup:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../ghc-internal-9.1003.0/GHC-Internal-Conc-Sync.html">GHC.Internal.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.20.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a) -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.20.2.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:atomically" class="def">atomically</a> :: <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> a <a href="#v:atomically" class="selflink">#</a></p><div class="doc"><p>Perform a series of STM actions atomically.</p><p>Using <code><a href="Pipes-Concurrent.html#v:atomically" title="Pipes.Concurrent">atomically</a></code> inside an <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> or <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafeInterleaveIO" title="System.IO.Unsafe">unsafeInterleaveIO</a></code>
 subverts some of guarantees that STM provides. It makes it possible to
 run a transaction inside of another transaction, depending on when the
 thunk is evaluated. If a nested transaction is attempted, an exception
 is thrown by the runtime. It is possible to safely use <code><a href="Pipes-Concurrent.html#v:atomically" title="Pipes.Concurrent">atomically</a></code> inside
 <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> or <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafeInterleaveIO" title="System.IO.Unsafe">unsafeInterleaveIO</a></code>, but the typechecker does not
 rule out programs that may attempt nested transactions, meaning that
 the programmer must take special care to prevent these.</p><p>However, there are functions for creating transactional variables that
 can always be safely called in <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code>. See: <code><a href="Pipes-Concurrent.html#v:newTVarIO" title="Pipes.Concurrent">newTVarIO</a></code>,
 <code><a href="../stm-2.5.3.1/Control-Concurrent-STM-TChan.html#v:newTChanIO" title="Control.Concurrent.STM.TChan">newTChanIO</a></code>,
 <code><a href="../stm-2.5.3.1/Control-Concurrent-STM-TChan.html#v:newBroadcastTChanIO" title="Control.Concurrent.STM.TChan">newBroadcastTChanIO</a></code>,
 <code><a href="../stm-2.5.3.1/Control-Concurrent-STM-TQueue.html#v:newTQueueIO" title="Control.Concurrent.STM.TQueue">newTQueueIO</a></code>,
 <code><a href="../stm-2.5.3.1/Control-Concurrent-STM-TBQueue.html#v:newTBQueueIO" title="Control.Concurrent.STM.TBQueue">newTBQueueIO</a></code>, and
 <code><a href="../stm-2.5.3.1/Control-Concurrent-STM-TMVar.html#v:newTMVarIO" title="Control.Concurrent.STM.TMVar">newTMVarIO</a></code>.</p><p>Using <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> inside of <code><a href="Pipes-Concurrent.html#v:atomically" title="Pipes.Concurrent">atomically</a></code> is also dangerous but for
 different reasons. See <code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#v:unsafeIOToSTM" title="GHC.Conc.Sync">unsafeIOToSTM</a></code> for more on this.</p></div></div><div class="top"><p class="src"><a id="v:newTVarIO" class="def">newTVarIO</a> :: a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a) <a href="#v:newTVarIO" class="selflink">#</a></p><div class="doc"><p><code>IO</code> version of <code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#v:newTVar" title="GHC.Conc.Sync">newTVar</a></code>.  This is useful for creating top-level
 <code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a></code>s using <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code>, because using
 <code><a href="Pipes-Concurrent.html#v:atomically" title="Pipes.Concurrent">atomically</a></code> inside <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> isn't
 possible.</p></div></div><div class="top"><p class="src"><a id="v:readTVar" class="def">readTVar</a> :: <a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a -&gt; <a href="Pipes-Concurrent.html#t:STM" title="Pipes.Concurrent">STM</a> a <a href="#v:readTVar" class="selflink">#</a></p><div class="doc"><p>Return the current value stored in a <code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkWeakTVar" class="def">mkWeakTVar</a> :: <a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> () -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="../base-4.20.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a> (<a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a> a)) <a href="#v:mkWeakTVar" class="selflink">#</a></p><div class="doc"><p>Make a <code><a href="../base-4.20.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a></code> pointer to a <code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a></code>, using the second argument as
 a finalizer to run when <code><a href="../base-4.20.2.0/GHC-Conc-Sync.html#t:TVar" title="GHC.Conc.Sync">TVar</a></code> is garbage-collected</p><p><em>Since: stm-2.4.3</em></p></div></div><div class="top"><p class="src"><a id="v:performGC" class="def">performGC</a> :: <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> () <a href="#v:performGC" class="selflink">#</a></p><div class="doc"><p>Triggers an immediate major garbage collection.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>