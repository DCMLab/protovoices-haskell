<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="annot"><span class="hs-comment">{-|
Copyright  :  (C) 2015-2016, University of Twente
License    :  BSD2 (see the file LICENSE)
Maintainer :  Christiaan Baaij &lt;christiaan.baaij@gmail.com&gt;

To use the plugin, add the

@
{\-\# OPTIONS_GHC -fplugin GHC.TypeLits.Extra.Solver \#-\}
@

pragma to the header of your file

-}</span></span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskellQuotes #-}</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# OPTIONS_HADDOCK show-extensions #-}</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html"><span class="hs-identifier">GHC.TypeLits.Extra.Solver</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#plugin"><span class="hs-identifier">plugin</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-comment">-- external</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.TcPluginM.Extra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">evByFiat</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tracePlugin</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newWanted</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Type.Ord</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">GHC.TypeError</span></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">-- GHC API</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Builtin.Names</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">eqPrimTyConKey</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">hasKey</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getUnique</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Builtin.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">promotedTrueDataCon</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">promotedFalseDataCon</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Builtin.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">boolTy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">naturalTy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">cTupleDataCon</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">cTupleTyCon</span></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Builtin.Types.Literals</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">typeNatDivTyCon</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeNatModTyCon</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeNatCmpTyCon</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.Coercion</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mkUnivCo</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.DataCon</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">dataConWrapId</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.Predicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EqRel</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NomEq</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Pred</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EqPred</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">IrredPred</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">classifyPredType</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.Reduction</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Reduction</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.TyCon</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TyCon</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Type</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TyLit</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">UnivCoProvenance</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">PluginProv</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Kind</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mkTyConApp</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">splitTyConApp_maybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeKind</span></span><span class="hs-special">)</span><span class="hs-cpp">
#if MIN_VERSION_ghc(9,6,0)
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Core.TyCo.Compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">eqType</span></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC.Core.Type</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">eqType</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Data.IOEnv</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getEnv</span></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Driver.Env</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hsc_NC</span></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Driver.Plugins</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Plugin</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultPlugin</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">purePlugin</span></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Plugins</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">thNameToGhcNameIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Plugin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TcPluginM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tcLookupTyCon</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tcPluginTrace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tcPluginIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unsafeTcPluginTcM</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TcPlugin</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TcPluginSolveResult</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TcPluginRewriter</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TcPluginRewriteResult</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Env</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">env_top</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Types.Constraint</span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Ct</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ctEvidence</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ctEvPred</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ctLoc</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isWantedCt</span></span><span class="hs-special">)</span><span class="hs-cpp">
#if MIN_VERSION_ghc(9,8,0)
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Types.Constraint</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Ct</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">DictCt</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">EqCt</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">IrredCt</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">qci_ev</span></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC.Tc.Types.Constraint</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ct</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CQuantCan</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">qci_ev</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">cc_ev</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EvTerm</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">EvBindsVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Role</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">evCast</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">evId</span></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Types.Unique.FM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UniqFM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">listToUFM</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Utils.Outputable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Outputable</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;+&gt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">($$)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">text</span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Name</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-- template-haskell</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TH</span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">-- internal</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html"><span class="hs-identifier">GHC.TypeLits.Extra.Solver.Operations</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Unify.html"><span class="hs-identifier">GHC.TypeLits.Extra.Solver.Unify</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.html"><span class="hs-identifier">GHC.TypeLits.Extra</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | A solver implement as a type-checker plugin for:</span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">--     * 'Div': type-level 'div'</span><span>
</span><span id="line-79"></span><span class="hs-comment">--</span><span>
</span><span id="line-80"></span><span class="hs-comment">--     * 'Mod': type-level 'mod'</span><span>
</span><span id="line-81"></span><span class="hs-comment">--</span><span>
</span><span id="line-82"></span><span class="hs-comment">--     * 'FLog': type-level equivalent of &lt;https://hackage.haskell.org/package/base-4.17.0.0/docs/GHC-Integer-Logarithms.html#v:integerLogBase-35- integerLogBase#&gt;</span><span>
</span><span id="line-83"></span><span class="hs-comment">--       .i.e. the exact integer equivalent to &quot;@'floor' ('logBase' x y)@&quot;</span><span>
</span><span id="line-84"></span><span class="hs-comment">--</span><span>
</span><span id="line-85"></span><span class="hs-comment">--     * 'CLog': type-level equivalent of /the ceiling of/ &lt;https://hackage.haskell.org/package/base-4.17.0.0/docs/GHC-Integer-Logarithms.html#v:integerLogBase-35- integerLogBase#&gt;</span><span>
</span><span id="line-86"></span><span class="hs-comment">--       .i.e. the exact integer equivalent to &quot;@'ceiling' ('logBase' x y)@&quot;</span><span>
</span><span id="line-87"></span><span class="hs-comment">--</span><span>
</span><span id="line-88"></span><span class="hs-comment">--     * 'Log': type-level equivalent of &lt;https://hackage.haskell.org/package/base-4.17.0.0/docs/GHC-Integer-Logarithms.html#v:integerLogBase-35- integerLogBase#&gt;</span><span>
</span><span id="line-89"></span><span class="hs-comment">--        where the operation only reduces when &quot;@'floor' ('logBase' b x) ~ 'ceiling' ('logBase' b x)@&quot;</span><span>
</span><span id="line-90"></span><span class="hs-comment">--</span><span>
</span><span id="line-91"></span><span class="hs-comment">--     * 'GCD': a type-level 'gcd'</span><span>
</span><span id="line-92"></span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span class="hs-comment">--     * 'LCM': a type-level 'lcm'</span><span>
</span><span id="line-94"></span><span class="hs-comment">--</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- To use the plugin, add</span><span>
</span><span id="line-96"></span><span class="hs-comment">--</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- {\-\# OPTIONS_GHC -fplugin GHC.TypeLits.Extra.Solver \#-\}</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-100"></span><span class="hs-comment">--</span><span>
</span><span id="line-101"></span><span class="hs-comment">-- To the header of your file.</span><span>
</span><span id="line-102"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#plugin"><span class="hs-identifier hs-type">plugin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Plugin</span></span><span>
</span><span id="line-103"></span><span id="plugin"><span class="annot"><span class="annottext">plugin :: Plugin
</span><a href="GHC.TypeLits.Extra.Solver.html#plugin"><span class="hs-identifier hs-var hs-var">plugin</span></a></span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plugin
</span><span class="hs-identifier hs-var">defaultPlugin</span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">tcPlugin</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">const</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#normalisePlugin"><span class="hs-identifier hs-type">normalisePlugin</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">pluginRecompile</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">purePlugin</span></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#normalisePlugin"><span class="hs-identifier hs-type">normalisePlugin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin</span></span><span>
</span><span id="line-110"></span><span id="normalisePlugin"><span class="annot"><span class="annottext">normalisePlugin :: TcPlugin
</span><a href="GHC.TypeLits.Extra.Solver.html#normalisePlugin"><span class="hs-identifier hs-var hs-var">normalisePlugin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; TcPlugin -&gt; TcPlugin
</span><span class="hs-identifier hs-var">tracePlugin</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;ghc-typelits-extra&quot;</span></span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcPluginInit :: TcPluginM ExtraDefs
</span><span class="hs-identifier hs-var">tcPluginInit</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginM ExtraDefs
</span><a href="GHC.TypeLits.Extra.Solver.html#lookupExtraDefs"><span class="hs-identifier hs-var">lookupExtraDefs</span></a></span><span>
</span><span id="line-112"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcPluginSolve :: ExtraDefs -&gt; TcPluginSolver
</span><span class="hs-identifier hs-var">tcPluginSolve</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; TcPluginSolver
</span><a href="GHC.TypeLits.Extra.Solver.html#decideEqualSOP"><span class="hs-identifier hs-var">decideEqualSOP</span></a></span><span>
</span><span id="line-113"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcPluginRewrite :: ExtraDefs -&gt; UniqFM TyCon TcPluginRewriter
</span><span class="hs-identifier hs-var">tcPluginRewrite</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; UniqFM TyCon TcPluginRewriter
</span><a href="GHC.TypeLits.Extra.Solver.html#extraRewrite"><span class="hs-identifier hs-var">extraRewrite</span></a></span><span>
</span><span id="line-114"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcPluginStop :: ExtraDefs -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginStop</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginM () -&gt; ExtraDefs -&gt; TcPluginM ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; TcPluginM ()
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#extraRewrite"><span class="hs-identifier hs-type">extraRewrite</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-type">ExtraDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UniqFM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyCon</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginRewriter</span></span><span>
</span><span id="line-118"></span><span id="extraRewrite"><span class="annot"><span class="annottext">extraRewrite :: ExtraDefs -&gt; UniqFM TyCon TcPluginRewriter
</span><a href="GHC.TypeLits.Extra.Solver.html#extraRewrite"><span class="hs-identifier hs-var hs-var">extraRewrite</span></a></span></span><span> </span><span id="local-6989586621679229293"><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229293"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(TyCon, TcPluginRewriter)] -&gt; UniqFM TyCon TcPluginRewriter
forall key elt. Uniquable key =&gt; [(key, elt)] -&gt; UniqFM key elt
</span><span class="hs-identifier hs-var">listToUFM</span></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#gcdTyCon"><span class="hs-identifier hs-var">gcdTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229293"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcPluginRewriter
forall {f :: * -&gt; *} {p} {p}.
Applicative f =&gt;
p -&gt; p -&gt; [Type] -&gt; f TcPluginRewriteResult
</span><a href="#local-6989586621679229295"><span class="hs-identifier hs-var">gcdRewrite</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#lcmTyCon"><span class="hs-identifier hs-var">lcmTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229293"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcPluginRewriter
forall {f :: * -&gt; *} {p} {p}.
Applicative f =&gt;
p -&gt; p -&gt; [Type] -&gt; f TcPluginRewriteResult
</span><a href="#local-6989586621679229297"><span class="hs-identifier hs-var">lcmRewrite</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>    </span><span id="local-6989586621679229295"><span class="annot"><span class="annottext">gcdRewrite :: p -&gt; p -&gt; [Type] -&gt; f TcPluginRewriteResult
</span><a href="#local-6989586621679229295"><span class="hs-identifier hs-var hs-var">gcdRewrite</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679229306"><span class="annot"><span class="annottext">args :: [Type]
</span><a href="#local-6989586621679229306"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">LitTy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NumTyLit</span></span><span> </span><span id="local-6989586621679229309"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229309"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LitTy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NumTyLit</span></span><span> </span><span id="local-6989586621679229310"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229310"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginRewriteResult -&gt; f TcPluginRewriteResult
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TcPluginRewriteResult -&gt; f TcPluginRewriteResult)
-&gt; TcPluginRewriteResult -&gt; f TcPluginRewriteResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">Reduction -&gt; [Ct] -&gt; TcPluginRewriteResult
</span><span class="hs-identifier hs-var">TcPluginRewriteTo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type -&gt; Reduction
</span><a href="#local-6989586621679229312"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#gcdTyCon"><span class="hs-identifier hs-var">gcdTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229293"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229306"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyLit -&gt; Type
</span><span class="hs-identifier hs-var">LitTy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; TyLit
</span><span class="hs-identifier hs-var">NumTyLit</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229309"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`gcd`</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229310"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="#local-6989586621679229295"><span class="hs-identifier hs-var">gcdRewrite</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginRewriteResult -&gt; f TcPluginRewriteResult
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TcPluginRewriteResult
</span><span class="hs-identifier hs-var">TcPluginNoRewrite</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>    </span><span id="local-6989586621679229297"><span class="annot"><span class="annottext">lcmRewrite :: p -&gt; p -&gt; [Type] -&gt; f TcPluginRewriteResult
</span><a href="#local-6989586621679229297"><span class="hs-identifier hs-var hs-var">lcmRewrite</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679229320"><span class="annot"><span class="annottext">args :: [Type]
</span><a href="#local-6989586621679229320"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">LitTy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NumTyLit</span></span><span> </span><span id="local-6989586621679229321"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229321"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LitTy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NumTyLit</span></span><span> </span><span id="local-6989586621679229322"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229322"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginRewriteResult -&gt; f TcPluginRewriteResult
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TcPluginRewriteResult -&gt; f TcPluginRewriteResult)
-&gt; TcPluginRewriteResult -&gt; f TcPluginRewriteResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><span class="annottext">Reduction -&gt; [Ct] -&gt; TcPluginRewriteResult
</span><span class="hs-identifier hs-var">TcPluginRewriteTo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type -&gt; Reduction
</span><a href="#local-6989586621679229312"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#lcmTyCon"><span class="hs-identifier hs-var">lcmTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229293"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229320"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyLit -&gt; Type
</span><span class="hs-identifier hs-var">LitTy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; TyLit
</span><span class="hs-identifier hs-var">NumTyLit</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229321"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`lcm`</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229322"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="#local-6989586621679229297"><span class="hs-identifier hs-var">lcmRewrite</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginRewriteResult -&gt; f TcPluginRewriteResult
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TcPluginRewriteResult
</span><span class="hs-identifier hs-var">TcPluginNoRewrite</span></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span>    </span><span id="local-6989586621679229312"><span class="annot"><span class="annottext">reduce :: TyCon -&gt; [Type] -&gt; Type -&gt; Reduction
</span><a href="#local-6989586621679229312"><span class="hs-identifier hs-var hs-var">reduce</span></a></span></span><span> </span><span id="local-6989586621679229323"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229323"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621679229324"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229324"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621679229325"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229325"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; Type -&gt; Reduction
</span><span class="hs-identifier hs-var">Reduction</span></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621679229327"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229325"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-132"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>      </span><span id="local-6989586621679229327"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621679229327"><span class="hs-identifier hs-var hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance -&gt; Role -&gt; Type -&gt; Type -&gt; Coercion
</span><span class="hs-identifier hs-var">mkUnivCo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOption -&gt; UnivCoProvenance
</span><span class="hs-identifier hs-var">PluginProv</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;ghc-typelits-extra&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier hs-var">Nominal</span></span><span>
</span><span id="line-134"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">mkTyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229323"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229324"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229325"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#decideEqualSOP"><span class="hs-identifier hs-type">decideEqualSOP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-type">ExtraDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EvBindsVar</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginSolveResult</span></span><span>
</span><span id="line-138"></span><span id="decideEqualSOP"><span class="annot"><span class="annottext">decideEqualSOP :: ExtraDefs -&gt; TcPluginSolver
</span><a href="GHC.TypeLits.Extra.Solver.html#decideEqualSOP"><span class="hs-identifier hs-var hs-var">decideEqualSOP</span></a></span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><span class="hs-identifier">_</span></span><span>    </span><span class="annot"><span class="annottext">EvBindsVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679229329"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229329"><span class="hs-identifier hs-var">_givens</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginSolveResult -&gt; TcPluginM TcPluginSolveResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; [Ct] -&gt; TcPluginSolveResult
</span><span class="hs-identifier hs-var">TcPluginOk</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#decideEqualSOP"><span class="hs-identifier hs-var">decideEqualSOP</span></a></span><span> </span><span id="local-6989586621679229331"><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229331"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679229332"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229332"><span class="hs-identifier hs-var">givens</span></a></span></span><span>  </span><span id="local-6989586621679229333"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229333"><span class="hs-identifier hs-var">wanteds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621679229334"><span class="annot"><a href="#local-6989586621679229334"><span class="hs-identifier hs-var">unit_wanteds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Maybe SolverConstraint] -&gt; [SolverConstraint]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe SolverConstraint] -&gt; [SolverConstraint])
-&gt; TcPluginM [Maybe SolverConstraint]
-&gt; TcPluginM [SolverConstraint]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; TcPluginM (Maybe SolverConstraint))
-&gt; [Ct] -&gt; TcPluginM [Maybe SolverConstraint]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MaybeT TcPluginM SolverConstraint
-&gt; TcPluginM (Maybe SolverConstraint)
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT TcPluginM SolverConstraint
 -&gt; TcPluginM (Maybe SolverConstraint))
-&gt; (Ct -&gt; MaybeT TcPluginM SolverConstraint)
-&gt; Ct
-&gt; TcPluginM (Maybe SolverConstraint)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; Ct -&gt; MaybeT TcPluginM SolverConstraint
</span><a href="GHC.TypeLits.Extra.Solver.html#toSolverConstraint"><span class="hs-identifier hs-var">toSolverConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229331"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229333"><span class="hs-identifier hs-var">wanteds</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679229334"><span class="hs-identifier hs-type">unit_wanteds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcPluginSolveResult -&gt; TcPluginM TcPluginSolveResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; [Ct] -&gt; TcPluginSolveResult
</span><span class="hs-identifier hs-var">TcPluginOk</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-144"></span><span>      </span><span id="local-6989586621679229340"><span class="annot"><a href="#local-6989586621679229340"><span class="hs-identifier hs-var">unit_givens</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Maybe SolverConstraint] -&gt; [SolverConstraint]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe SolverConstraint] -&gt; [SolverConstraint])
-&gt; TcPluginM [Maybe SolverConstraint]
-&gt; TcPluginM [SolverConstraint]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; TcPluginM (Maybe SolverConstraint))
-&gt; [Ct] -&gt; TcPluginM [Maybe SolverConstraint]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MaybeT TcPluginM SolverConstraint
-&gt; TcPluginM (Maybe SolverConstraint)
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT TcPluginM SolverConstraint
 -&gt; TcPluginM (Maybe SolverConstraint))
-&gt; (Ct -&gt; MaybeT TcPluginM SolverConstraint)
-&gt; Ct
-&gt; TcPluginM (Maybe SolverConstraint)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; Ct -&gt; MaybeT TcPluginM SolverConstraint
</span><a href="GHC.TypeLits.Extra.Solver.html#toSolverConstraint"><span class="hs-identifier hs-var">toSolverConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229331"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229332"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-145"></span><span>      </span><span id="local-6989586621679229341"><span class="annot"><a href="#local-6989586621679229341"><span class="hs-identifier hs-var">sr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#simplifyExtra"><span class="hs-identifier hs-type">simplifyExtra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229331"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679229340"><span class="hs-identifier hs-type">unit_givens</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621679229334"><span class="hs-identifier hs-type">unit_wanteds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">tcPluginTrace</span></span><span> </span><span class="annot"><span class="hs-string">&quot;normalised&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ppr</span></span><span> </span><span class="annot"><a href="#local-6989586621679229341"><span class="hs-identifier hs-type">sr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679229341"><span class="hs-identifier hs-type">sr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#Simplified"><span class="hs-identifier hs-type">Simplified</span></a></span><span> </span><span id="local-6989586621679229345"><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679229345"><span class="hs-identifier hs-var">evs</span></a></span></span><span> </span><span id="local-6989586621679229346"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229346"><span class="hs-identifier hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcPluginSolveResult -&gt; TcPluginM TcPluginSolveResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; [Ct] -&gt; TcPluginSolveResult
</span><span class="hs-identifier hs-var">TcPluginOk</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((EvTerm, Ct) -&gt; Bool) -&gt; [(EvTerm, Ct)] -&gt; [(EvTerm, Ct)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><span class="hs-identifier hs-var">isWantedCt</span></span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Bool) -&gt; ((EvTerm, Ct) -&gt; Ct) -&gt; (EvTerm, Ct) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(EvTerm, Ct) -&gt; Ct
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679229345"><span class="hs-identifier hs-var">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229346"><span class="hs-identifier hs-var">new</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>        </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span id="local-6989586621679229349"><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229349"><span class="hs-identifier hs-var">eq</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcPluginSolveResult -&gt; TcPluginM TcPluginSolveResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Ct] -&gt; TcPluginSolveResult
</span><span class="hs-identifier hs-var">TcPluginContradiction</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SolverConstraint -&gt; Ct
</span><a href="GHC.TypeLits.Extra.Solver.html#fromSolverConstraint"><span class="hs-identifier hs-var">fromSolverConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229349"><span class="hs-identifier hs-var">eq</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">data</span><span> </span><span id="SolverConstraint"><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-var">SolverConstraint</span></a></span></span><span>
</span><span id="line-152"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="NatEquality"><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-var">NatEquality</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraOp"><span class="hs-identifier hs-type">ExtraOp</span></a></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraOp"><span class="hs-identifier hs-type">ExtraOp</span></a></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#Normalised"><span class="hs-identifier hs-type">Normalised</span></a></span><span>
</span><span id="line-153"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="NatInequality"><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-var">NatInequality</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraOp"><span class="hs-identifier hs-type">ExtraOp</span></a></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraOp"><span class="hs-identifier hs-type">ExtraOp</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#Normalised"><span class="hs-identifier hs-type">Normalised</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Outputable</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>  </span><span id="local-6989586621679229378"><span class="annot"><span class="annottext">ppr :: SolverConstraint -&gt; SDoc
</span><span class="hs-identifier hs-var hs-var hs-var">ppr</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span id="local-6989586621679229379"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229379"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229380"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229380"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span id="local-6989586621679229381"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229381"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621679229382"><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229382"><span class="hs-identifier hs-var">norm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc
forall doc. IsLine doc =&gt; CommandLineOption -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;NatEquality&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229379"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229380"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229381"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">Normalised -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229382"><span class="hs-identifier hs-var">norm</span></a></span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-type">NatInequality</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679229383"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229383"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span id="local-6989586621679229384"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229384"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621679229385"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229385"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679229386"><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229386"><span class="hs-identifier hs-var">norm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc
forall doc. IsLine doc =&gt; CommandLineOption -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;NatInequality&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229383"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229384"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229385"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">Normalised -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229386"><span class="hs-identifier hs-var">norm</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">data</span><span> </span><span id="SimplifyResult"><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SimplifyResult"><span class="hs-identifier hs-var">SimplifyResult</span></a></span></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Simplified"><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#Simplified"><span class="hs-identifier hs-var">Simplified</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EvTerm</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Impossible"><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#Impossible"><span class="hs-identifier hs-var">Impossible</span></a></span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Outputable</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SimplifyResult"><span class="hs-identifier hs-type">SimplifyResult</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621679229405"><span class="annot"><span class="annottext">ppr :: SimplifyResult -&gt; SDoc
</span><span class="hs-identifier hs-var hs-var hs-var">ppr</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#Simplified"><span class="hs-identifier hs-type">Simplified</span></a></span><span> </span><span id="local-6989586621679229406"><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679229406"><span class="hs-identifier hs-var">evs</span></a></span></span><span> </span><span id="local-6989586621679229407"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229407"><span class="hs-identifier hs-var">new</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc
forall doc. IsLine doc =&gt; CommandLineOption -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;Simplified&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc
forall doc. IsLine doc =&gt; CommandLineOption -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;Solved:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679229406"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc
forall doc. IsLine doc =&gt; CommandLineOption -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;New:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229407"><span class="hs-identifier hs-var">new</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#Impossible"><span class="hs-identifier hs-type">Impossible</span></a></span><span> </span><span id="local-6989586621679229408"><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229408"><span class="hs-identifier hs-var">sct</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc
forall doc. IsLine doc =&gt; CommandLineOption -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;Impossible&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SolverConstraint -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229408"><span class="hs-identifier hs-var">sct</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#simplifyExtra"><span class="hs-identifier hs-type">simplifyExtra</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-type">ExtraDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SimplifyResult"><span class="hs-identifier hs-type">SimplifyResult</span></a></span><span>
</span><span id="line-168"></span><span id="simplifyExtra"><span class="annot"><span class="annottext">simplifyExtra :: ExtraDefs -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="GHC.TypeLits.Extra.Solver.html#simplifyExtra"><span class="hs-identifier hs-var hs-var">simplifyExtra</span></a></span></span><span> </span><span id="local-6989586621679229409"><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229409"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span id="local-6989586621679229410"><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229410"><span class="hs-identifier hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;simplifyExtra&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SolverConstraint] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229410"><span class="hs-identifier hs-var">eqs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcPluginM ()
-&gt; TcPluginM SimplifyResult -&gt; TcPluginM SimplifyResult
forall a b. TcPluginM a -&gt; TcPluginM b -&gt; TcPluginM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229410"><span class="hs-identifier hs-var">eqs</span></a></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><a href="#local-6989586621679229411"><span class="hs-identifier hs-type">simples</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EvTerm</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SimplifyResult"><span class="hs-identifier hs-type">SimplifyResult</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span id="local-6989586621679229411"><span class="annot"><span class="annottext">simples :: [Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var hs-var">simples</span></a></span></span><span> </span><span id="local-6989586621679229412"><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229412"><span class="hs-identifier hs-var">evs</span></a></span></span><span> </span><span id="local-6989586621679229413"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229413"><span class="hs-identifier hs-var">news</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimplifyResult -&gt; TcPluginM SimplifyResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; [Ct] -&gt; SimplifyResult
</span><a href="GHC.TypeLits.Extra.Solver.html#Simplified"><span class="hs-identifier hs-var">Simplified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)] -&gt; [(EvTerm, Ct)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229412"><span class="hs-identifier hs-var">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229413"><span class="hs-identifier hs-var">news</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span id="local-6989586621679229414"><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229414"><span class="hs-identifier hs-var">evs</span></a></span></span><span> </span><span id="local-6989586621679229415"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229415"><span class="hs-identifier hs-var">news</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679229416"><span class="annot"><span class="annottext">eq :: SolverConstraint
</span><a href="#local-6989586621679229416"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span id="local-6989586621679229417"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229417"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229418"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229418"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621679229419"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229419"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679229420"><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229420"><span class="hs-identifier hs-var">norm</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679229421"><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229421"><span class="hs-identifier hs-var">eqs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>      </span><span id="local-6989586621679229422"><span class="annot"><a href="#local-6989586621679229422"><span class="hs-identifier hs-var">ur</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; ExtraOp -&gt; ExtraOp -&gt; TcPluginM UnifyResult
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#unifyExtra"><span class="hs-identifier hs-var">unifyExtra</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229417"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229418"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229419"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">tcPluginTrace</span></span><span> </span><span class="annot"><span class="hs-string">&quot;unifyExtra result&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ppr</span></span><span> </span><span class="annot"><a href="#local-6989586621679229422"><span class="hs-identifier hs-type">ur</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679229422"><span class="hs-identifier hs-type">ur</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-176"></span><span>        </span><span class="annot"><span class="annottext">UnifyResult
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#Win"><span class="hs-identifier hs-var">Win</span></a></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; Ct -&gt; (EvTerm, Ct))
-&gt; Maybe EvTerm -&gt; Maybe (Ct -&gt; (EvTerm, Ct))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe EvTerm
</span><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-var">evMagic</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229417"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Ct -&gt; (EvTerm, Ct)) -&gt; Maybe Ct -&gt; Maybe (EvTerm, Ct)
forall a b. Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe Ct
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229417"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Maybe (EvTerm, Ct) -&gt; [Maybe (EvTerm, Ct)] -&gt; [Maybe (EvTerm, Ct)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229414"><span class="hs-identifier hs-var">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229415"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229421"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-177"></span><span>        </span><span class="annot"><span class="annottext">UnifyResult
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#Lose"><span class="hs-identifier hs-var">Lose</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229414"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229421"><span class="hs-identifier hs-var">eqs'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimplifyResult -&gt; TcPluginM SimplifyResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SolverConstraint -&gt; SimplifyResult
</span><a href="GHC.TypeLits.Extra.Solver.html#Impossible"><span class="hs-identifier hs-var">Impossible</span></a></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229416"><span class="hs-identifier hs-var">eq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>        </span><span class="annot"><span class="annottext">UnifyResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229420"><span class="hs-identifier hs-var">norm</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised -&gt; Normalised -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#Normalised"><span class="hs-identifier hs-var">Normalised</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><span class="hs-identifier hs-var">isWantedCt</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229417"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-179"></span><span>          </span><span id="local-6989586621679229430"><span class="annot"><a href="#local-6989586621679229430"><span class="hs-identifier hs-var">newCt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; SolverConstraint -&gt; TcPluginM Ct
</span><a href="GHC.TypeLits.Extra.Solver.html#createWantedFromNormalised"><span class="hs-identifier hs-var">createWantedFromNormalised</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229409"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229416"><span class="hs-identifier hs-var">eq</span></a></span><span>
</span><span id="line-180"></span><span>          </span><span class="annot"><a href="#local-6989586621679229411"><span class="hs-identifier hs-type">simples</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-type">evMagic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229417"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621679229417"><span class="hs-identifier hs-type">ct</span></a></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621679229414"><span class="hs-identifier hs-type">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679229430"><span class="hs-identifier hs-type">newCt</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621679229415"><span class="hs-identifier hs-type">news</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679229421"><span class="hs-identifier hs-type">eqs'</span></a></span><span>
</span><span id="line-181"></span><span>        </span><span class="annot"><span class="annottext">UnifyResult
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#Lose"><span class="hs-identifier hs-var">Lose</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229414"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229415"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229421"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-182"></span><span>        </span><span class="annot"><span class="annottext">UnifyResult
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#Draw"><span class="hs-identifier hs-var">Draw</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229414"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229415"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229421"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span id="local-6989586621679229433"><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229433"><span class="hs-identifier hs-var">evs</span></a></span></span><span> </span><span id="local-6989586621679229434"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229434"><span class="hs-identifier hs-var">news</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679229435"><span class="annot"><span class="annottext">eq :: SolverConstraint
</span><a href="#local-6989586621679229435"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-type">NatInequality</span></a></span><span> </span><span id="local-6989586621679229436"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229437"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229437"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621679229438"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229438"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679229439"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229439"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679229440"><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229440"><span class="hs-identifier hs-var">norm</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679229441"><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229441"><span class="hs-identifier hs-var">eqs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-184"></span><span>      </span><span class="annot"><span class="annottext">CommandLineOption -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;unifyExtra leq result&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExtraOp, ExtraOp, Bool) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229437"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229438"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229439"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229437"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229438"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621679229443"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229443"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#I"><span class="hs-identifier hs-type">I</span></a></span><span> </span><span id="local-6989586621679229444"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229444"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229443"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679229444"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229439"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; Ct -&gt; (EvTerm, Ct))
-&gt; Maybe EvTerm -&gt; Maybe (Ct -&gt; (EvTerm, Ct))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe EvTerm
</span><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-var">evMagic</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Ct -&gt; (EvTerm, Ct)) -&gt; Maybe Ct -&gt; Maybe (EvTerm, Ct)
forall a b. Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe Ct
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Maybe (EvTerm, Ct) -&gt; [Maybe (EvTerm, Ct)] -&gt; [Maybe (EvTerm, Ct)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229433"><span class="hs-identifier hs-var">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229434"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229441"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-188"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SimplifyResult -&gt; TcPluginM SimplifyResult
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SolverConstraint -&gt; SimplifyResult
</span><a href="GHC.TypeLits.Extra.Solver.html#Impossible"><span class="hs-identifier hs-var">Impossible</span></a></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229435"><span class="hs-identifier hs-var">eq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679229446"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229446"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#Max"><span class="hs-identifier hs-type">Max</span></a></span><span> </span><span id="local-6989586621679229448"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229448"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679229449"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229449"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229439"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229446"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; ExtraOp -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229448"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229446"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; ExtraOp -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229449"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; Ct -&gt; (EvTerm, Ct))
-&gt; Maybe EvTerm -&gt; Maybe (Ct -&gt; (EvTerm, Ct))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe EvTerm
</span><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-var">evMagic</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Ct -&gt; (EvTerm, Ct)) -&gt; Maybe Ct -&gt; Maybe (EvTerm, Ct)
forall a b. Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe Ct
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Maybe (EvTerm, Ct) -&gt; [Maybe (EvTerm, Ct)] -&gt; [Maybe (EvTerm, Ct)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229433"><span class="hs-identifier hs-var">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229434"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229441"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>        </span><span class="hs-comment">-- transform:  q ~ Max x y =&gt; (p &lt;=? q ~ True)</span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-comment">-- to:         (p &lt;=? Max x y) ~ True</span><span>
</span><span id="line-194"></span><span>        </span><span class="hs-comment">-- and try to solve that along with the rest of the eqs'</span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679229451"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229451"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229452"><span class="annot"><span class="annottext">q :: ExtraOp
</span><a href="#local-6989586621679229452"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#V"><span class="hs-identifier hs-type">V</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229439"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; [SolverConstraint] -&gt; Maybe ExtraOp
</span><a href="#local-6989586621679229454"><span class="hs-identifier hs-var">findMax</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229452"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229410"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>                   </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679229455"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229455"><span class="hs-identifier hs-var">m</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229433"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229434"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; ExtraOp -&gt; ExtraOp -&gt; Bool -&gt; Normalised -&gt; SolverConstraint
</span><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-var">NatInequality</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229451"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229455"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229439"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229440"><span class="hs-identifier hs-var">norm</span></a></span><span class="annot"><span class="annottext">SolverConstraint -&gt; [SolverConstraint] -&gt; [SolverConstraint]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229441"><span class="hs-identifier hs-var">eqs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>                   </span><span class="annot"><span class="annottext">Maybe ExtraOp
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229433"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229434"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229441"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span class="annot"><span class="annottext">(ExtraOp, ExtraOp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229440"><span class="hs-identifier hs-var">norm</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised -&gt; Normalised -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#Normalised"><span class="hs-identifier hs-var">Normalised</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><span class="hs-identifier hs-var">isWantedCt</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229436"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-200"></span><span>          </span><span id="local-6989586621679229456"><span class="annot"><a href="#local-6989586621679229456"><span class="hs-identifier hs-var">newCt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; SolverConstraint -&gt; TcPluginM Ct
</span><a href="GHC.TypeLits.Extra.Solver.html#createWantedFromNormalised"><span class="hs-identifier hs-var">createWantedFromNormalised</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229409"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229435"><span class="hs-identifier hs-var">eq</span></a></span><span>
</span><span id="line-201"></span><span>          </span><span class="annot"><a href="#local-6989586621679229411"><span class="hs-identifier hs-type">simples</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-type">evMagic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229436"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621679229436"><span class="hs-identifier hs-type">ct</span></a></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621679229433"><span class="hs-identifier hs-type">evs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679229456"><span class="hs-identifier hs-type">newCt</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621679229434"><span class="hs-identifier hs-type">news</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679229441"><span class="hs-identifier hs-type">eqs'</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">(ExtraOp, ExtraOp)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
-&gt; [Ct] -&gt; [SolverConstraint] -&gt; TcPluginM SimplifyResult
</span><a href="#local-6989586621679229411"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (EvTerm, Ct)]
</span><a href="#local-6989586621679229433"><span class="hs-identifier hs-var">evs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679229434"><span class="hs-identifier hs-var">news</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229441"><span class="hs-identifier hs-var">eqs'</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-comment">-- look for given constraint with the form: c ~ Max x y</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><a href="#local-6989586621679229454"><span class="hs-identifier hs-type">findMax</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraOp"><span class="hs-identifier hs-type">ExtraOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraOp"><span class="hs-identifier hs-type">ExtraOp</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679229454"><span class="annot"><span class="annottext">findMax :: ExtraOp -&gt; [SolverConstraint] -&gt; Maybe ExtraOp
</span><a href="#local-6989586621679229454"><span class="hs-identifier hs-var hs-var">findMax</span></a></span></span><span> </span><span id="local-6989586621679229457"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229457"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SolverConstraint] -&gt; Maybe ExtraOp
</span><a href="#local-6989586621679229458"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>        </span><span id="local-6989586621679229458"><span class="annot"><span class="annottext">go :: [SolverConstraint] -&gt; Maybe ExtraOp
</span><a href="#local-6989586621679229458"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ExtraOp
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-209"></span><span>        </span><span class="annot"><a href="#local-6989586621679229458"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span id="local-6989586621679229461"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229461"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229462"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229462"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679229463"><span class="annot"><span class="annottext">b :: ExtraOp
</span><a href="#local-6989586621679229463"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#Max"><span class="hs-identifier hs-type">Max</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Normalised
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[SolverConstraint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229457"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; ExtraOp -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229462"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><span class="hs-identifier hs-var">isWantedCt</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229461"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; Maybe ExtraOp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229463"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-212"></span><span>        </span><span class="annot"><a href="#local-6989586621679229458"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span id="local-6989586621679229465"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229465"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229466"><span class="annot"><span class="annottext">a :: ExtraOp
</span><a href="#local-6989586621679229466"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#Max"><span class="hs-identifier hs-type">Max</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679229467"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229467"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[SolverConstraint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229457"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; ExtraOp -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229467"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><span class="hs-identifier hs-var">isWantedCt</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229465"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraOp -&gt; Maybe ExtraOp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229466"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-215"></span><span>        </span><span class="annot"><a href="#local-6989586621679229458"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SolverConstraint
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679229468"><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229468"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SolverConstraint] -&gt; Maybe ExtraOp
</span><a href="#local-6989586621679229458"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[SolverConstraint]
</span><a href="#local-6989586621679229468"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-comment">-- Extract the Nat equality constraints</span><span>
</span><span id="line-219"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#toSolverConstraint"><span class="hs-identifier hs-type">toSolverConstraint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-type">ExtraDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MaybeT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span>
</span><span id="line-220"></span><span id="toSolverConstraint"><span class="annot"><span class="annottext">toSolverConstraint :: ExtraDefs -&gt; Ct -&gt; MaybeT TcPluginM SolverConstraint
</span><a href="GHC.TypeLits.Extra.Solver.html#toSolverConstraint"><span class="hs-identifier hs-var hs-var">toSolverConstraint</span></a></span></span><span> </span><span id="local-6989586621679229469"><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span id="local-6989586621679229470"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229470"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Pred
</span><span class="hs-identifier hs-var">classifyPredType</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Pred) -&gt; Type -&gt; Pred
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Type
</span><span class="hs-identifier hs-var">ctEvPred</span></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; Type) -&gt; CtEvidence -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><span class="hs-identifier hs-var">ctEvidence</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229470"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">EqPred</span></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><span class="hs-identifier hs-var">NomEq</span></span><span> </span><span id="local-6989586621679229471"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229471"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621679229472"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229472"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-222"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621679229473"><span class="hs-identifier hs-var">isNatKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
Type -&gt; Type
</span><span class="hs-identifier hs-var">typeKind</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229471"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621679229473"><span class="hs-identifier hs-var">isNatKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
Type -&gt; Type
</span><span class="hs-identifier hs-var">typeKind</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229472"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-224"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621679229474"><span class="annot"><a href="#local-6989586621679229474"><span class="hs-identifier hs-var">t1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229475"><span class="annot"><a href="#local-6989586621679229475"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; Type -&gt; MaybeT TcPluginM (ExtraOp, Normalised)
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-var">normaliseNat</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229471"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-225"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621679229477"><span class="annot"><a href="#local-6989586621679229477"><span class="hs-identifier hs-var">t2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229478"><span class="annot"><a href="#local-6989586621679229478"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-type">normaliseNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229469"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229472"><span class="hs-identifier hs-type">t2</span></a></span><span>
</span><span id="line-226"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229470"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229474"><span class="hs-identifier hs-type">t1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229477"><span class="hs-identifier hs-type">t2'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#mergeNormalised"><span class="hs-identifier hs-type">mergeNormalised</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229475"><span class="hs-identifier hs-type">n1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229478"><span class="hs-identifier hs-type">n2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229481"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229481"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679229482"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229482"><span class="hs-identifier hs-var">cmpNat</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229483"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229483"><span class="hs-identifier hs-var">tt1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229484"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229484"><span class="hs-identifier hs-var">tt2</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229485"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229485"><span class="hs-identifier hs-var">ff1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229471"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-228"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229481"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#ordTyCon"><span class="hs-identifier hs-var">ordTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-229"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229487"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229487"><span class="hs-identifier hs-var">cmpNatTc</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679229488"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229488"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229489"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229489"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229482"><span class="hs-identifier hs-var">cmpNat</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229487"><span class="hs-identifier hs-var">cmpNatTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">typeNatCmpTyCon</span></span><span>
</span><span id="line-231"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229483"><span class="hs-identifier hs-var">tt1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229484"><span class="hs-identifier hs-var">tt2</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>
</span><span id="line-233"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229485"><span class="hs-identifier hs-var">ff1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedFalseDataCon</span></span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229490"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229490"><span class="hs-identifier hs-var">tc'</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229472"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-236"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679229491"><span class="annot"><a href="#local-6989586621679229491"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229492"><span class="annot"><a href="#local-6989586621679229492"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; Type -&gt; MaybeT TcPluginM (ExtraOp, Normalised)
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-var">normaliseNat</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229488"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-237"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679229493"><span class="annot"><a href="#local-6989586621679229493"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229494"><span class="annot"><a href="#local-6989586621679229494"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-type">normaliseNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229469"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229489"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-238"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679229505"><span class="annot"><a href="#local-6989586621679229505"><span class="hs-identifier hs-var hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229490"><span class="hs-identifier hs-var">tc'</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SolverConstraint -&gt; MaybeT TcPluginM SolverConstraint
forall a. a -&gt; MaybeT TcPluginM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; ExtraOp -&gt; ExtraOp -&gt; Bool -&gt; Normalised -&gt; SolverConstraint
</span><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-var">NatInequality</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229470"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229491"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229493"><span class="hs-identifier hs-var">y'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Normalised -&gt; Normalised -&gt; Normalised
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#mergeNormalised"><span class="hs-identifier hs-var">mergeNormalised</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229492"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229494"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229490"><span class="hs-identifier hs-var">tc'</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedFalseDataCon</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SolverConstraint -&gt; MaybeT TcPluginM SolverConstraint
forall a. a -&gt; MaybeT TcPluginM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; ExtraOp -&gt; ExtraOp -&gt; Bool -&gt; Normalised -&gt; SolverConstraint
</span><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-var">NatInequality</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229470"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229491"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229493"><span class="hs-identifier hs-var">y'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Normalised -&gt; Normalised -&gt; Normalised
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#mergeNormalised"><span class="hs-identifier hs-var">mergeNormalised</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229492"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><a href="#local-6989586621679229494"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; MaybeT TcPluginM SolverConstraint
forall a. CommandLineOption -&gt; MaybeT TcPluginM a
forall (m :: * -&gt; *) a. MonadFail m =&gt; CommandLineOption -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;Nothing&quot;</span></span><span>
</span><span id="line-241"></span><span>          </span><span class="annot"><a href="#local-6989586621679229505"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-242"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229506"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229506"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229507"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229507"><span class="hs-identifier hs-var">ordCondTc</span></a></span></span><span> </span><span id="local-6989586621679229508"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229508"><span class="hs-identifier hs-var">zs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229471"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-243"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229506"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#assertTC"><span class="hs-identifier hs-var">assertTC</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-244"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229510"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229510"><span class="hs-identifier hs-var">tc'</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229472"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-245"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229510"><span class="hs-identifier hs-var">tc'</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; TyCon
</span><span class="hs-identifier hs-var">cTupleTyCon</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span>
</span><span id="line-246"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229507"><span class="hs-identifier hs-var">ordCondTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#ordTyCon"><span class="hs-identifier hs-var">ordTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-247"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679229511"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229511"><span class="hs-identifier hs-var">cmp</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229512"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229512"><span class="hs-identifier hs-var">lt</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229513"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229513"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229514"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229514"><span class="hs-identifier hs-var">gt</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229508"><span class="hs-identifier hs-var">zs</span></a></span><span>
</span><span id="line-248"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229515"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229515"><span class="hs-identifier hs-var">tcCmpNat</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679229516"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229516"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229517"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229517"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229511"><span class="hs-identifier hs-var">cmp</span></a></span><span>
</span><span id="line-249"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229515"><span class="hs-identifier hs-var">tcCmpNat</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">typeNatCmpTyCon</span></span><span>
</span><span id="line-250"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229518"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229518"><span class="hs-identifier hs-var">ltTc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229512"><span class="hs-identifier hs-var">lt</span></a></span><span>
</span><span id="line-251"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229518"><span class="hs-identifier hs-var">ltTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>
</span><span id="line-252"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229519"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229519"><span class="hs-identifier hs-var">eqTc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229513"><span class="hs-identifier hs-var">eq</span></a></span><span>
</span><span id="line-253"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229519"><span class="hs-identifier hs-var">eqTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>
</span><span id="line-254"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229520"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229520"><span class="hs-identifier hs-var">gtTc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229514"><span class="hs-identifier hs-var">gt</span></a></span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229520"><span class="hs-identifier hs-var">gtTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedFalseDataCon</span></span><span>
</span><span id="line-256"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-257"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679229521"><span class="annot"><a href="#local-6989586621679229521"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229522"><span class="annot"><a href="#local-6989586621679229522"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; Type -&gt; MaybeT TcPluginM (ExtraOp, Normalised)
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-var">normaliseNat</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229516"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-258"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679229523"><span class="annot"><a href="#local-6989586621679229523"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229524"><span class="annot"><a href="#local-6989586621679229524"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-type">normaliseNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229469"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229517"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-259"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-type">NatInequality</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229470"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229521"><span class="hs-identifier hs-type">x'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229523"><span class="hs-identifier hs-type">y'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#mergeNormalised"><span class="hs-identifier hs-type">mergeNormalised</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229522"><span class="hs-identifier hs-type">n1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229524"><span class="hs-identifier hs-type">n2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">IrredPred</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229525"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229525"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229526"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229526"><span class="hs-identifier hs-var">ordCondTc</span></a></span></span><span> </span><span id="local-6989586621679229527"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229527"><span class="hs-identifier hs-var">zs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229525"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#assertTC"><span class="hs-identifier hs-var">assertTC</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-262"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229526"><span class="hs-identifier hs-var">ordCondTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#ordTyCon"><span class="hs-identifier hs-var">ordTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-263"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679229528"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229528"><span class="hs-identifier hs-var">cmp</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229529"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229529"><span class="hs-identifier hs-var">lt</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229530"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229530"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229531"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229531"><span class="hs-identifier hs-var">gt</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679229527"><span class="hs-identifier hs-var">zs</span></a></span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229532"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229532"><span class="hs-identifier hs-var">tcCmpNat</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679229533"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229533"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679229534"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229534"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229528"><span class="hs-identifier hs-var">cmp</span></a></span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229532"><span class="hs-identifier hs-var">tcCmpNat</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">typeNatCmpTyCon</span></span><span>
</span><span id="line-266"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229535"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229535"><span class="hs-identifier hs-var">ltTc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229529"><span class="hs-identifier hs-var">lt</span></a></span><span>
</span><span id="line-267"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229535"><span class="hs-identifier hs-var">ltTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229536"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229536"><span class="hs-identifier hs-var">eqTc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229530"><span class="hs-identifier hs-var">eq</span></a></span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229536"><span class="hs-identifier hs-var">eqTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyConApp</span></span><span> </span><span id="local-6989586621679229537"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229537"><span class="hs-identifier hs-var">gtTc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229531"><span class="hs-identifier hs-var">gt</span></a></span><span>
</span><span id="line-271"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229537"><span class="hs-identifier hs-var">gtTc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedFalseDataCon</span></span><span>
</span><span id="line-272"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-273"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679229538"><span class="annot"><a href="#local-6989586621679229538"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229539"><span class="annot"><a href="#local-6989586621679229539"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; Type -&gt; MaybeT TcPluginM (ExtraOp, Normalised)
</span><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-var">normaliseNat</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229469"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229533"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-274"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679229540"><span class="annot"><a href="#local-6989586621679229540"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229541"><span class="annot"><a href="#local-6989586621679229541"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Unify.html#normaliseNat"><span class="hs-identifier hs-type">normaliseNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229469"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229534"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-275"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-type">NatInequality</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229470"><span class="hs-identifier hs-type">ct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229538"><span class="hs-identifier hs-type">x'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229540"><span class="hs-identifier hs-type">y'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#mergeNormalised"><span class="hs-identifier hs-type">mergeNormalised</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229539"><span class="hs-identifier hs-type">n1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229541"><span class="hs-identifier hs-type">n2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; MaybeT TcPluginM SolverConstraint
forall a. CommandLineOption -&gt; MaybeT TcPluginM a
forall (m :: * -&gt; *) a. MonadFail m =&gt; CommandLineOption -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;Nothing&quot;</span></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><a href="#local-6989586621679229473"><span class="hs-identifier hs-type">isNatKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-279"></span><span>    </span><span id="local-6989586621679229473"><span class="annot"><span class="annottext">isNatKind :: Type -&gt; Bool
</span><a href="#local-6989586621679229473"><span class="hs-identifier hs-var hs-var">isNatKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><span class="hs-operator hs-var">`eqType`</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">naturalTy</span></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#createWantedFromNormalised"><span class="hs-identifier hs-type">createWantedFromNormalised</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-type">ExtraDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span>
</span><span id="line-282"></span><span id="createWantedFromNormalised"><span class="annot"><span class="annottext">createWantedFromNormalised :: ExtraDefs -&gt; SolverConstraint -&gt; TcPluginM Ct
</span><a href="GHC.TypeLits.Extra.Solver.html#createWantedFromNormalised"><span class="hs-identifier hs-var hs-var">createWantedFromNormalised</span></a></span></span><span> </span><span id="local-6989586621679229542"><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span id="local-6989586621679229543"><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229543"><span class="hs-identifier hs-var">sct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679229544"><span class="annot"><span class="annottext">extractCtSides :: SolverConstraint -&gt; (Ct, Type, Type)
</span><a href="#local-6989586621679229544"><span class="hs-identifier hs-var hs-var hs-var">extractCtSides</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span id="local-6989586621679229545"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229545"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229546"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229546"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621679229547"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229547"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229545"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; ExtraOp -&gt; Type
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#reifyEOP"><span class="hs-identifier hs-var">reifyEOP</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229546"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; ExtraOp -&gt; Type
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#reifyEOP"><span class="hs-identifier hs-var">reifyEOP</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229547"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><a href="#local-6989586621679229544"><span class="hs-identifier hs-var">extractCtSides</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-type">NatInequality</span></a></span><span> </span><span id="local-6989586621679229549"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229549"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621679229550"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229550"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679229551"><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229551"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621679229552"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229552"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679229553"><span class="annot"><span class="annottext">tc :: TyCon
</span><a href="#local-6989586621679229553"><span class="hs-identifier hs-var hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679229552"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedFalseDataCon</span></span><span>
</span><span id="line-286"></span><span>            </span><span id="local-6989586621679229554"><span class="annot"><span class="annottext">t1 :: Type
</span><a href="#local-6989586621679229554"><span class="hs-identifier hs-var hs-var">t1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">TyConApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#ordTyCon"><span class="hs-identifier hs-var">ordTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">boolTy</span></span><span>
</span><span id="line-288"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">TyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">typeNatCmpTyCon</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ExtraDefs -&gt; ExtraOp -&gt; Type
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#reifyEOP"><span class="hs-identifier hs-var">reifyEOP</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229550"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExtraDefs -&gt; ExtraOp -&gt; Type
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#reifyEOP"><span class="hs-identifier hs-var">reifyEOP</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><a href="#local-6989586621679229551"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-289"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">TyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-290"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">TyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedTrueDataCon</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-291"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">TyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">promotedFalseDataCon</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-292"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-293"></span><span>            </span><span id="local-6989586621679229555"><span class="annot"><span class="annottext">t2 :: Type
</span><a href="#local-6989586621679229555"><span class="hs-identifier hs-var hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">TyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229553"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-294"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229549"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229554"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229555"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679229556"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229556"><span class="hs-identifier hs-var hs-var">ct</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229557"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229557"><span class="hs-identifier hs-var hs-var">t1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229558"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229558"><span class="hs-identifier hs-var hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SolverConstraint -&gt; (Ct, Type, Type)
</span><a href="#local-6989586621679229544"><span class="hs-identifier hs-var">extractCtSides</span></a></span><span> </span><span class="annot"><span class="annottext">SolverConstraint
</span><a href="#local-6989586621679229543"><span class="hs-identifier hs-var">sct</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621679229559"><span class="annot"><a href="#local-6989586621679229559"><span class="hs-identifier hs-var">newPredTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Maybe (TyCon, [Type])
Type -&gt; Maybe (TyCon, [Type])
</span><span class="hs-identifier hs-var">splitTyConApp_maybe</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Maybe (TyCon, [Type])) -&gt; Type -&gt; Maybe (TyCon, [Type])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Type
</span><span class="hs-identifier hs-var">ctEvPred</span></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; Type) -&gt; CtEvidence -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><span class="hs-identifier hs-var">ctEvidence</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229556"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679229560"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229560"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621679229561"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229561"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229562"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229562"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229560"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><span class="hs-operator hs-var">`hasKey`</span></span><span> </span><span class="annot"><span class="annottext">Unique
</span><span class="hs-identifier hs-var">eqPrimTyConKey</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TcPluginM Type
forall a. a -&gt; TcPluginM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">mkTyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229560"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229561"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229562"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229557"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229558"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679229563"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229563"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679229564"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229564"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229563"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><span class="hs-operator hs-var">`hasKey`</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><span class="hs-identifier hs-var">getUnique</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtraDefs -&gt; TyCon
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#assertTC"><span class="hs-identifier hs-var">assertTC</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraDefs
</span><a href="#local-6989586621679229542"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TcPluginM Type
forall a. a -&gt; TcPluginM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">mkTyConApp</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679229563"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229557"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229564"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TyCon, [Type])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CommandLineOption -&gt; TcPluginM Type
forall a. HasCallStack =&gt; CommandLineOption -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;Impossible: neither (&lt;=?) nor Assert&quot;</span></span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621679229566"><span class="annot"><a href="#local-6989586621679229566"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">newWanted</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ctLoc</span></span><span> </span><span class="annot"><a href="#local-6989586621679229556"><span class="hs-identifier hs-type">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679229559"><span class="hs-identifier hs-type">newPredTy</span></a></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679229567"><span class="annot"><a href="#local-6989586621679229567"><span class="hs-identifier hs-var hs-var">ctN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229556"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-302"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">CQuantCan</span></span><span> </span><span id="local-6989586621679229569"><span class="annot"><span class="annottext">QCInst
</span><a href="#local-6989586621679229569"><span class="hs-identifier hs-var">qc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QCInst -&gt; Ct
</span><span class="hs-identifier hs-var">CQuantCan</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QCInst
</span><a href="#local-6989586621679229569"><span class="hs-identifier hs-var">qc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">qci_ev</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679229566"><span class="hs-identifier hs-type">ev</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-cpp">
#if MIN_VERSION_ghc(9,8,0)
</span><span>              </span><span class="annot"><span class="hs-identifier hs-type">CDictCan</span></span><span> </span><span id="local-6989586621679229571"><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621679229571"><span class="hs-identifier hs-var">di</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DictCt -&gt; Ct
</span><span class="hs-identifier hs-var">CDictCan</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621679229571"><span class="hs-identifier hs-var">di</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">di_ev</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679229566"><span class="hs-identifier hs-type">ev</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">CIrredCan</span></span><span> </span><span id="local-6989586621679229574"><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621679229574"><span class="hs-identifier hs-var">ir</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; Ct
</span><span class="hs-identifier hs-var">CIrredCan</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621679229574"><span class="hs-identifier hs-var">ir</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">ir_ev</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679229566"><span class="hs-identifier hs-type">ev</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">CEqCan</span></span><span> </span><span id="local-6989586621679229577"><span class="annot"><span class="annottext">EqCt
</span><a href="#local-6989586621679229577"><span class="hs-identifier hs-var">eq</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EqCt -&gt; Ct
</span><span class="hs-identifier hs-var">CEqCan</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EqCt
</span><a href="#local-6989586621679229577"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">eq_ev</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679229566"><span class="hs-identifier hs-type">ev</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">CNonCanonical</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Ct
</span><span class="hs-identifier hs-var">CNonCanonical</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621679229566"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-cpp">
#else
</span><span>              </span><span class="hs-identifier">ctX</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">ctX</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">cc_ev</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ev</span><span> </span><span class="hs-special">}</span><span class="hs-cpp">
#endif
</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621679229567"><span class="hs-identifier hs-type">ctN</span></a></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#fromSolverConstraint"><span class="hs-identifier hs-type">fromSolverConstraint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#SolverConstraint"><span class="hs-identifier hs-type">SolverConstraint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span>
</span><span id="line-314"></span><span id="fromSolverConstraint"><span class="annot"><span class="annottext">fromSolverConstraint :: SolverConstraint -&gt; Ct
</span><a href="GHC.TypeLits.Extra.Solver.html#fromSolverConstraint"><span class="hs-identifier hs-var hs-var">fromSolverConstraint</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatEquality"><span class="hs-identifier hs-type">NatEquality</span></a></span><span> </span><span id="local-6989586621679229580"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229580"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229580"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-315"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#fromSolverConstraint"><span class="hs-identifier hs-var">fromSolverConstraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#NatInequality"><span class="hs-identifier hs-type">NatInequality</span></a></span><span> </span><span id="local-6989586621679229581"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229581"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExtraOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Normalised
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229581"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#lookupExtraDefs"><span class="hs-identifier hs-type">lookupExtraDefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-type">ExtraDefs</span></a></span><span>
</span><span id="line-318"></span><span id="lookupExtraDefs"><span class="annot"><span class="annottext">lookupExtraDefs :: TcPluginM ExtraDefs
</span><a href="GHC.TypeLits.Extra.Solver.html#lookupExtraDefs"><span class="hs-identifier hs-var hs-var">lookupExtraDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><span class="annottext">TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; TyCon
-&gt; ExtraDefs
</span><a href="GHC.TypeLits.Extra.Solver.Operations.html#ExtraDefs"><span class="hs-identifier hs-var">ExtraDefs</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; TyCon
 -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM
     (TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; ExtraDefs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.Max</span><span>
</span><span id="line-320"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM
  (TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM
     (TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.Min</span><span>
</span><span id="line-321"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM
  (TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM
     (TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; TyCon
      -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TcPluginM TyCon
forall a. a -&gt; TcPluginM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">typeNatDivTyCon</span></span><span>
</span><span id="line-322"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM
  (TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; TyCon
   -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM
     (TyCon
      -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TcPluginM TyCon
forall a. a -&gt; TcPluginM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier hs-var">typeNatModTyCon</span></span><span>
</span><span id="line-323"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM
  (TyCon
   -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM
     (TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.FLog</span><span>
</span><span id="line-324"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM
  (TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM
     (TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.CLog</span><span>
</span><span id="line-325"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM (TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM (TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.Log</span><span>
</span><span id="line-326"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM (TyCon -&gt; TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon
-&gt; TcPluginM (TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.GCD</span><span>
</span><span id="line-327"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM (TyCon -&gt; TyCon -&gt; TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon -&gt; TcPluginM (TyCon -&gt; TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeLits.Extra.LCM</span><span>
</span><span id="line-328"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM (TyCon -&gt; TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon -&gt; TcPluginM (TyCon -&gt; ExtraDefs)
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Data.Type.Ord.OrdCond</span><span>
</span><span id="line-329"></span><span>              </span><span class="annot"><span class="annottext">TcPluginM (TyCon -&gt; ExtraDefs)
-&gt; TcPluginM TyCon -&gt; TcPluginM ExtraDefs
forall a b. TcPluginM (a -&gt; b) -&gt; TcPluginM a -&gt; TcPluginM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var">look</span></a></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">GHC.TypeError.Assert</span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-331"></span><span>    </span><span id="local-6989586621679229583"><span class="annot"><span class="annottext">look :: Name -&gt; TcPluginM TyCon
</span><a href="#local-6989586621679229583"><span class="hs-identifier hs-var hs-var">look</span></a></span></span><span> </span><span id="local-6989586621679229585"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679229585"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM TyCon
</span><span class="hs-identifier hs-var">tcLookupTyCon</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; TcPluginM TyCon) -&gt; TcPluginM Name -&gt; TcPluginM TyCon
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcPluginM Name
</span><a href="GHC.TypeLits.Extra.Solver.html#lookupTHName"><span class="hs-identifier hs-var">lookupTHName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679229585"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#lookupTHName"><span class="hs-identifier hs-type">lookupTHName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TH.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-334"></span><span id="lookupTHName"><span class="annot"><span class="annottext">lookupTHName :: Name -&gt; TcPluginM Name
</span><a href="GHC.TypeLits.Extra.Solver.html#lookupTHName"><span class="hs-identifier hs-var hs-var">lookupTHName</span></a></span></span><span> </span><span id="local-6989586621679229588"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679229588"><span class="hs-identifier hs-var">th</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621679229589"><span class="annot"><a href="#local-6989586621679229589"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM NameCache -&gt; TcPluginM NameCache
forall a. TcM a -&gt; TcPluginM a
</span><span class="hs-identifier hs-var">unsafeTcPluginTcM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; NameCache
</span><span class="hs-identifier hs-var">hsc_NC</span></span><span> </span><span class="annot"><span class="annottext">(HscEnv -&gt; NameCache)
-&gt; (Env TcGblEnv TcLclEnv -&gt; HscEnv)
-&gt; Env TcGblEnv TcLclEnv
-&gt; NameCache
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Env TcGblEnv TcLclEnv -&gt; HscEnv
forall gbl lcl. Env gbl lcl -&gt; HscEnv
</span><span class="hs-identifier hs-var">env_top</span></span><span> </span><span class="annot"><span class="annottext">(Env TcGblEnv TcLclEnv -&gt; NameCache)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Env TcGblEnv TcLclEnv)
-&gt; TcM NameCache
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (Env TcGblEnv TcLclEnv)
forall env. IOEnv env env
</span><span class="hs-identifier hs-var">getEnv</span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621679229590"><span class="annot"><a href="#local-6989586621679229590"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">tcPluginIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">thNameToGhcNameIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679229589"><span class="hs-identifier hs-type">nc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679229588"><span class="hs-identifier hs-type">th</span></a></span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">fail</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Failed to lookup &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span> </span><span class="annot"><a href="#local-6989586621679229588"><span class="hs-identifier hs-type">th</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621679229590"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-comment">-- Utils</span><span>
</span><span id="line-340"></span><span class="annot"><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-type">evMagic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EvTerm</span></span><span>
</span><span id="line-341"></span><span id="evMagic"><span class="annot"><span class="annottext">evMagic :: Ct -&gt; Maybe EvTerm
</span><a href="GHC.TypeLits.Extra.Solver.html#evMagic"><span class="hs-identifier hs-var hs-var">evMagic</span></a></span></span><span> </span><span id="local-6989586621679229593"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229593"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Pred
</span><span class="hs-identifier hs-var">classifyPredType</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Pred) -&gt; Type -&gt; Pred
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Type
</span><span class="hs-identifier hs-var">ctEvPred</span></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; Type) -&gt; CtEvidence -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><span class="hs-identifier hs-var">ctEvidence</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679229593"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">EqPred</span></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><span class="hs-identifier hs-var">NomEq</span></span><span> </span><span id="local-6989586621679229594"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229594"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621679229595"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229595"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; Maybe EvTerm
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOption -&gt; Type -&gt; Type -&gt; EvTerm
</span><span class="hs-identifier hs-var">evByFiat</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;ghc-typelits-extra&quot;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229594"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229595"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">IrredPred</span></span><span> </span><span id="local-6989586621679229596"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229596"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-344"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679229597"><span class="annot"><span class="annottext">t1 :: Type
</span><a href="#local-6989586621679229597"><span class="hs-identifier hs-var hs-var">t1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><span class="hs-identifier hs-var">mkTyConApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; TyCon
</span><span class="hs-identifier hs-var">cTupleTyCon</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-345"></span><span>          </span><span id="local-6989586621679229598"><span class="annot"><span class="annottext">co :: Coercion
</span><a href="#local-6989586621679229598"><span class="hs-identifier hs-var hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance -&gt; Role -&gt; Type -&gt; Type -&gt; Coercion
</span><span class="hs-identifier hs-var">mkUnivCo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommandLineOption -&gt; UnivCoProvenance
</span><span class="hs-identifier hs-var">PluginProv</span></span><span> </span><span class="annot"><span class="annottext">CommandLineOption
</span><span class="hs-string">&quot;ghc-typelits-extra&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier hs-var">Representational</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229597"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679229596"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-346"></span><span>          </span><span id="local-6989586621679229600"><span class="annot"><span class="annottext">dcApp :: EvExpr
</span><a href="#local-6989586621679229600"><span class="hs-identifier hs-var hs-var">dcApp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; EvExpr
</span><span class="hs-identifier hs-var">evId</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyVar
</span><span class="hs-identifier hs-var">dataConWrapId</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; DataCon
</span><span class="hs-identifier hs-var">cTupleDataCon</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; Maybe EvTerm
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvExpr -&gt; Coercion -&gt; EvTerm
</span><span class="hs-identifier hs-var">evCast</span></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621679229600"><span class="hs-identifier hs-var">dcApp</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621679229598"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe EvTerm
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-349"></span></pre></body></html>