<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="annot"><span class="hs-comment">{- | This module contains common datatypes and functions specific to the protovoice grammar.
 In a protovoice derivations, slices are multisets of notes
 while transitions contain connections between these notes.

 Code that is specific to parsing can be found in &quot;PVGrammar.Parse&quot;,
 while generative code is located in &quot;PVGrammar.Generate&quot;.
-}</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="PVGrammar.html"><span class="hs-identifier">PVGrammar</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Inner Structure Types</span></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Note: a pitch with an ID.</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier">Note</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Slices: Notes</span></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier">Notes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#innerNotes"><span class="hs-identifier">innerNotes</span></a></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Transitions: Sets of Obligatory Edges</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Transitions contain two kinds of edges, regular edges and passing edges.</span></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier">Edges</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#topEdges"><span class="hs-identifier">topEdges</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier">Edge</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier">InnerEdge</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Generative Operations</span></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Freeze</span></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier">Freeze</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Split</span></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier">Split</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#DoubleOrnament"><span class="hs-identifier">DoubleOrnament</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#isRepetitionOnLeft"><span class="hs-identifier">isRepetitionOnLeft</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#isRepetitionOnRight"><span class="hs-identifier">isRepetitionOnRight</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#PassingOrnament"><span class="hs-identifier">PassingOrnament</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#LeftOrnament"><span class="hs-identifier">LeftOrnament</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#RightOrnament"><span class="hs-identifier">RightOrnament</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Spread</span></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier">Spread</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-comment">-- , SpreadDirection (..)</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier">SpreadChildren</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#leftSpreadChild"><span class="hs-identifier">leftSpreadChild</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#rightSpreadChild"><span class="hs-identifier">rightSpreadChild</span></a></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Derivations</span></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#PVLeftmost"><span class="hs-identifier">PVLeftmost</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier">PVAnalysis</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#analysisTraversePitch"><span class="hs-identifier">analysisTraversePitch</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#analysisMapPitch"><span class="hs-identifier">analysisMapPitch</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Loading Files</span></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#loadAnalysis"><span class="hs-identifier">loadAnalysis</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#loadAnalysis%27"><span class="hs-identifier">loadAnalysis'</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#slicesFromFile"><span class="hs-identifier">slicesFromFile</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#slicesToPath"><span class="hs-identifier">slicesToPath</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#loadSurface"><span class="hs-identifier">loadSurface</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#loadSurface%27"><span class="hs-identifier">loadSurface'</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Common.html"><span class="hs-identifier">Common</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Musicology.Pitch</span></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Interval</span></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Notation</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Pitch</span></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SInterval</span></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SPC</span></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SPitch</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pc</span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">runIdentity</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.:)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toList</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HM</span></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hashable</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.Extra</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IsString</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.IO</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TL</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">for</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Internal.MultiSet.html"><span class="hs-identifier">Internal.MultiSet</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MS</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Musicology.Core</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Music</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Musicology.Core.Slicing</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Music</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Musicology.MusicXML</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MusicXML</span></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><span class="hs-comment">-- * Inner Structure Types</span></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="annot"><span class="hs-comment">-- ** Note type: pitch + ID</span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="annot"><span class="hs-comment">-- | A note with a pitch and an ID.</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">data</span><span> </span><span id="Note"><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-var">Note</span></a></span></span><span> </span><span id="local-6989586621679465230"><span class="annot"><a href="#local-6989586621679465230"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Note"><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-var">Note</span></a></span></span><span> </span><span class="hs-special">{</span><span id="notePitch"><span class="annot"><span class="annottext">forall n. Note n -&gt; n
</span><a href="PVGrammar.html#notePitch"><span class="hs-identifier hs-var hs-var">notePitch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679465230"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span id="noteId"><span class="annot"><span class="annottext">forall n. Note n -&gt; String
</span><a href="PVGrammar.html#noteId"><span class="hs-identifier hs-var hs-var">noteId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">}</span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679466093"><span id="local-6989586621679466099"><span class="annot"><span class="annottext">Note n -&gt; Note n -&gt; Bool
(Note n -&gt; Note n -&gt; Bool)
-&gt; (Note n -&gt; Note n -&gt; Bool) -&gt; Eq (Note n)
forall n. Eq n =&gt; Note n -&gt; Note n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; Note n -&gt; Note n -&gt; Bool
== :: Note n -&gt; Note n -&gt; Bool
$c/= :: forall n. Eq n =&gt; Note n -&gt; Note n -&gt; Bool
/= :: Note n -&gt; Note n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466109"><span id="local-6989586621679466115"><span id="local-6989586621679466120"><span id="local-6989586621679466124"><span id="local-6989586621679466127"><span id="local-6989586621679466130"><span id="local-6989586621679466133"><span class="annot"><span class="annottext">Eq (Note n)
Eq (Note n) =&gt;
(Note n -&gt; Note n -&gt; Ordering)
-&gt; (Note n -&gt; Note n -&gt; Bool)
-&gt; (Note n -&gt; Note n -&gt; Bool)
-&gt; (Note n -&gt; Note n -&gt; Bool)
-&gt; (Note n -&gt; Note n -&gt; Bool)
-&gt; (Note n -&gt; Note n -&gt; Note n)
-&gt; (Note n -&gt; Note n -&gt; Note n)
-&gt; Ord (Note n)
Note n -&gt; Note n -&gt; Bool
Note n -&gt; Note n -&gt; Ordering
Note n -&gt; Note n -&gt; Note n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (Note n)
forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Bool
forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Ordering
forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Note n
$ccompare :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Ordering
compare :: Note n -&gt; Note n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Bool
&lt; :: Note n -&gt; Note n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Bool
&lt;= :: Note n -&gt; Note n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Bool
&gt; :: Note n -&gt; Note n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Bool
&gt;= :: Note n -&gt; Note n -&gt; Bool
$cmax :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Note n
max :: Note n -&gt; Note n -&gt; Note n
$cmin :: forall n. Ord n =&gt; Note n -&gt; Note n -&gt; Note n
min :: Note n -&gt; Note n -&gt; Note n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466143"><span id="local-6989586621679466145"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Note a -&gt; Note b)
-&gt; (forall a b. a -&gt; Note b -&gt; Note a) -&gt; Functor Note
forall a b. a -&gt; Note b -&gt; Note a
forall a b. (a -&gt; b) -&gt; Note a -&gt; Note b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; Note a -&gt; Note b
fmap :: forall a b. (a -&gt; b) -&gt; Note a -&gt; Note b
$c&lt;$ :: forall a b. a -&gt; Note b -&gt; Note a
&lt;$ :: forall a b. a -&gt; Note b -&gt; Note a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466150"><span id="local-6989586621679466156"><span id="local-6989586621679466159"><span id="local-6989586621679466164"><span id="local-6989586621679466166"><span id="local-6989586621679466169"><span id="local-6989586621679466172"><span id="local-6989586621679466175"><span id="local-6989586621679466178"><span id="local-6989586621679466181"><span id="local-6989586621679466184"><span id="local-6989586621679466186"><span id="local-6989586621679466189"><span id="local-6989586621679466194"><span id="local-6989586621679466199"><span id="local-6989586621679466204"><span id="local-6989586621679466209"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; Note m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a)
-&gt; (forall a. Note a -&gt; [a])
-&gt; (forall a. Note a -&gt; Bool)
-&gt; (forall a. Note a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; Note a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; Note a -&gt; a)
-&gt; (forall a. Ord a =&gt; Note a -&gt; a)
-&gt; (forall a. Num a =&gt; Note a -&gt; a)
-&gt; (forall a. Num a =&gt; Note a -&gt; a)
-&gt; Foldable Note
forall a. Eq a =&gt; a -&gt; Note a -&gt; Bool
forall a. Num a =&gt; Note a -&gt; a
forall a. Ord a =&gt; Note a -&gt; a
forall m. Monoid m =&gt; Note m -&gt; m
forall a. Note a -&gt; Bool
forall a. Note a -&gt; Int
forall a. Note a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; Note m -&gt; m
fold :: forall m. Monoid m =&gt; Note m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Note a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Note a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Note a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Note a -&gt; a
$ctoList :: forall a. Note a -&gt; [a]
toList :: forall a. Note a -&gt; [a]
$cnull :: forall a. Note a -&gt; Bool
null :: forall a. Note a -&gt; Bool
$clength :: forall a. Note a -&gt; Int
length :: forall a. Note a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; Note a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; Note a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; Note a -&gt; a
maximum :: forall a. Ord a =&gt; Note a -&gt; a
$cminimum :: forall a. Ord a =&gt; Note a -&gt; a
minimum :: forall a. Ord a =&gt; Note a -&gt; a
$csum :: forall a. Num a =&gt; Note a -&gt; a
sum :: forall a. Num a =&gt; Note a -&gt; a
$cproduct :: forall a. Num a =&gt; Note a -&gt; a
product :: forall a. Num a =&gt; Note a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466222"><span id="local-6989586621679466227"><span id="local-6989586621679466233"><span id="local-6989586621679466238"><span class="annot"><span class="annottext">Functor Note
Foldable Note
(Functor Note, Foldable Note) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; Note a -&gt; f (Note b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    Note (f a) -&gt; f (Note a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; Note a -&gt; m (Note b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; Note (m a) -&gt; m (Note a))
-&gt; Traversable Note
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; Note (m a) -&gt; m (Note a)
forall (f :: * -&gt; *) a. Applicative f =&gt; Note (f a) -&gt; f (Note a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Note a -&gt; m (Note b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
$csequenceA :: forall (f :: * -&gt; *) a. Applicative f =&gt; Note (f a) -&gt; f (Note a)
sequenceA :: forall (f :: * -&gt; *) a. Applicative f =&gt; Note (f a) -&gt; f (Note a)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Note a -&gt; m (Note b)
mapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Note a -&gt; m (Note b)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; Note (m a) -&gt; m (Note a)
sequence :: forall (m :: * -&gt; *) a. Monad m =&gt; Note (m a) -&gt; m (Note a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466246"><span id="local-6989586621679466248"><span class="annot"><span class="annottext">(forall x. Note n -&gt; Rep (Note n) x)
-&gt; (forall x. Rep (Note n) x -&gt; Note n) -&gt; Generic (Note n)
forall x. Rep (Note n) x -&gt; Note n
forall x. Note n -&gt; Rep (Note n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (Note n) x -&gt; Note n
forall n x. Note n -&gt; Rep (Note n) x
$cfrom :: forall n x. Note n -&gt; Rep (Note n) x
from :: forall x. Note n -&gt; Rep (Note n) x
$cto :: forall n x. Rep (Note n) x -&gt; Note n
to :: forall x. Rep (Note n) x -&gt; Note n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679466255"><span class="annot"><span class="annottext">Note n -&gt; ()
(Note n -&gt; ()) -&gt; NFData (Note n)
forall n. NFData n =&gt; Note n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; Note n -&gt; ()
rnf :: Note n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466280"><span id="local-6989586621679466287"><span class="annot"><span class="annottext">Eq (Note n)
Eq (Note n) =&gt;
(Int -&gt; Note n -&gt; Int) -&gt; (Note n -&gt; Int) -&gt; Hashable (Note n)
Int -&gt; Note n -&gt; Int
Note n -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall n. Hashable n =&gt; Eq (Note n)
forall n. Hashable n =&gt; Int -&gt; Note n -&gt; Int
forall n. Hashable n =&gt; Note n -&gt; Int
$chashWithSalt :: forall n. Hashable n =&gt; Int -&gt; Note n -&gt; Int
hashWithSalt :: Int -&gt; Note n -&gt; Int
$chash :: forall n. Hashable n =&gt; Note n -&gt; Int
hash :: Note n -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465328"><span id="local-6989586621679466306"><span id="local-6989586621679466311"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465328"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465328"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-112"></span><span>  </span><span id="local-6989586621679466321"><span class="annot"><span class="annottext">show :: Note n -&gt; String
</span><a href="#local-6989586621679466321"><span class="hs-identifier hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span id="local-6989586621679466323"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466323"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679466324"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466324"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">n -&gt; String
forall i. Notation i =&gt; i -&gt; String
</span><span class="hs-identifier hs-var">showNotation</span></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466323"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466324"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465338"><span id="local-6989586621679466329"><span id="local-6989586621679466333"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465338"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465338"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>  </span><span id="local-6989586621679466357"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Note n)
</span><a href="#local-6989586621679466357"><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser (Note n)) -&gt; Value -&gt; Parser (Note n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Note&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Note n)) -&gt; Value -&gt; Parser (Note n))
-&gt; (Object -&gt; Parser (Note n)) -&gt; Value -&gt; Parser (Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679466360"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679466360"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-116"></span><span>    </span><span id="local-6989586621679466361"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466361"><span class="hs-identifier hs-var">pitch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679466360"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser String
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;pitch&quot;</span></span><span>
</span><span id="line-117"></span><span>    </span><span id="local-6989586621679466362"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466362"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679466360"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser String
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe n
forall i. Notation i =&gt; String -&gt; Maybe i
</span><span class="hs-identifier hs-var">readNotation</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466361"><span class="hs-identifier hs-var">pitch</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-119"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679466364"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466364"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Parser (Note n)
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; Parser (Note n)) -&gt; Note n -&gt; Parser (Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; String -&gt; Note n
forall n. n -&gt; String -&gt; Note n
</span><a href="PVGrammar.html#Note"><span class="hs-identifier hs-var">Note</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466364"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466362"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><span class="annottext">Maybe n
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser (Note n)
forall a. String -&gt; Parser a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser (Note n)) -&gt; String -&gt; Parser (Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not parse pitch &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466361"><span class="hs-identifier hs-var">pitch</span></a></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465357"><span id="local-6989586621679466369"><span id="local-6989586621679466373"><span id="local-6989586621679466376"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465357"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465357"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621679466392"><span class="annot"><span class="annottext">toJSON :: Note n -&gt; Value
</span><a href="#local-6989586621679466392"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span id="local-6989586621679466394"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466394"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679466395"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466395"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;pitch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; String
forall i. Notation i =&gt; i -&gt; String
</span><span class="hs-identifier hs-var">showNotation</span></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466394"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466395"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621679466408"><span class="annot"><span class="annottext">toEncoding :: Note n -&gt; Encoding
</span><a href="#local-6989586621679466408"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span id="local-6989586621679466410"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466410"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679466411"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466411"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">Aeson.pairs</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;pitch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Series
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Series
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; String
forall i. Notation i =&gt; i -&gt; String
</span><span class="hs-identifier hs-var">showNotation</span></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466410"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Series -&gt; Series -&gt; Series
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Series
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Series
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466411"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="annot"><span class="hs-comment">{- | Lets you write a Note as a string literal with OverloadedStrings.
Pitch and ID are separate by a @.@ (the ID may contain more @.@s).
-}</span></span><span>
</span><span id="line-129"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465368"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465368"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465368"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621679466432"><span class="annot"><span class="annottext">fromString :: String -&gt; Note n
</span><span class="hs-identifier hs-var hs-var hs-var">fromString</span></span></span><span> </span><span id="local-6989586621679466433"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466433"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Maybe (Note n) -&gt; Note n
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Note n
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Note n) -&gt; String -&gt; Note n
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cannot parse note literal &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466433"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Note n) -&gt; Note n) -&gt; Maybe (Note n) -&gt; Note n
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679466435"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466435"><span class="hs-identifier hs-var">pstr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466436"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679466436"><span class="hs-identifier hs-var">idParts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Maybe (String, [String])
forall a. [a] -&gt; Maybe (a, [a])
</span><span class="hs-identifier hs-var">L.uncons</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; Maybe (String, [String]))
-&gt; [String] -&gt; Maybe (String, [String])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; [String]
forall a. (HasCallStack, Eq a) =&gt; [a] -&gt; [a] -&gt; [[a]]
</span><span class="hs-identifier hs-var">L.splitOn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466433"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span id="local-6989586621679466439"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466439"><span class="hs-identifier hs-var">pitch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe n
forall i. Notation i =&gt; String -&gt; Maybe i
</span><span class="hs-identifier hs-var">readNotation</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679466435"><span class="hs-identifier hs-var">pstr</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">n -&gt; String -&gt; Note n
forall n. n -&gt; String -&gt; Note n
</span><a href="PVGrammar.html#Note"><span class="hs-identifier hs-var">Note</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679466439"><span class="hs-identifier hs-var">pitch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679466436"><span class="hs-identifier hs-var">idParts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="annot"><span class="hs-comment">-- ** Slice Type: Sets of Notes</span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- Slices contain a set of notes.</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">{- | The content type of slices in the protovoice model.
  Contains a set of notes (pitch x id), representing the notes in a slice.
-}</span></span><span>
</span><span id="line-142"></span><span class="hs-keyword">newtype</span><span> </span><span id="Notes"><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-var">Notes</span></a></span></span><span> </span><span id="local-6989586621679465492"><span class="annot"><a href="#local-6989586621679465492"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Notes"><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-var">Notes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465492"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679466444"><span id="local-6989586621679466450"><span class="annot"><span class="annottext">Notes n -&gt; Notes n -&gt; Bool
(Notes n -&gt; Notes n -&gt; Bool)
-&gt; (Notes n -&gt; Notes n -&gt; Bool) -&gt; Eq (Notes n)
forall n. Eq n =&gt; Notes n -&gt; Notes n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; Notes n -&gt; Notes n -&gt; Bool
== :: Notes n -&gt; Notes n -&gt; Bool
$c/= :: forall n. Eq n =&gt; Notes n -&gt; Notes n -&gt; Bool
/= :: Notes n -&gt; Notes n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466461"><span id="local-6989586621679466467"><span id="local-6989586621679466472"><span id="local-6989586621679466477"><span id="local-6989586621679466482"><span id="local-6989586621679466487"><span id="local-6989586621679466492"><span class="annot"><span class="annottext">Eq (Notes n)
Eq (Notes n) =&gt;
(Notes n -&gt; Notes n -&gt; Ordering)
-&gt; (Notes n -&gt; Notes n -&gt; Bool)
-&gt; (Notes n -&gt; Notes n -&gt; Bool)
-&gt; (Notes n -&gt; Notes n -&gt; Bool)
-&gt; (Notes n -&gt; Notes n -&gt; Bool)
-&gt; (Notes n -&gt; Notes n -&gt; Notes n)
-&gt; (Notes n -&gt; Notes n -&gt; Notes n)
-&gt; Ord (Notes n)
Notes n -&gt; Notes n -&gt; Bool
Notes n -&gt; Notes n -&gt; Ordering
Notes n -&gt; Notes n -&gt; Notes n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (Notes n)
forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Bool
forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Ordering
forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Notes n
$ccompare :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Ordering
compare :: Notes n -&gt; Notes n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Bool
&lt; :: Notes n -&gt; Notes n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Bool
&lt;= :: Notes n -&gt; Notes n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Bool
&gt; :: Notes n -&gt; Notes n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Bool
&gt;= :: Notes n -&gt; Notes n -&gt; Bool
$cmax :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Notes n
max :: Notes n -&gt; Notes n -&gt; Notes n
$cmin :: forall n. Ord n =&gt; Notes n -&gt; Notes n -&gt; Notes n
min :: Notes n -&gt; Notes n -&gt; Notes n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466500"><span id="local-6989586621679466502"><span class="annot"><span class="annottext">(forall x. Notes n -&gt; Rep (Notes n) x)
-&gt; (forall x. Rep (Notes n) x -&gt; Notes n) -&gt; Generic (Notes n)
forall x. Rep (Notes n) x -&gt; Notes n
forall x. Notes n -&gt; Rep (Notes n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (Notes n) x -&gt; Notes n
forall n x. Notes n -&gt; Rep (Notes n) x
$cfrom :: forall n x. Notes n -&gt; Rep (Notes n) x
from :: forall x. Notes n -&gt; Rep (Notes n) x
$cto :: forall n x. Rep (Notes n) x -&gt; Notes n
to :: forall x. Rep (Notes n) x -&gt; Notes n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679466506"><span class="annot"><span class="annottext">Notes n -&gt; ()
(Notes n -&gt; ()) -&gt; NFData (Notes n)
forall n. NFData n =&gt; Notes n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; Notes n -&gt; ()
rnf :: Notes n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466523"><span id="local-6989586621679466530"><span class="annot"><span class="annottext">Eq (Notes n)
Eq (Notes n) =&gt;
(Int -&gt; Notes n -&gt; Int) -&gt; (Notes n -&gt; Int) -&gt; Hashable (Notes n)
Int -&gt; Notes n -&gt; Int
Notes n -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall n. Hashable n =&gt; Eq (Notes n)
forall n. Hashable n =&gt; Int -&gt; Notes n -&gt; Int
forall n. Hashable n =&gt; Notes n -&gt; Int
$chashWithSalt :: forall n. Hashable n =&gt; Int -&gt; Notes n -&gt; Int
hashWithSalt :: Int -&gt; Notes n -&gt; Int
$chash :: forall n. Hashable n =&gt; Notes n -&gt; Int
hash :: Notes n -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466540"><span id="local-6989586621679466547"><span id="local-6989586621679466550"><span id="local-6989586621679466553"><span id="local-6989586621679466556"><span class="annot"><span class="annottext">[Notes n] -&gt; Value
[Notes n] -&gt; Encoding
Notes n -&gt; Bool
Notes n -&gt; Value
Notes n -&gt; Encoding
(Notes n -&gt; Value)
-&gt; (Notes n -&gt; Encoding)
-&gt; ([Notes n] -&gt; Value)
-&gt; ([Notes n] -&gt; Encoding)
-&gt; (Notes n -&gt; Bool)
-&gt; ToJSON (Notes n)
forall n. Notation n =&gt; [Notes n] -&gt; Value
forall n. Notation n =&gt; [Notes n] -&gt; Encoding
forall n. Notation n =&gt; Notes n -&gt; Bool
forall n. Notation n =&gt; Notes n -&gt; Value
forall n. Notation n =&gt; Notes n -&gt; Encoding
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: forall n. Notation n =&gt; Notes n -&gt; Value
toJSON :: Notes n -&gt; Value
$ctoEncoding :: forall n. Notation n =&gt; Notes n -&gt; Encoding
toEncoding :: Notes n -&gt; Encoding
$ctoJSONList :: forall n. Notation n =&gt; [Notes n] -&gt; Value
toJSONList :: [Notes n] -&gt; Value
$ctoEncodingList :: forall n. Notation n =&gt; [Notes n] -&gt; Encoding
toEncodingList :: [Notes n] -&gt; Encoding
$comitField :: forall n. Notation n =&gt; Notes n -&gt; Bool
omitField :: Notes n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465480"><span id="local-6989586621679466609"><span id="local-6989586621679466614"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465480"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465480"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>  </span><span id="local-6989586621679466624"><span class="annot"><span class="annottext">show :: Notes n -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span id="local-6989586621679466625"><span class="annot"><span class="annottext">HashSet (Note n)
</span><a href="#local-6989586621679466625"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">n -&gt; String
forall i. Notation i =&gt; i -&gt; String
</span><span class="hs-identifier hs-var">showNotation</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; String) -&gt; (Note n -&gt; n) -&gt; Note n -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; n
forall n. Note n -&gt; n
</span><a href="PVGrammar.html#notePitch"><span class="hs-identifier hs-var">notePitch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; String) -&gt; [Note n] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Note n) -&gt; [Note n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Note n)
</span><a href="#local-6989586621679466625"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465225"><span id="local-6989586621679466634"><span id="local-6989586621679466637"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465225"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465225"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465225"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465225"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621679466648"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Notes n)
</span><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Array -&gt; Parser (Notes n)) -&gt; Value -&gt; Parser (Notes n)
forall a. String -&gt; (Array -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withArray</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;List of Notes&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Array -&gt; Parser (Notes n)) -&gt; Value -&gt; Parser (Notes n))
-&gt; (Array -&gt; Parser (Notes n)) -&gt; Value -&gt; Parser (Notes n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679466650"><span class="annot"><span class="annottext">Array
</span><a href="#local-6989586621679466650"><span class="hs-identifier hs-var">notes</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621679466651"><span class="annot"><span class="annottext">Vector (Note n)
</span><a href="#local-6989586621679466651"><span class="hs-identifier hs-var">pitches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n)) -&gt; Array -&gt; Parser (Vector (Note n))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Vector a -&gt; m (Vector b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Array
</span><a href="#local-6989586621679466650"><span class="hs-identifier hs-var">notes</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HashSet (Note n) -&gt; Notes n
forall n. HashSet (Note n) -&gt; Notes n
</span><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-var">Notes</span></a></span><span> </span><span class="annot"><span class="annottext">(HashSet (Note n) -&gt; Notes n) -&gt; HashSet (Note n) -&gt; Notes n
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Note n] -&gt; HashSet (Note n)
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">([Note n] -&gt; HashSet (Note n)) -&gt; [Note n] -&gt; HashSet (Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vector (Note n) -&gt; [Note n]
forall a. Vector a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Vector (Note n)
</span><a href="#local-6989586621679466651"><span class="hs-identifier hs-var">pitches</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="annot"><span class="hs-comment">{- | Return the notes or start/stop symbols inside a slice.
 This is useful to get all objects that an 'Edge' can connect to.
-}</span></span><span>
</span><span id="line-158"></span><span id="local-6989586621679465494"><span class="annot"><a href="PVGrammar.html#innerNotes"><span class="hs-identifier hs-type">innerNotes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Common.html#StartStop"><span class="hs-identifier hs-type">StartStop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465494"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Common.html#StartStop"><span class="hs-identifier hs-type">StartStop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465494"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-159"></span><span id="innerNotes"><span class="annot"><span class="annottext">innerNotes :: forall n. StartStop (Notes n) -&gt; [StartStop (Note n)]
</span><a href="PVGrammar.html#innerNotes"><span class="hs-identifier hs-var hs-var">innerNotes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Inner"><span class="hs-identifier hs-type">Inner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span id="local-6989586621679466656"><span class="annot"><span class="annottext">HashSet (Note n)
</span><a href="#local-6989586621679466656"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; StartStop (Note n)
forall a. a -&gt; StartStop a
</span><a href="Common.html#Inner"><span class="hs-identifier hs-var">Inner</span></a></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; StartStop (Note n)) -&gt; [Note n] -&gt; [StartStop (Note n)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Note n) -&gt; [Note n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Note n)
</span><a href="#local-6989586621679466656"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-160"></span><span class="annot"><a href="PVGrammar.html#innerNotes"><span class="hs-identifier hs-var">innerNotes</span></a></span><span> </span><span class="annot"><span class="annottext">StartStop (Notes n)
</span><a href="Common.html#Start"><span class="hs-identifier hs-var">Start</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">StartStop (Note n)
forall a. StartStop a
</span><a href="Common.html#Start"><span class="hs-identifier hs-var">Start</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-161"></span><span class="annot"><a href="PVGrammar.html#innerNotes"><span class="hs-identifier hs-var">innerNotes</span></a></span><span> </span><span class="annot"><span class="annottext">StartStop (Notes n)
</span><a href="Common.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">StartStop (Note n)
forall a. StartStop a
</span><a href="Common.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- TODO: could this be improved to forbid start/stop symbols on the wrong side?</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><span class="hs-comment">-- | A proto-voice edge between two nodes (i.e. notes or start/stop symbols).</span></span><span>
</span><span id="line-166"></span><span class="hs-keyword">type</span><span> </span><span id="Edge"><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-var">Edge</span></a></span></span><span> </span><span id="local-6989586621679466659"><span class="annot"><a href="#local-6989586621679466659"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#StartStop"><span class="hs-identifier hs-type">StartStop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679466659"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Common.html#StartStop"><span class="hs-identifier hs-type">StartStop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679466659"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><span class="hs-comment">-- | A proto-voice edge between two notes (excluding start/stop symbols).</span></span><span>
</span><span id="line-169"></span><span class="hs-keyword">type</span><span> </span><span id="InnerEdge"><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-var">InnerEdge</span></a></span></span><span> </span><span id="local-6989586621679466660"><span class="annot"><a href="#local-6989586621679466660"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679466660"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679466660"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="annot"><span class="hs-comment">{- | The content type of transitions in the protovoice model.
 Contains a multiset of regular edges and a multiset of passing edges.
 The represented edges are those that are definitely used later on.
 Edges that are not used are dropped before creating a child transition.
 A transition that contains passing edges cannot be frozen.
-}</span></span><span>
</span><span id="line-177"></span><span class="hs-keyword">data</span><span> </span><span id="Edges"><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span></span><span> </span><span id="local-6989586621679465498"><span class="annot"><a href="#local-6989586621679465498"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Edges"><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="edgesReg"><span class="annot"><span class="annottext">forall n. Edges n -&gt; HashSet (Edge n)
</span><a href="PVGrammar.html#edgesReg"><span class="hs-identifier hs-var hs-var">edgesReg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465498"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ regular edges</span></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="edgesPass"><span class="annot"><span class="annottext">forall n. Edges n -&gt; MultiSet (InnerEdge n)
</span><a href="PVGrammar.html#edgesPass"><span class="hs-identifier hs-var hs-var">edgesPass</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Internal.MultiSet.html#MultiSet"><span class="hs-identifier hs-type">MS.MultiSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465498"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ passing edges</span></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679466666"><span id="local-6989586621679466673"><span class="annot"><span class="annottext">Edges n -&gt; Edges n -&gt; Bool
(Edges n -&gt; Edges n -&gt; Bool)
-&gt; (Edges n -&gt; Edges n -&gt; Bool) -&gt; Eq (Edges n)
forall n. Eq n =&gt; Edges n -&gt; Edges n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; Edges n -&gt; Edges n -&gt; Bool
== :: Edges n -&gt; Edges n -&gt; Bool
$c/= :: forall n. Eq n =&gt; Edges n -&gt; Edges n -&gt; Bool
/= :: Edges n -&gt; Edges n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466686"><span id="local-6989586621679466693"><span id="local-6989586621679466699"><span id="local-6989586621679466703"><span id="local-6989586621679466706"><span id="local-6989586621679466709"><span id="local-6989586621679466712"><span class="annot"><span class="annottext">Eq (Edges n)
Eq (Edges n) =&gt;
(Edges n -&gt; Edges n -&gt; Ordering)
-&gt; (Edges n -&gt; Edges n -&gt; Bool)
-&gt; (Edges n -&gt; Edges n -&gt; Bool)
-&gt; (Edges n -&gt; Edges n -&gt; Bool)
-&gt; (Edges n -&gt; Edges n -&gt; Bool)
-&gt; (Edges n -&gt; Edges n -&gt; Edges n)
-&gt; (Edges n -&gt; Edges n -&gt; Edges n)
-&gt; Ord (Edges n)
Edges n -&gt; Edges n -&gt; Bool
Edges n -&gt; Edges n -&gt; Ordering
Edges n -&gt; Edges n -&gt; Edges n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (Edges n)
forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Bool
forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Ordering
forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Edges n
$ccompare :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Ordering
compare :: Edges n -&gt; Edges n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Bool
&lt; :: Edges n -&gt; Edges n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Bool
&lt;= :: Edges n -&gt; Edges n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Bool
&gt; :: Edges n -&gt; Edges n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Bool
&gt;= :: Edges n -&gt; Edges n -&gt; Bool
$cmax :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Edges n
max :: Edges n -&gt; Edges n -&gt; Edges n
$cmin :: forall n. Ord n =&gt; Edges n -&gt; Edges n -&gt; Edges n
min :: Edges n -&gt; Edges n -&gt; Edges n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466723"><span id="local-6989586621679466725"><span class="annot"><span class="annottext">(forall x. Edges n -&gt; Rep (Edges n) x)
-&gt; (forall x. Rep (Edges n) x -&gt; Edges n) -&gt; Generic (Edges n)
forall x. Rep (Edges n) x -&gt; Edges n
forall x. Edges n -&gt; Rep (Edges n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (Edges n) x -&gt; Edges n
forall n x. Edges n -&gt; Rep (Edges n) x
$cfrom :: forall n x. Edges n -&gt; Rep (Edges n) x
from :: forall x. Edges n -&gt; Rep (Edges n) x
$cto :: forall n x. Rep (Edges n) x -&gt; Edges n
to :: forall x. Rep (Edges n) x -&gt; Edges n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466729"><span class="annot"><span class="annottext">Edges n -&gt; ()
(Edges n -&gt; ()) -&gt; NFData (Edges n)
forall n. NFData n =&gt; Edges n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; Edges n -&gt; ()
rnf :: Edges n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466756"><span id="local-6989586621679466763"><span class="annot"><span class="annottext">Eq (Edges n)
Eq (Edges n) =&gt;
(Int -&gt; Edges n -&gt; Int) -&gt; (Edges n -&gt; Int) -&gt; Hashable (Edges n)
Int -&gt; Edges n -&gt; Int
Edges n -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall n. Hashable n =&gt; Eq (Edges n)
forall n. Hashable n =&gt; Int -&gt; Edges n -&gt; Int
forall n. Hashable n =&gt; Edges n -&gt; Int
$chashWithSalt :: forall n. Hashable n =&gt; Int -&gt; Edges n -&gt; Int
hashWithSalt :: Int -&gt; Edges n -&gt; Int
$chash :: forall n. Hashable n =&gt; Edges n -&gt; Int
hash :: Edges n -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465533"><span id="local-6989586621679466785"><span id="local-6989586621679466789"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465533"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465533"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465533"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span id="local-6989586621679466808"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466808"><span class="hs-identifier hs-var">aT</span></a></span></span><span> </span><span id="local-6989586621679466809"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466809"><span class="hs-identifier hs-var">aPass</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679466810"><span class="annot"><span class="annottext">&lt;&gt; :: Edges n -&gt; Edges n -&gt; Edges n
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span id="local-6989586621679466811"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466811"><span class="hs-identifier hs-var">bT</span></a></span></span><span> </span><span id="local-6989586621679466812"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466812"><span class="hs-identifier hs-var">bPass</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
forall n. HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
</span><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466808"><span class="hs-identifier hs-var">aT</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; HashSet (Edge n) -&gt; HashSet (Edge n)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466811"><span class="hs-identifier hs-var">bT</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466809"><span class="hs-identifier hs-var">aPass</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n) -&gt; MultiSet (InnerEdge n)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466812"><span class="hs-identifier hs-var">bPass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465538"><span id="local-6989586621679466819"><span id="local-6989586621679466823"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465538"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465538"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465538"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>  </span><span id="local-6989586621679466836"><span class="annot"><span class="annottext">mempty :: Edges n
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
forall n. HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
</span><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
forall a. MultiSet a
</span><a href="Internal.MultiSet.html#empty"><span class="hs-identifier hs-var">MS.empty</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465542"><span id="local-6989586621679466840"><span id="local-6989586621679466845"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465542"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465542"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621679466854"><span class="annot"><span class="annottext">show :: Edges n -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span id="local-6989586621679466855"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466855"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679466856"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466856"><span class="hs-identifier hs-var">pass</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679466857"><span class="hs-identifier hs-var">tReg</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679466858"><span class="hs-identifier hs-var">tPass</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-193"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>    </span><span id="local-6989586621679466857"><span class="annot"><span class="annottext">tReg :: [String]
</span><a href="#local-6989586621679466857"><span class="hs-identifier hs-var hs-var">tReg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679466865"><span class="hs-identifier hs-var">showReg</span></a></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; String) -&gt; [Edge n] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466855"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span id="local-6989586621679466858"><span class="annot"><span class="annottext">tPass :: [String]
</span><a href="#local-6989586621679466858"><span class="hs-identifier hs-var hs-var">tPass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InnerEdge n, Int) -&gt; String
forall {a} {a} {a}.
(Show a, Show a, Show a) =&gt;
((a, a), a) -&gt; String
</span><a href="#local-6989586621679466872"><span class="hs-identifier hs-var">showPass</span></a></span><span> </span><span class="annot"><span class="annottext">((InnerEdge n, Int) -&gt; String) -&gt; [(InnerEdge n, Int)] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [(InnerEdge n, Int)]
forall k. MultiSet k -&gt; [(k, Int)]
</span><a href="Internal.MultiSet.html#toOccurList"><span class="hs-identifier hs-var">MS.toOccurList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466856"><span class="hs-identifier hs-var">pass</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621679466865"><span class="annot"><span class="annottext">showReg :: (a, a) -&gt; String
</span><a href="#local-6989586621679466865"><span class="hs-identifier hs-var hs-var">showReg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679466882"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466882"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466883"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466883"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466882"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466883"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679466872"><span class="annot"><span class="annottext">showPass :: ((a, a), a) -&gt; String
</span><a href="#local-6989586621679466872"><span class="hs-identifier hs-var hs-var">showPass</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679466897"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466897"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466898"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466898"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679466899"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466899"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466897"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466898"><span class="hs-identifier hs-var">p2</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#215;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679466899"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465226"><span id="local-6989586621679466905"><span id="local-6989586621679466908"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465226"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465226"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465226"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465226"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>  </span><span id="local-6989586621679466938"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Edges n)
</span><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser (Edges n)) -&gt; Value -&gt; Parser (Edges n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Edges&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Edges n)) -&gt; Value -&gt; Parser (Edges n))
-&gt; (Object -&gt; Parser (Edges n)) -&gt; Value -&gt; Parser (Edges n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679466939"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679466939"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621679466940"><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679466940"><span class="hs-identifier hs-var">regular</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679466939"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;regular&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value] -&gt; ([Value] -&gt; Parser [Edge n]) -&gt; Parser [Edge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Edge n)) -&gt; [Value] -&gt; Parser [Edge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Edge n)
forall n.
Notation n =&gt;
Value -&gt; Parser (StartStop (Note n), StartStop (Note n))
</span><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-var">parseEdge</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span id="local-6989586621679466942"><span class="annot"><span class="annottext">[InnerEdge n]
</span><a href="#local-6989586621679466942"><span class="hs-identifier hs-var">passing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679466939"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [InnerEdge n]) -&gt; Parser [InnerEdge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (InnerEdge n)) -&gt; [Value] -&gt; Parser [InnerEdge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (InnerEdge n)
forall n. Notation n =&gt; Value -&gt; Parser (Note n, Note n)
</span><a href="PVGrammar.html#parseInnerEdge"><span class="hs-identifier hs-var">parseInnerEdge</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-205"></span><span>      </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
forall n. HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
</span><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Edge n] -&gt; HashSet (Edge n)
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679466940"><span class="hs-identifier hs-var">regular</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465226"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InnerEdge n] -&gt; MultiSet (InnerEdge n)
forall (t :: * -&gt; *) a.
(Foldable t, Eq a, Hashable a) =&gt;
t a -&gt; MultiSet a
</span><a href="Internal.MultiSet.html#fromList"><span class="hs-identifier hs-var">MS.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InnerEdge n]
</span><a href="#local-6989586621679466942"><span class="hs-identifier hs-var">passing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465226"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465556"><span id="local-6989586621679466949"><span id="local-6989586621679466953"><span id="local-6989586621679466956"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465556"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465556"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621679466974"><span class="annot"><span class="annottext">toJSON :: Edges n -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span id="local-6989586621679466975"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466975"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679466976"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466976"><span class="hs-identifier hs-var">pass</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-212"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;regular&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; Value) -&gt; [Edge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466975"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; Value) -&gt; [InnerEdge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [InnerEdge n]
forall a. MultiSet a -&gt; [a]
</span><a href="Internal.MultiSet.html#toList"><span class="hs-identifier hs-var">MS.toList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466976"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621679466992"><span class="annot"><span class="annottext">toEncoding :: Edges n -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span id="local-6989586621679466993"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466993"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679466994"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466994"><span class="hs-identifier hs-var">pass</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">Aeson.pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding) -&gt; Series -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;regular&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Series
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Series
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; Value) -&gt; [Edge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679466993"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><span class="annottext">Series -&gt; Series -&gt; Series
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Series
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Series
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; Value) -&gt; [InnerEdge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [InnerEdge n]
forall a. MultiSet a -&gt; [a]
</span><a href="Internal.MultiSet.html#toList"><span class="hs-identifier hs-var">MS.toList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679466994"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="annot"><span class="hs-comment">-- | The starting transition of a derivation (@&#8906;&#8212;&#8212;&#8905;@).</span></span><span>
</span><span id="line-221"></span><span id="local-6989586621679465560"><span class="annot"><a href="PVGrammar.html#topEdges"><span class="hs-identifier hs-type">topEdges</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465560"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465560"><span class="hs-identifier hs-type">n</span></a></span></span><span>
</span><span id="line-222"></span><span id="topEdges"><span class="annot"><span class="annottext">topEdges :: forall n. Hashable n =&gt; Edges n
</span><a href="PVGrammar.html#topEdges"><span class="hs-identifier hs-var hs-var">topEdges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
forall n. HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
</span><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Edge n -&gt; HashSet (Edge n)
forall a. Hashable a =&gt; a -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StartStop (Note n)
forall a. StartStop a
</span><a href="Common.html#Start"><span class="hs-identifier hs-var">Start</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StartStop (Note n)
forall a. StartStop a
</span><a href="Common.html#Stop"><span class="hs-identifier hs-var">Stop</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
forall a. MultiSet a
</span><a href="Internal.MultiSet.html#empty"><span class="hs-identifier hs-var">MS.empty</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><span class="hs-comment">-- * Derivation Operations</span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="annot"><span class="hs-comment">-- | Two-sided ornament types (two parents).</span></span><span>
</span><span id="line-227"></span><span class="hs-keyword">data</span><span> </span><span id="DoubleOrnament"><span class="annot"><a href="PVGrammar.html#DoubleOrnament"><span class="hs-identifier hs-var">DoubleOrnament</span></a></span></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | a full neighbor note</span></span><span>
</span><span id="line-229"></span><span>    </span><span id="FullNeighbor"><span class="annot"><a href="PVGrammar.html#FullNeighbor"><span class="hs-identifier hs-var">FullNeighbor</span></a></span></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a repetition of both parents (which have the same pitch)</span></span><span>
</span><span id="line-231"></span><span>    </span><span id="FullRepeat"><span class="annot"><a href="PVGrammar.html#FullRepeat"><span class="hs-identifier hs-var">FullRepeat</span></a></span></span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a repetition of the right parent</span></span><span>
</span><span id="line-233"></span><span>    </span><span id="LeftRepeatOfRight"><span class="annot"><a href="PVGrammar.html#LeftRepeatOfRight"><span class="hs-identifier hs-var">LeftRepeatOfRight</span></a></span></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a repetitions of the left parent</span></span><span>
</span><span id="line-235"></span><span>    </span><span id="RightRepeatOfLeft"><span class="annot"><a href="PVGrammar.html#RightRepeatOfLeft"><span class="hs-identifier hs-var">RightRepeatOfLeft</span></a></span></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a note inserted at the top of the piece (between &#8906; and &#8905;)</span></span><span>
</span><span id="line-237"></span><span>    </span><span id="RootNote"><span class="annot"><a href="PVGrammar.html#RootNote"><span class="hs-identifier hs-var">RootNote</span></a></span></span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679467007"><span id="local-6989586621679467012"><span class="annot"><span class="annottext">DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
(DoubleOrnament -&gt; DoubleOrnament -&gt; Bool)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; Bool) -&gt; Eq DoubleOrnament
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
== :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
$c/= :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
/= :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467018"><span id="local-6989586621679467022"><span id="local-6989586621679467026"><span id="local-6989586621679467030"><span id="local-6989586621679467033"><span id="local-6989586621679467036"><span id="local-6989586621679467039"><span class="annot"><span class="annottext">Eq DoubleOrnament
Eq DoubleOrnament =&gt;
(DoubleOrnament -&gt; DoubleOrnament -&gt; Ordering)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; Bool)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; Bool)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; Bool)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; Bool)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament)
-&gt; (DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament)
-&gt; Ord DoubleOrnament
DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
DoubleOrnament -&gt; DoubleOrnament -&gt; Ordering
DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: DoubleOrnament -&gt; DoubleOrnament -&gt; Ordering
compare :: DoubleOrnament -&gt; DoubleOrnament -&gt; Ordering
$c&lt; :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
&lt; :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
$c&lt;= :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
&lt;= :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
$c&gt; :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
&gt; :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
$c&gt;= :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
&gt;= :: DoubleOrnament -&gt; DoubleOrnament -&gt; Bool
$cmax :: DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament
max :: DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament
$cmin :: DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament
min :: DoubleOrnament -&gt; DoubleOrnament -&gt; DoubleOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467042"><span id="local-6989586621679467044"><span id="local-6989586621679467048"><span class="annot"><span class="annottext">Int -&gt; DoubleOrnament -&gt; ShowS
[DoubleOrnament] -&gt; ShowS
DoubleOrnament -&gt; String
(Int -&gt; DoubleOrnament -&gt; ShowS)
-&gt; (DoubleOrnament -&gt; String)
-&gt; ([DoubleOrnament] -&gt; ShowS)
-&gt; Show DoubleOrnament
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DoubleOrnament -&gt; ShowS
showsPrec :: Int -&gt; DoubleOrnament -&gt; ShowS
$cshow :: DoubleOrnament -&gt; String
show :: DoubleOrnament -&gt; String
$cshowList :: [DoubleOrnament] -&gt; ShowS
showList :: [DoubleOrnament] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467052"><span id="local-6989586621679467054"><span class="annot"><span class="annottext">(forall x. DoubleOrnament -&gt; Rep DoubleOrnament x)
-&gt; (forall x. Rep DoubleOrnament x -&gt; DoubleOrnament)
-&gt; Generic DoubleOrnament
forall x. Rep DoubleOrnament x -&gt; DoubleOrnament
forall x. DoubleOrnament -&gt; Rep DoubleOrnament x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. DoubleOrnament -&gt; Rep DoubleOrnament x
from :: forall x. DoubleOrnament -&gt; Rep DoubleOrnament x
$cto :: forall x. Rep DoubleOrnament x -&gt; DoubleOrnament
to :: forall x. Rep DoubleOrnament x -&gt; DoubleOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467057"><span id="local-6989586621679467064"><span id="local-6989586621679467067"><span id="local-6989586621679467070"><span id="local-6989586621679467073"><span class="annot"><span class="annottext">[DoubleOrnament] -&gt; Value
[DoubleOrnament] -&gt; Encoding
DoubleOrnament -&gt; Bool
DoubleOrnament -&gt; Value
DoubleOrnament -&gt; Encoding
(DoubleOrnament -&gt; Value)
-&gt; (DoubleOrnament -&gt; Encoding)
-&gt; ([DoubleOrnament] -&gt; Value)
-&gt; ([DoubleOrnament] -&gt; Encoding)
-&gt; (DoubleOrnament -&gt; Bool)
-&gt; ToJSON DoubleOrnament
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: DoubleOrnament -&gt; Value
toJSON :: DoubleOrnament -&gt; Value
$ctoEncoding :: DoubleOrnament -&gt; Encoding
toEncoding :: DoubleOrnament -&gt; Encoding
$ctoJSONList :: [DoubleOrnament] -&gt; Value
toJSONList :: [DoubleOrnament] -&gt; Value
$ctoEncodingList :: [DoubleOrnament] -&gt; Encoding
toEncodingList :: [DoubleOrnament] -&gt; Encoding
$comitField :: DoubleOrnament -&gt; Bool
omitField :: DoubleOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467208"><span id="local-6989586621679467215"><span id="local-6989586621679467218"><span class="annot"><span class="annottext">Maybe DoubleOrnament
Value -&gt; Parser [DoubleOrnament]
Value -&gt; Parser DoubleOrnament
(Value -&gt; Parser DoubleOrnament)
-&gt; (Value -&gt; Parser [DoubleOrnament])
-&gt; Maybe DoubleOrnament
-&gt; FromJSON DoubleOrnament
forall a.
(Value -&gt; Parser a)
-&gt; (Value -&gt; Parser [a]) -&gt; Maybe a -&gt; FromJSON a
$cparseJSON :: Value -&gt; Parser DoubleOrnament
parseJSON :: Value -&gt; Parser DoubleOrnament
$cparseJSONList :: Value -&gt; Parser [DoubleOrnament]
parseJSONList :: Value -&gt; Parser [DoubleOrnament]
$comittedField :: Maybe DoubleOrnament
omittedField :: Maybe DoubleOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467332"><span class="annot"><span class="annottext">DoubleOrnament -&gt; ()
(DoubleOrnament -&gt; ()) -&gt; NFData DoubleOrnament
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: DoubleOrnament -&gt; ()
rnf :: DoubleOrnament -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="annot"><span class="hs-comment">-- | Types of passing notes (two parents).</span></span><span>
</span><span id="line-241"></span><span class="hs-keyword">data</span><span> </span><span id="PassingOrnament"><span class="annot"><a href="PVGrammar.html#PassingOrnament"><span class="hs-identifier hs-var">PassingOrnament</span></a></span></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | a connecting passing note (step to both parents)</span></span><span>
</span><span id="line-243"></span><span>    </span><span id="PassingMid"><span class="annot"><a href="PVGrammar.html#PassingMid"><span class="hs-identifier hs-var">PassingMid</span></a></span></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a step from the left parent</span></span><span>
</span><span id="line-245"></span><span>    </span><span id="PassingLeft"><span class="annot"><a href="PVGrammar.html#PassingLeft"><span class="hs-identifier hs-var">PassingLeft</span></a></span></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a step from the right parent</span></span><span>
</span><span id="line-247"></span><span>    </span><span id="PassingRight"><span class="annot"><a href="PVGrammar.html#PassingRight"><span class="hs-identifier hs-var">PassingRight</span></a></span></span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679467354"><span id="local-6989586621679467358"><span class="annot"><span class="annottext">PassingOrnament -&gt; PassingOrnament -&gt; Bool
(PassingOrnament -&gt; PassingOrnament -&gt; Bool)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; Bool)
-&gt; Eq PassingOrnament
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
== :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
$c/= :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
/= :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467364"><span id="local-6989586621679467368"><span id="local-6989586621679467372"><span id="local-6989586621679467376"><span id="local-6989586621679467379"><span id="local-6989586621679467382"><span id="local-6989586621679467385"><span class="annot"><span class="annottext">Eq PassingOrnament
Eq PassingOrnament =&gt;
(PassingOrnament -&gt; PassingOrnament -&gt; Ordering)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; Bool)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; Bool)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; Bool)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; Bool)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament)
-&gt; (PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament)
-&gt; Ord PassingOrnament
PassingOrnament -&gt; PassingOrnament -&gt; Bool
PassingOrnament -&gt; PassingOrnament -&gt; Ordering
PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: PassingOrnament -&gt; PassingOrnament -&gt; Ordering
compare :: PassingOrnament -&gt; PassingOrnament -&gt; Ordering
$c&lt; :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
&lt; :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
$c&lt;= :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
&lt;= :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
$c&gt; :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
&gt; :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
$c&gt;= :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
&gt;= :: PassingOrnament -&gt; PassingOrnament -&gt; Bool
$cmax :: PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament
max :: PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament
$cmin :: PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament
min :: PassingOrnament -&gt; PassingOrnament -&gt; PassingOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467388"><span id="local-6989586621679467390"><span id="local-6989586621679467394"><span class="annot"><span class="annottext">Int -&gt; PassingOrnament -&gt; ShowS
[PassingOrnament] -&gt; ShowS
PassingOrnament -&gt; String
(Int -&gt; PassingOrnament -&gt; ShowS)
-&gt; (PassingOrnament -&gt; String)
-&gt; ([PassingOrnament] -&gt; ShowS)
-&gt; Show PassingOrnament
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; PassingOrnament -&gt; ShowS
showsPrec :: Int -&gt; PassingOrnament -&gt; ShowS
$cshow :: PassingOrnament -&gt; String
show :: PassingOrnament -&gt; String
$cshowList :: [PassingOrnament] -&gt; ShowS
showList :: [PassingOrnament] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467397"><span id="local-6989586621679467399"><span class="annot"><span class="annottext">(forall x. PassingOrnament -&gt; Rep PassingOrnament x)
-&gt; (forall x. Rep PassingOrnament x -&gt; PassingOrnament)
-&gt; Generic PassingOrnament
forall x. Rep PassingOrnament x -&gt; PassingOrnament
forall x. PassingOrnament -&gt; Rep PassingOrnament x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. PassingOrnament -&gt; Rep PassingOrnament x
from :: forall x. PassingOrnament -&gt; Rep PassingOrnament x
$cto :: forall x. Rep PassingOrnament x -&gt; PassingOrnament
to :: forall x. Rep PassingOrnament x -&gt; PassingOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467402"><span id="local-6989586621679467409"><span id="local-6989586621679467412"><span id="local-6989586621679467415"><span id="local-6989586621679467418"><span class="annot"><span class="annottext">[PassingOrnament] -&gt; Value
[PassingOrnament] -&gt; Encoding
PassingOrnament -&gt; Bool
PassingOrnament -&gt; Value
PassingOrnament -&gt; Encoding
(PassingOrnament -&gt; Value)
-&gt; (PassingOrnament -&gt; Encoding)
-&gt; ([PassingOrnament] -&gt; Value)
-&gt; ([PassingOrnament] -&gt; Encoding)
-&gt; (PassingOrnament -&gt; Bool)
-&gt; ToJSON PassingOrnament
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: PassingOrnament -&gt; Value
toJSON :: PassingOrnament -&gt; Value
$ctoEncoding :: PassingOrnament -&gt; Encoding
toEncoding :: PassingOrnament -&gt; Encoding
$ctoJSONList :: [PassingOrnament] -&gt; Value
toJSONList :: [PassingOrnament] -&gt; Value
$ctoEncodingList :: [PassingOrnament] -&gt; Encoding
toEncodingList :: [PassingOrnament] -&gt; Encoding
$comitField :: PassingOrnament -&gt; Bool
omitField :: PassingOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467493"><span id="local-6989586621679467500"><span id="local-6989586621679467503"><span class="annot"><span class="annottext">Maybe PassingOrnament
Value -&gt; Parser [PassingOrnament]
Value -&gt; Parser PassingOrnament
(Value -&gt; Parser PassingOrnament)
-&gt; (Value -&gt; Parser [PassingOrnament])
-&gt; Maybe PassingOrnament
-&gt; FromJSON PassingOrnament
forall a.
(Value -&gt; Parser a)
-&gt; (Value -&gt; Parser [a]) -&gt; Maybe a -&gt; FromJSON a
$cparseJSON :: Value -&gt; Parser PassingOrnament
parseJSON :: Value -&gt; Parser PassingOrnament
$cparseJSONList :: Value -&gt; Parser [PassingOrnament]
parseJSONList :: Value -&gt; Parser [PassingOrnament]
$comittedField :: Maybe PassingOrnament
omittedField :: Maybe PassingOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467564"><span class="annot"><span class="annottext">PassingOrnament -&gt; ()
(PassingOrnament -&gt; ()) -&gt; NFData PassingOrnament
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: PassingOrnament -&gt; ()
rnf :: PassingOrnament -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="annot"><span class="hs-comment">{- | Types of single-sided ornaments left of the parent (@child-parent@)

 &gt; [ ] [p]
 &gt;     /
 &gt;   [c]
-}</span></span><span>
</span><span id="line-256"></span><span class="hs-keyword">data</span><span> </span><span id="LeftOrnament"><span class="annot"><a href="PVGrammar.html#LeftOrnament"><span class="hs-identifier hs-var">LeftOrnament</span></a></span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | an incomplete left neighbor</span></span><span>
</span><span id="line-258"></span><span>    </span><span id="LeftNeighbor"><span class="annot"><a href="PVGrammar.html#LeftNeighbor"><span class="hs-identifier hs-var">LeftNeighbor</span></a></span></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | an incomplete left repetition</span></span><span>
</span><span id="line-260"></span><span>    </span><span id="LeftRepeat"><span class="annot"><a href="PVGrammar.html#LeftRepeat"><span class="hs-identifier hs-var">LeftRepeat</span></a></span></span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679467579"><span id="local-6989586621679467583"><span class="annot"><span class="annottext">LeftOrnament -&gt; LeftOrnament -&gt; Bool
(LeftOrnament -&gt; LeftOrnament -&gt; Bool)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; Bool) -&gt; Eq LeftOrnament
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
== :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
$c/= :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
/= :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467589"><span id="local-6989586621679467591"><span id="local-6989586621679467593"><span id="local-6989586621679467597"><span id="local-6989586621679467600"><span id="local-6989586621679467603"><span id="local-6989586621679467606"><span class="annot"><span class="annottext">Eq LeftOrnament
Eq LeftOrnament =&gt;
(LeftOrnament -&gt; LeftOrnament -&gt; Ordering)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; Bool)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; Bool)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; Bool)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; Bool)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament)
-&gt; (LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament)
-&gt; Ord LeftOrnament
LeftOrnament -&gt; LeftOrnament -&gt; Bool
LeftOrnament -&gt; LeftOrnament -&gt; Ordering
LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: LeftOrnament -&gt; LeftOrnament -&gt; Ordering
compare :: LeftOrnament -&gt; LeftOrnament -&gt; Ordering
$c&lt; :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
&lt; :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
$c&lt;= :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
&lt;= :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
$c&gt; :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
&gt; :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
$c&gt;= :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
&gt;= :: LeftOrnament -&gt; LeftOrnament -&gt; Bool
$cmax :: LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament
max :: LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament
$cmin :: LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament
min :: LeftOrnament -&gt; LeftOrnament -&gt; LeftOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467609"><span id="local-6989586621679467611"><span id="local-6989586621679467615"><span class="annot"><span class="annottext">Int -&gt; LeftOrnament -&gt; ShowS
[LeftOrnament] -&gt; ShowS
LeftOrnament -&gt; String
(Int -&gt; LeftOrnament -&gt; ShowS)
-&gt; (LeftOrnament -&gt; String)
-&gt; ([LeftOrnament] -&gt; ShowS)
-&gt; Show LeftOrnament
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LeftOrnament -&gt; ShowS
showsPrec :: Int -&gt; LeftOrnament -&gt; ShowS
$cshow :: LeftOrnament -&gt; String
show :: LeftOrnament -&gt; String
$cshowList :: [LeftOrnament] -&gt; ShowS
showList :: [LeftOrnament] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467618"><span id="local-6989586621679467620"><span class="annot"><span class="annottext">(forall x. LeftOrnament -&gt; Rep LeftOrnament x)
-&gt; (forall x. Rep LeftOrnament x -&gt; LeftOrnament)
-&gt; Generic LeftOrnament
forall x. Rep LeftOrnament x -&gt; LeftOrnament
forall x. LeftOrnament -&gt; Rep LeftOrnament x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. LeftOrnament -&gt; Rep LeftOrnament x
from :: forall x. LeftOrnament -&gt; Rep LeftOrnament x
$cto :: forall x. Rep LeftOrnament x -&gt; LeftOrnament
to :: forall x. Rep LeftOrnament x -&gt; LeftOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467623"><span id="local-6989586621679467630"><span id="local-6989586621679467633"><span id="local-6989586621679467636"><span id="local-6989586621679467639"><span class="annot"><span class="annottext">[LeftOrnament] -&gt; Value
[LeftOrnament] -&gt; Encoding
LeftOrnament -&gt; Bool
LeftOrnament -&gt; Value
LeftOrnament -&gt; Encoding
(LeftOrnament -&gt; Value)
-&gt; (LeftOrnament -&gt; Encoding)
-&gt; ([LeftOrnament] -&gt; Value)
-&gt; ([LeftOrnament] -&gt; Encoding)
-&gt; (LeftOrnament -&gt; Bool)
-&gt; ToJSON LeftOrnament
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: LeftOrnament -&gt; Value
toJSON :: LeftOrnament -&gt; Value
$ctoEncoding :: LeftOrnament -&gt; Encoding
toEncoding :: LeftOrnament -&gt; Encoding
$ctoJSONList :: [LeftOrnament] -&gt; Value
toJSONList :: [LeftOrnament] -&gt; Value
$ctoEncodingList :: [LeftOrnament] -&gt; Encoding
toEncodingList :: [LeftOrnament] -&gt; Encoding
$comitField :: LeftOrnament -&gt; Bool
omitField :: LeftOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467691"><span id="local-6989586621679467698"><span id="local-6989586621679467701"><span class="annot"><span class="annottext">Maybe LeftOrnament
Value -&gt; Parser [LeftOrnament]
Value -&gt; Parser LeftOrnament
(Value -&gt; Parser LeftOrnament)
-&gt; (Value -&gt; Parser [LeftOrnament])
-&gt; Maybe LeftOrnament
-&gt; FromJSON LeftOrnament
forall a.
(Value -&gt; Parser a)
-&gt; (Value -&gt; Parser [a]) -&gt; Maybe a -&gt; FromJSON a
$cparseJSON :: Value -&gt; Parser LeftOrnament
parseJSON :: Value -&gt; Parser LeftOrnament
$cparseJSONList :: Value -&gt; Parser [LeftOrnament]
parseJSONList :: Value -&gt; Parser [LeftOrnament]
$comittedField :: Maybe LeftOrnament
omittedField :: Maybe LeftOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467744"><span class="annot"><span class="annottext">LeftOrnament -&gt; ()
(LeftOrnament -&gt; ()) -&gt; NFData LeftOrnament
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: LeftOrnament -&gt; ()
rnf :: LeftOrnament -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><span class="hs-comment">{- | Types of single-sided ornaments right of the parent (@parent--child@).

 &gt; [p] [ ]
 &gt;   \
 &gt;   [c]
-}</span></span><span>
</span><span id="line-269"></span><span class="hs-keyword">data</span><span> </span><span id="RightOrnament"><span class="annot"><a href="PVGrammar.html#RightOrnament"><span class="hs-identifier hs-var">RightOrnament</span></a></span></span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | an incomplete right neighbor</span></span><span>
</span><span id="line-271"></span><span>    </span><span id="RightNeighbor"><span class="annot"><a href="PVGrammar.html#RightNeighbor"><span class="hs-identifier hs-var">RightNeighbor</span></a></span></span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | an incomplete right repetition</span></span><span>
</span><span id="line-273"></span><span>    </span><span id="RightRepeat"><span class="annot"><a href="PVGrammar.html#RightRepeat"><span class="hs-identifier hs-var">RightRepeat</span></a></span></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679467757"><span id="local-6989586621679467761"><span class="annot"><span class="annottext">RightOrnament -&gt; RightOrnament -&gt; Bool
(RightOrnament -&gt; RightOrnament -&gt; Bool)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; Bool) -&gt; Eq RightOrnament
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RightOrnament -&gt; RightOrnament -&gt; Bool
== :: RightOrnament -&gt; RightOrnament -&gt; Bool
$c/= :: RightOrnament -&gt; RightOrnament -&gt; Bool
/= :: RightOrnament -&gt; RightOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467767"><span id="local-6989586621679467769"><span id="local-6989586621679467771"><span id="local-6989586621679467775"><span id="local-6989586621679467778"><span id="local-6989586621679467781"><span id="local-6989586621679467784"><span class="annot"><span class="annottext">Eq RightOrnament
Eq RightOrnament =&gt;
(RightOrnament -&gt; RightOrnament -&gt; Ordering)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; Bool)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; Bool)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; Bool)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; Bool)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; RightOrnament)
-&gt; (RightOrnament -&gt; RightOrnament -&gt; RightOrnament)
-&gt; Ord RightOrnament
RightOrnament -&gt; RightOrnament -&gt; Bool
RightOrnament -&gt; RightOrnament -&gt; Ordering
RightOrnament -&gt; RightOrnament -&gt; RightOrnament
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: RightOrnament -&gt; RightOrnament -&gt; Ordering
compare :: RightOrnament -&gt; RightOrnament -&gt; Ordering
$c&lt; :: RightOrnament -&gt; RightOrnament -&gt; Bool
&lt; :: RightOrnament -&gt; RightOrnament -&gt; Bool
$c&lt;= :: RightOrnament -&gt; RightOrnament -&gt; Bool
&lt;= :: RightOrnament -&gt; RightOrnament -&gt; Bool
$c&gt; :: RightOrnament -&gt; RightOrnament -&gt; Bool
&gt; :: RightOrnament -&gt; RightOrnament -&gt; Bool
$c&gt;= :: RightOrnament -&gt; RightOrnament -&gt; Bool
&gt;= :: RightOrnament -&gt; RightOrnament -&gt; Bool
$cmax :: RightOrnament -&gt; RightOrnament -&gt; RightOrnament
max :: RightOrnament -&gt; RightOrnament -&gt; RightOrnament
$cmin :: RightOrnament -&gt; RightOrnament -&gt; RightOrnament
min :: RightOrnament -&gt; RightOrnament -&gt; RightOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467787"><span id="local-6989586621679467789"><span id="local-6989586621679467793"><span class="annot"><span class="annottext">Int -&gt; RightOrnament -&gt; ShowS
[RightOrnament] -&gt; ShowS
RightOrnament -&gt; String
(Int -&gt; RightOrnament -&gt; ShowS)
-&gt; (RightOrnament -&gt; String)
-&gt; ([RightOrnament] -&gt; ShowS)
-&gt; Show RightOrnament
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; RightOrnament -&gt; ShowS
showsPrec :: Int -&gt; RightOrnament -&gt; ShowS
$cshow :: RightOrnament -&gt; String
show :: RightOrnament -&gt; String
$cshowList :: [RightOrnament] -&gt; ShowS
showList :: [RightOrnament] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467796"><span id="local-6989586621679467798"><span class="annot"><span class="annottext">(forall x. RightOrnament -&gt; Rep RightOrnament x)
-&gt; (forall x. Rep RightOrnament x -&gt; RightOrnament)
-&gt; Generic RightOrnament
forall x. Rep RightOrnament x -&gt; RightOrnament
forall x. RightOrnament -&gt; Rep RightOrnament x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. RightOrnament -&gt; Rep RightOrnament x
from :: forall x. RightOrnament -&gt; Rep RightOrnament x
$cto :: forall x. Rep RightOrnament x -&gt; RightOrnament
to :: forall x. Rep RightOrnament x -&gt; RightOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467801"><span id="local-6989586621679467808"><span id="local-6989586621679467811"><span id="local-6989586621679467814"><span id="local-6989586621679467817"><span class="annot"><span class="annottext">[RightOrnament] -&gt; Value
[RightOrnament] -&gt; Encoding
RightOrnament -&gt; Bool
RightOrnament -&gt; Value
RightOrnament -&gt; Encoding
(RightOrnament -&gt; Value)
-&gt; (RightOrnament -&gt; Encoding)
-&gt; ([RightOrnament] -&gt; Value)
-&gt; ([RightOrnament] -&gt; Encoding)
-&gt; (RightOrnament -&gt; Bool)
-&gt; ToJSON RightOrnament
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; (a -&gt; Bool)
-&gt; ToJSON a
$ctoJSON :: RightOrnament -&gt; Value
toJSON :: RightOrnament -&gt; Value
$ctoEncoding :: RightOrnament -&gt; Encoding
toEncoding :: RightOrnament -&gt; Encoding
$ctoJSONList :: [RightOrnament] -&gt; Value
toJSONList :: [RightOrnament] -&gt; Value
$ctoEncodingList :: [RightOrnament] -&gt; Encoding
toEncodingList :: [RightOrnament] -&gt; Encoding
$comitField :: RightOrnament -&gt; Bool
omitField :: RightOrnament -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467869"><span id="local-6989586621679467876"><span id="local-6989586621679467879"><span class="annot"><span class="annottext">Maybe RightOrnament
Value -&gt; Parser [RightOrnament]
Value -&gt; Parser RightOrnament
(Value -&gt; Parser RightOrnament)
-&gt; (Value -&gt; Parser [RightOrnament])
-&gt; Maybe RightOrnament
-&gt; FromJSON RightOrnament
forall a.
(Value -&gt; Parser a)
-&gt; (Value -&gt; Parser [a]) -&gt; Maybe a -&gt; FromJSON a
$cparseJSON :: Value -&gt; Parser RightOrnament
parseJSON :: Value -&gt; Parser RightOrnament
$cparseJSONList :: Value -&gt; Parser [RightOrnament]
parseJSONList :: Value -&gt; Parser [RightOrnament]
$comittedField :: Maybe RightOrnament
omittedField :: Maybe RightOrnament
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467922"><span class="annot"><span class="annottext">RightOrnament -&gt; ()
(RightOrnament -&gt; ()) -&gt; NFData RightOrnament
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: RightOrnament -&gt; ()
rnf :: RightOrnament -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><span class="hs-comment">-- | Returns 'True' if the child repeats the left parent</span></span><span>
</span><span id="line-277"></span><span class="annot"><a href="PVGrammar.html#isRepetitionOnLeft"><span class="hs-identifier hs-type">isRepetitionOnLeft</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PVGrammar.html#DoubleOrnament"><span class="hs-identifier hs-type">DoubleOrnament</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-278"></span><span id="isRepetitionOnLeft"><span class="annot"><span class="annottext">isRepetitionOnLeft :: DoubleOrnament -&gt; Bool
</span><a href="PVGrammar.html#isRepetitionOnLeft"><span class="hs-identifier hs-var hs-var">isRepetitionOnLeft</span></a></span></span><span> </span><span class="annot"><span class="annottext">DoubleOrnament
</span><a href="PVGrammar.html#FullRepeat"><span class="hs-identifier hs-var">FullRepeat</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-279"></span><span class="annot"><a href="PVGrammar.html#isRepetitionOnLeft"><span class="hs-identifier hs-var">isRepetitionOnLeft</span></a></span><span> </span><span class="annot"><span class="annottext">DoubleOrnament
</span><a href="PVGrammar.html#RightRepeatOfLeft"><span class="hs-identifier hs-var">RightRepeatOfLeft</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-280"></span><span class="annot"><a href="PVGrammar.html#isRepetitionOnLeft"><span class="hs-identifier hs-var">isRepetitionOnLeft</span></a></span><span> </span><span class="annot"><span class="annottext">DoubleOrnament
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="annot"><span class="hs-comment">-- | Returns 'True' if the child repeats the right parent</span></span><span>
</span><span id="line-283"></span><span class="annot"><a href="PVGrammar.html#isRepetitionOnRight"><span class="hs-identifier hs-type">isRepetitionOnRight</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PVGrammar.html#DoubleOrnament"><span class="hs-identifier hs-type">DoubleOrnament</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-284"></span><span id="isRepetitionOnRight"><span class="annot"><span class="annottext">isRepetitionOnRight :: DoubleOrnament -&gt; Bool
</span><a href="PVGrammar.html#isRepetitionOnRight"><span class="hs-identifier hs-var hs-var">isRepetitionOnRight</span></a></span></span><span> </span><span class="annot"><span class="annottext">DoubleOrnament
</span><a href="PVGrammar.html#FullRepeat"><span class="hs-identifier hs-var">FullRepeat</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-285"></span><span class="annot"><a href="PVGrammar.html#isRepetitionOnRight"><span class="hs-identifier hs-var">isRepetitionOnRight</span></a></span><span> </span><span class="annot"><span class="annottext">DoubleOrnament
</span><a href="PVGrammar.html#LeftRepeatOfRight"><span class="hs-identifier hs-var">LeftRepeatOfRight</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-286"></span><span class="annot"><a href="PVGrammar.html#isRepetitionOnRight"><span class="hs-identifier hs-var">isRepetitionOnRight</span></a></span><span> </span><span class="annot"><span class="annottext">DoubleOrnament
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="annot"><span class="hs-comment">{- | Encodes the decisions made in a split operation.
 Contains a list of elaborations for every parent edge and note.
 Each elaboration contains the child pitch, and the corresponding ornament.
 For every produced edge, a decisions is made whether to keep it or not.
-}</span></span><span>
</span><span id="line-293"></span><span class="hs-keyword">data</span><span> </span><span id="Split"><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-var">Split</span></a></span></span><span> </span><span id="local-6989586621679465669"><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SplitOp"><span class="annot"><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-var">SplitOp</span></a></span></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="splitReg"><span class="annot"><span class="annottext">forall n. Split n -&gt; Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="PVGrammar.html#splitReg"><span class="hs-identifier hs-var hs-var">splitReg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#DoubleOrnament"><span class="hs-identifier hs-type">DoubleOrnament</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Maps every regular edge to a list of ornamentations.</span></span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="splitPass"><span class="annot"><span class="annottext">forall n. Split n -&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="PVGrammar.html#splitPass"><span class="hs-identifier hs-var hs-var">splitPass</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#PassingOrnament"><span class="hs-identifier hs-type">PassingOrnament</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-comment">-- ^ Maps every passing edge to a passing tone.</span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-comment">-- Since every passing edge is elaborated exactly once</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-comment">-- but there can be several instances of the same edge in a transition,</span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-comment">-- the &quot;same&quot; edge can be elaborated with several passing notes,</span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-comment">-- one for each instance of the edge.</span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fromLeft"><span class="annot"><span class="annottext">forall n. Split n -&gt; Map (Note n) [(Note n, RightOrnament)]
</span><a href="PVGrammar.html#fromLeft"><span class="hs-identifier hs-var hs-var">fromLeft</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#RightOrnament"><span class="hs-identifier hs-type">RightOrnament</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Maps notes from the left parent slice to lists of ornamentations.</span></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fromRight"><span class="annot"><span class="annottext">forall n. Split n -&gt; Map (Note n) [(Note n, LeftOrnament)]
</span><a href="PVGrammar.html#fromRight"><span class="hs-identifier hs-var hs-var">fromRight</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#LeftOrnament"><span class="hs-identifier hs-type">LeftOrnament</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Maps notes from the right parent slice to lists of ornamentations.</span></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="keepLeft"><span class="annot"><span class="annottext">forall n. Split n -&gt; HashSet (Edge n)
</span><a href="PVGrammar.html#keepLeft"><span class="hs-identifier hs-var hs-var">keepLeft</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The set of regular edges to keep in the left child transition.</span></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="keepRight"><span class="annot"><span class="annottext">forall n. Split n -&gt; HashSet (Edge n)
</span><a href="PVGrammar.html#keepRight"><span class="hs-identifier hs-var hs-var">keepRight</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The set of regular edges to keep in the right child transition.</span></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="passLeft"><span class="annot"><span class="annottext">forall n. Split n -&gt; MultiSet (InnerEdge n)
</span><a href="PVGrammar.html#passLeft"><span class="hs-identifier hs-var hs-var">passLeft</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Internal.MultiSet.html#MultiSet"><span class="hs-identifier hs-type">MS.MultiSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-comment">-- ^ Contains the new passing edges introduced in the left child transition</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-comment">-- (excluding those passed down from the parent transition).</span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="passRight"><span class="annot"><span class="annottext">forall n. Split n -&gt; MultiSet (InnerEdge n)
</span><a href="PVGrammar.html#passRight"><span class="hs-identifier hs-var hs-var">passRight</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Internal.MultiSet.html#MultiSet"><span class="hs-identifier hs-type">MS.MultiSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465669"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-comment">-- ^ Contains the new passing edges introduced in the right child transition</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-comment">-- (excluding those passed down from the parent transition).</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679467943"><span id="local-6989586621679467961"><span class="annot"><span class="annottext">Split n -&gt; Split n -&gt; Bool
(Split n -&gt; Split n -&gt; Bool)
-&gt; (Split n -&gt; Split n -&gt; Bool) -&gt; Eq (Split n)
forall n. Eq n =&gt; Split n -&gt; Split n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; Split n -&gt; Split n -&gt; Bool
== :: Split n -&gt; Split n -&gt; Bool
$c/= :: forall n. Eq n =&gt; Split n -&gt; Split n -&gt; Bool
/= :: Split n -&gt; Split n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679467979"><span id="local-6989586621679467997"><span id="local-6989586621679468014"><span id="local-6989586621679468018"><span id="local-6989586621679468021"><span id="local-6989586621679468024"><span id="local-6989586621679468027"><span class="annot"><span class="annottext">Eq (Split n)
Eq (Split n) =&gt;
(Split n -&gt; Split n -&gt; Ordering)
-&gt; (Split n -&gt; Split n -&gt; Bool)
-&gt; (Split n -&gt; Split n -&gt; Bool)
-&gt; (Split n -&gt; Split n -&gt; Bool)
-&gt; (Split n -&gt; Split n -&gt; Bool)
-&gt; (Split n -&gt; Split n -&gt; Split n)
-&gt; (Split n -&gt; Split n -&gt; Split n)
-&gt; Ord (Split n)
Split n -&gt; Split n -&gt; Bool
Split n -&gt; Split n -&gt; Ordering
Split n -&gt; Split n -&gt; Split n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (Split n)
forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Bool
forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Ordering
forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Split n
$ccompare :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Ordering
compare :: Split n -&gt; Split n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Bool
&lt; :: Split n -&gt; Split n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Bool
&lt;= :: Split n -&gt; Split n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Bool
&gt; :: Split n -&gt; Split n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Bool
&gt;= :: Split n -&gt; Split n -&gt; Bool
$cmax :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Split n
max :: Split n -&gt; Split n -&gt; Split n
$cmin :: forall n. Ord n =&gt; Split n -&gt; Split n -&gt; Split n
min :: Split n -&gt; Split n -&gt; Split n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468050"><span id="local-6989586621679468052"><span class="annot"><span class="annottext">(forall x. Split n -&gt; Rep (Split n) x)
-&gt; (forall x. Rep (Split n) x -&gt; Split n) -&gt; Generic (Split n)
forall x. Rep (Split n) x -&gt; Split n
forall x. Split n -&gt; Rep (Split n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (Split n) x -&gt; Split n
forall n x. Split n -&gt; Rep (Split n) x
$cfrom :: forall n x. Split n -&gt; Rep (Split n) x
from :: forall x. Split n -&gt; Rep (Split n) x
$cto :: forall n x. Rep (Split n) x -&gt; Split n
to :: forall x. Rep (Split n) x -&gt; Split n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468056"><span class="annot"><span class="annottext">Split n -&gt; ()
(Split n -&gt; ()) -&gt; NFData (Split n)
forall n. NFData n =&gt; Split n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; Split n -&gt; ()
rnf :: Split n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465694"><span id="local-6989586621679468110"><span id="local-6989586621679468115"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465694"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465694"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>  </span><span id="local-6989586621679468141"><span class="annot"><span class="annottext">show :: Split n -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-type">SplitOp</span></a></span><span> </span><span id="local-6989586621679468142"><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468142"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679468143"><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468143"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621679468144"><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468144"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679468145"><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468145"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span id="local-6989586621679468146"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468146"><span class="hs-identifier hs-var">kl</span></a></span></span><span> </span><span id="local-6989586621679468147"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468147"><span class="hs-identifier hs-var">kr</span></a></span></span><span> </span><span id="local-6989586621679468148"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468148"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span id="local-6989586621679468149"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468149"><span class="hs-identifier hs-var">pr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;regular:&quot;</span></span><span>
</span><span id="line-322"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468151"><span class="hs-identifier hs-var">opReg</span></a></span><span>
</span><span id="line-323"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, passing:&quot;</span></span><span>
</span><span id="line-324"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468152"><span class="hs-identifier hs-var">opPass</span></a></span><span>
</span><span id="line-325"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, ls:&quot;</span></span><span>
</span><span id="line-326"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468153"><span class="hs-identifier hs-var">opLs</span></a></span><span>
</span><span id="line-327"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, rs:&quot;</span></span><span>
</span><span id="line-328"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468154"><span class="hs-identifier hs-var">opRs</span></a></span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, kl:&quot;</span></span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468155"><span class="hs-identifier hs-var">keepLs</span></a></span><span>
</span><span id="line-331"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, kr:&quot;</span></span><span>
</span><span id="line-332"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468156"><span class="hs-identifier hs-var">keepRs</span></a></span><span>
</span><span id="line-333"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, pl:&quot;</span></span><span>
</span><span id="line-334"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468157"><span class="hs-identifier hs-var">passLs</span></a></span><span>
</span><span id="line-335"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, pr:&quot;</span></span><span>
</span><span id="line-336"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var">showOps</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468158"><span class="hs-identifier hs-var">passRs</span></a></span><span>
</span><span id="line-337"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>    </span><span id="local-6989586621679468150"><span class="annot"><span class="annottext">showOps :: [String] -&gt; String
</span><a href="#local-6989586621679468150"><span class="hs-identifier hs-var hs-var">showOps</span></a></span></span><span> </span><span id="local-6989586621679468166"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468166"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679468166"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-339"></span><span>    </span><span id="local-6989586621679468175"><span class="annot"><span class="annottext">showEdge :: (a, a) -&gt; String
</span><a href="#local-6989586621679468175"><span class="hs-identifier hs-var hs-var">showEdge</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468176"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468176"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468177"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468177"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468176"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468177"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621679468186"><span class="annot"><span class="annottext">showChild :: (a, a) -&gt; String
</span><a href="#local-6989586621679468186"><span class="hs-identifier hs-var hs-var">showChild</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468187"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468187"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468188"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468188"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468187"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468188"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621679468200"><span class="annot"><span class="annottext">showChildren :: [(a, a)] -&gt; String
</span><a href="#local-6989586621679468200"><span class="hs-identifier hs-var hs-var">showChildren</span></a></span></span><span> </span><span id="local-6989586621679468201"><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468201"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, a) -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679468186"><span class="hs-identifier hs-var">showChild</span></a></span><span> </span><span class="annot"><span class="annottext">((a, a) -&gt; String) -&gt; [(a, a)] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468201"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>    </span><span id="local-6989586621679468214"><span class="annot"><span class="annottext">showSplit :: ((a, a), [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468214"><span class="hs-identifier hs-var hs-var">showSplit</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468215"><span class="annot"><span class="annottext">(a, a)
</span><a href="#local-6989586621679468215"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468216"><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468216"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, a) -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679468175"><span class="hs-identifier hs-var">showEdge</span></a></span><span> </span><span class="annot"><span class="annottext">(a, a)
</span><a href="#local-6989586621679468215"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(a, a)] -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; [(a, a)] -&gt; String
</span><a href="#local-6989586621679468200"><span class="hs-identifier hs-var">showChildren</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468216"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621679468227"><span class="annot"><span class="annottext">showL :: (a, [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468227"><span class="hs-identifier hs-var hs-var">showL</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468228"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468228"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468229"><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468229"><span class="hs-identifier hs-var">lchilds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468228"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(a, a)] -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; [(a, a)] -&gt; String
</span><a href="#local-6989586621679468200"><span class="hs-identifier hs-var">showChildren</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468229"><span class="hs-identifier hs-var">lchilds</span></a></span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621679468240"><span class="annot"><span class="annottext">showR :: (a, [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468240"><span class="hs-identifier hs-var hs-var">showR</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468241"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468241"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468242"><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468242"><span class="hs-identifier hs-var">rchilds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(a, a)] -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; [(a, a)] -&gt; String
</span><a href="#local-6989586621679468200"><span class="hs-identifier hs-var">showChildren</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, a)]
</span><a href="#local-6989586621679468242"><span class="hs-identifier hs-var">rchilds</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;=&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679468241"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>    </span><span id="local-6989586621679468151"><span class="annot"><span class="annottext">opReg :: [String]
</span><a href="#local-6989586621679468151"><span class="hs-identifier hs-var hs-var">opReg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Edge n, [(Note n, DoubleOrnament)]) -&gt; String
forall {a} {a} {a} {a}.
(Show a, Show a, Show a, Show a) =&gt;
((a, a), [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468214"><span class="hs-identifier hs-var">showSplit</span></a></span><span> </span><span class="annot"><span class="annottext">((Edge n, [(Note n, DoubleOrnament)]) -&gt; String)
-&gt; [(Edge n, [(Note n, DoubleOrnament)])] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; [(Edge n, [(Note n, DoubleOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468142"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-348"></span><span>    </span><span id="local-6989586621679468152"><span class="annot"><span class="annottext">opPass :: [String]
</span><a href="#local-6989586621679468152"><span class="hs-identifier hs-var hs-var">opPass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InnerEdge n, [(Note n, PassingOrnament)]) -&gt; String
forall {a} {a} {a} {a}.
(Show a, Show a, Show a, Show a) =&gt;
((a, a), [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468214"><span class="hs-identifier hs-var">showSplit</span></a></span><span> </span><span class="annot"><span class="annottext">((InnerEdge n, [(Note n, PassingOrnament)]) -&gt; String)
-&gt; [(InnerEdge n, [(Note n, PassingOrnament)])] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; [(InnerEdge n, [(Note n, PassingOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468143"><span class="hs-identifier hs-var">pass</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span id="local-6989586621679468153"><span class="annot"><span class="annottext">opLs :: [String]
</span><a href="#local-6989586621679468153"><span class="hs-identifier hs-var hs-var">opLs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Note n, [(Note n, RightOrnament)]) -&gt; String
forall {a} {a} {a}.
(Show a, Show a, Show a) =&gt;
(a, [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468227"><span class="hs-identifier hs-var">showL</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n, [(Note n, RightOrnament)]) -&gt; String)
-&gt; [(Note n, [(Note n, RightOrnament)])] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
-&gt; [(Note n, [(Note n, RightOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468144"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span id="local-6989586621679468154"><span class="annot"><span class="annottext">opRs :: [String]
</span><a href="#local-6989586621679468154"><span class="hs-identifier hs-var hs-var">opRs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Note n, [(Note n, LeftOrnament)]) -&gt; String
forall {a} {a} {a}.
(Show a, Show a, Show a) =&gt;
(a, [(a, a)]) -&gt; String
</span><a href="#local-6989586621679468240"><span class="hs-identifier hs-var">showR</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n, [(Note n, LeftOrnament)]) -&gt; String)
-&gt; [(Note n, [(Note n, LeftOrnament)])] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
-&gt; [(Note n, [(Note n, LeftOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468145"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-351"></span><span>    </span><span id="local-6989586621679468155"><span class="annot"><span class="annottext">keepLs :: [String]
</span><a href="#local-6989586621679468155"><span class="hs-identifier hs-var hs-var">keepLs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679468175"><span class="hs-identifier hs-var">showEdge</span></a></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; String) -&gt; [Edge n] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468146"><span class="hs-identifier hs-var">kl</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span id="local-6989586621679468156"><span class="annot"><span class="annottext">keepRs :: [String]
</span><a href="#local-6989586621679468156"><span class="hs-identifier hs-var hs-var">keepRs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679468175"><span class="hs-identifier hs-var">showEdge</span></a></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; String) -&gt; [Edge n] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468147"><span class="hs-identifier hs-var">kr</span></a></span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621679468157"><span class="annot"><span class="annottext">passLs :: [String]
</span><a href="#local-6989586621679468157"><span class="hs-identifier hs-var hs-var">passLs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679468175"><span class="hs-identifier hs-var">showEdge</span></a></span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; String) -&gt; [InnerEdge n] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [InnerEdge n]
forall a. MultiSet a -&gt; [a]
</span><a href="Internal.MultiSet.html#toList"><span class="hs-identifier hs-var">MS.toList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468148"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-354"></span><span>    </span><span id="local-6989586621679468158"><span class="annot"><span class="annottext">passRs :: [String]
</span><a href="#local-6989586621679468158"><span class="hs-identifier hs-var hs-var">passRs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679468175"><span class="hs-identifier hs-var">showEdge</span></a></span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; String) -&gt; [InnerEdge n] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [InnerEdge n]
forall a. MultiSet a -&gt; [a]
</span><a href="Internal.MultiSet.html#toList"><span class="hs-identifier hs-var">MS.toList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468149"><span class="hs-identifier hs-var">pr</span></a></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465715"><span id="local-6989586621679468289"><span id="local-6989586621679468293"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465715"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465715"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465715"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-type">SplitOp</span></a></span><span> </span><span id="local-6989586621679468320"><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468320"><span class="hs-identifier hs-var">rega</span></a></span></span><span> </span><span id="local-6989586621679468321"><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468321"><span class="hs-identifier hs-var">passa</span></a></span></span><span> </span><span id="local-6989586621679468322"><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468322"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span id="local-6989586621679468323"><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468323"><span class="hs-identifier hs-var">ra</span></a></span></span><span> </span><span id="local-6989586621679468324"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468324"><span class="hs-identifier hs-var">kla</span></a></span></span><span> </span><span id="local-6989586621679468325"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468325"><span class="hs-identifier hs-var">kra</span></a></span></span><span> </span><span id="local-6989586621679468326"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468326"><span class="hs-identifier hs-var">pla</span></a></span></span><span> </span><span id="local-6989586621679468327"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468327"><span class="hs-identifier hs-var">pra</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679468328"><span class="annot"><span class="annottext">&lt;&gt; :: Split n -&gt; Split n -&gt; Split n
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-type">SplitOp</span></a></span><span> </span><span id="local-6989586621679468329"><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468329"><span class="hs-identifier hs-var">regb</span></a></span></span><span> </span><span id="local-6989586621679468330"><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468330"><span class="hs-identifier hs-var">passb</span></a></span></span><span> </span><span id="local-6989586621679468331"><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468331"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621679468332"><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468332"><span class="hs-identifier hs-var">rb</span></a></span></span><span> </span><span id="local-6989586621679468333"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468333"><span class="hs-identifier hs-var">klb</span></a></span></span><span> </span><span id="local-6989586621679468334"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468334"><span class="hs-identifier hs-var">krb</span></a></span></span><span> </span><span id="local-6989586621679468335"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468335"><span class="hs-identifier hs-var">plb</span></a></span></span><span> </span><span id="local-6989586621679468336"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468336"><span class="hs-identifier hs-var">prb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-358"></span><span>    </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
forall n.
Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
</span><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-var">SplitOp</span></a></span><span>
</span><span id="line-359"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468320"><span class="hs-identifier hs-var">rega</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (Edge n) [(Note n, DoubleOrnament)]
forall k a. (Ord k, Semigroup a) =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621679468337"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468329"><span class="hs-identifier hs-var">regb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468321"><span class="hs-identifier hs-var">passa</span></a></span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
forall k a. (Ord k, Semigroup a) =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621679468337"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468330"><span class="hs-identifier hs-var">passb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468322"><span class="hs-identifier hs-var">la</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
forall k a. (Ord k, Semigroup a) =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621679468337"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468331"><span class="hs-identifier hs-var">lb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468323"><span class="hs-identifier hs-var">ra</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
forall k a. (Ord k, Semigroup a) =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621679468337"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468332"><span class="hs-identifier hs-var">rb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; HashSet (Edge n) -&gt; HashSet (Edge n)
forall a. Eq a =&gt; HashSet a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.union</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468324"><span class="hs-identifier hs-var">kla</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468333"><span class="hs-identifier hs-var">klb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; HashSet (Edge n) -&gt; HashSet (Edge n)
forall a. Eq a =&gt; HashSet a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.union</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468325"><span class="hs-identifier hs-var">kra</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468334"><span class="hs-identifier hs-var">krb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n) -&gt; MultiSet (InnerEdge n)
forall a.
(Eq a, Hashable a) =&gt;
MultiSet a -&gt; MultiSet a -&gt; MultiSet a
</span><a href="Internal.MultiSet.html#union"><span class="hs-identifier hs-var">MS.union</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468326"><span class="hs-identifier hs-var">pla</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468335"><span class="hs-identifier hs-var">plb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n) -&gt; MultiSet (InnerEdge n)
forall a.
(Eq a, Hashable a) =&gt;
MultiSet a -&gt; MultiSet a -&gt; MultiSet a
</span><a href="Internal.MultiSet.html#union"><span class="hs-identifier hs-var">MS.union</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468327"><span class="hs-identifier hs-var">pra</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468336"><span class="hs-identifier hs-var">prb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621679465716"><span id="local-6989586621679465717"><span class="annot"><a href="#local-6989586621679468337"><span class="hs-operator hs-type">(&lt;+&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465716"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679465717"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679465716"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465717"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679465716"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465717"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679465716"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465717"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-369"></span><span>    </span><span id="local-6989586621679468337"><span class="annot"><span class="annottext">&lt;+&gt; :: forall k a. (Ord k, Semigroup a) =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621679468337"><span class="hs-operator hs-var hs-var">(&lt;+&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.unionWith</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465725"><span id="local-6989586621679468351"><span id="local-6989586621679468355"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465725"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465725"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465725"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621679468357"><span class="annot"><span class="annottext">mempty :: Split n
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-373"></span><span>    </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
forall n.
Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
</span><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-var">SplitOp</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
forall a. HashSet a
</span><span class="hs-identifier hs-var">S.empty</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
forall a. HashSet a
</span><span class="hs-identifier hs-var">S.empty</span></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
forall a. MultiSet a
</span><a href="Internal.MultiSet.html#empty"><span class="hs-identifier hs-var">MS.empty</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
forall a. MultiSet a
</span><a href="Internal.MultiSet.html#empty"><span class="hs-identifier hs-var">MS.empty</span></a></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465227"><span id="local-6989586621679468365"><span id="local-6989586621679468368"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621679468459"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Split n)
</span><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser (Split n)) -&gt; Value -&gt; Parser (Split n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Split&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Split n)) -&gt; Value -&gt; Parser (Split n))
-&gt; (Object -&gt; Parser (Split n)) -&gt; Value -&gt; Parser (Split n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679468460"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-377"></span><span>    </span><span id="local-6989586621679468461"><span class="annot"><span class="annottext">[(Edge n, [(Note n, DoubleOrnament)])]
</span><a href="#local-6989586621679468461"><span class="hs-identifier hs-var">regular</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;regular&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [(Edge n, [(Note n, DoubleOrnament)])])
-&gt; Parser [(Edge n, [(Note n, DoubleOrnament)])]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Edge n, [(Note n, DoubleOrnament)]))
-&gt; [Value] -&gt; Parser [(Edge n, [(Note n, DoubleOrnament)])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value -&gt; Parser (Edge n))
-&gt; Value -&gt; Parser (Edge n, [(Note n, DoubleOrnament)])
forall o p.
(Notation n, FromJSON o) =&gt;
(Value -&gt; Parser p) -&gt; Value -&gt; Parser (p, [(Note n, o)])
</span><a href="#local-6989586621679468462"><span class="hs-identifier hs-var">parseElaboration</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Edge n)
forall n.
Notation n =&gt;
Value -&gt; Parser (StartStop (Note n), StartStop (Note n))
</span><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-var">parseEdge</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>    </span><span id="local-6989586621679468463"><span class="annot"><span class="annottext">[(InnerEdge n, [(Note n, PassingOrnament)])]
</span><a href="#local-6989586621679468463"><span class="hs-identifier hs-var">passing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [(InnerEdge n, [(Note n, PassingOrnament)])])
-&gt; Parser [(InnerEdge n, [(Note n, PassingOrnament)])]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (InnerEdge n, [(Note n, PassingOrnament)]))
-&gt; [Value] -&gt; Parser [(InnerEdge n, [(Note n, PassingOrnament)])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value -&gt; Parser (InnerEdge n))
-&gt; Value -&gt; Parser (InnerEdge n, [(Note n, PassingOrnament)])
forall o p.
(Notation n, FromJSON o) =&gt;
(Value -&gt; Parser p) -&gt; Value -&gt; Parser (p, [(Note n, o)])
</span><a href="#local-6989586621679468462"><span class="hs-identifier hs-var">parseElaboration</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (InnerEdge n)
forall n. Notation n =&gt; Value -&gt; Parser (Note n, Note n)
</span><a href="PVGrammar.html#parseInnerEdge"><span class="hs-identifier hs-var">parseInnerEdge</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621679468464"><span class="annot"><span class="annottext">[(Note n, [(Note n, RightOrnament)])]
</span><a href="#local-6989586621679468464"><span class="hs-identifier hs-var">fromL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fromLeft&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [(Note n, [(Note n, RightOrnament)])])
-&gt; Parser [(Note n, [(Note n, RightOrnament)])]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n, [(Note n, RightOrnament)]))
-&gt; [Value] -&gt; Parser [(Note n, [(Note n, RightOrnament)])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n))
-&gt; Value -&gt; Parser (Note n, [(Note n, RightOrnament)])
forall o p.
(Notation n, FromJSON o) =&gt;
(Value -&gt; Parser p) -&gt; Value -&gt; Parser (p, [(Note n, o)])
</span><a href="#local-6989586621679468462"><span class="hs-identifier hs-var">parseElaboration</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621679468465"><span class="annot"><span class="annottext">[(Note n, [(Note n, LeftOrnament)])]
</span><a href="#local-6989586621679468465"><span class="hs-identifier hs-var">fromR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fromRight&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [(Note n, [(Note n, LeftOrnament)])])
-&gt; Parser [(Note n, [(Note n, LeftOrnament)])]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n, [(Note n, LeftOrnament)]))
-&gt; [Value] -&gt; Parser [(Note n, [(Note n, LeftOrnament)])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n))
-&gt; Value -&gt; Parser (Note n, [(Note n, LeftOrnament)])
forall o p.
(Notation n, FromJSON o) =&gt;
(Value -&gt; Parser p) -&gt; Value -&gt; Parser (p, [(Note n, o)])
</span><a href="#local-6989586621679468462"><span class="hs-identifier hs-var">parseElaboration</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621679468466"><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679468466"><span class="hs-identifier hs-var">keepL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;keepLeft&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value] -&gt; ([Value] -&gt; Parser [Edge n]) -&gt; Parser [Edge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Edge n)) -&gt; [Value] -&gt; Parser [Edge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Edge n)
forall n.
Notation n =&gt;
Value -&gt; Parser (StartStop (Note n), StartStop (Note n))
</span><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-var">parseEdge</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621679468467"><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679468467"><span class="hs-identifier hs-var">keepR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;keepRight&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value] -&gt; ([Value] -&gt; Parser [Edge n]) -&gt; Parser [Edge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Edge n)) -&gt; [Value] -&gt; Parser [Edge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Edge n)
forall n.
Notation n =&gt;
Value -&gt; Parser (StartStop (Note n), StartStop (Note n))
</span><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-var">parseEdge</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621679468468"><span class="annot"><span class="annottext">[InnerEdge n]
</span><a href="#local-6989586621679468468"><span class="hs-identifier hs-var">passL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passLeft&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [InnerEdge n]) -&gt; Parser [InnerEdge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (InnerEdge n)) -&gt; [Value] -&gt; Parser [InnerEdge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (InnerEdge n)
forall n. Notation n =&gt; Value -&gt; Parser (Note n, Note n)
</span><a href="PVGrammar.html#parseInnerEdge"><span class="hs-identifier hs-var">parseInnerEdge</span></a></span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621679468469"><span class="annot"><span class="annottext">[InnerEdge n]
</span><a href="#local-6989586621679468469"><span class="hs-identifier hs-var">passR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468460"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passRight&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [InnerEdge n]) -&gt; Parser [InnerEdge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (InnerEdge n)) -&gt; [Value] -&gt; Parser [InnerEdge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (InnerEdge n)
forall n. Notation n =&gt; Value -&gt; Parser (Note n, Note n)
</span><a href="PVGrammar.html#parseInnerEdge"><span class="hs-identifier hs-var">parseInnerEdge</span></a></span><span>
</span><span id="line-385"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-386"></span><span>      </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
forall n.
Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
</span><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-var">SplitOp</span></a></span><span>
</span><span id="line-387"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Edge n, [(Note n, DoubleOrnament)])]
-&gt; Map (Edge n) [(Note n, DoubleOrnament)]
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(Edge n, [(Note n, DoubleOrnament)])]
</span><a href="#local-6989586621679468461"><span class="hs-identifier hs-var">regular</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(InnerEdge n, [(Note n, PassingOrnament)])]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(InnerEdge n, [(Note n, PassingOrnament)])]
</span><a href="#local-6989586621679468463"><span class="hs-identifier hs-var">passing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Note n, [(Note n, RightOrnament)])]
-&gt; Map (Note n) [(Note n, RightOrnament)]
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(Note n, [(Note n, RightOrnament)])]
</span><a href="#local-6989586621679468464"><span class="hs-identifier hs-var">fromL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Note n, [(Note n, LeftOrnament)])]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(Note n, [(Note n, LeftOrnament)])]
</span><a href="#local-6989586621679468465"><span class="hs-identifier hs-var">fromR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Edge n] -&gt; HashSet (Edge n)
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679468466"><span class="hs-identifier hs-var">keepL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Edge n] -&gt; HashSet (Edge n)
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679468467"><span class="hs-identifier hs-var">keepR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InnerEdge n] -&gt; MultiSet (InnerEdge n)
forall (t :: * -&gt; *) a.
(Foldable t, Eq a, Hashable a) =&gt;
t a -&gt; MultiSet a
</span><a href="Internal.MultiSet.html#fromList"><span class="hs-identifier hs-var">MS.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InnerEdge n]
</span><a href="#local-6989586621679468468"><span class="hs-identifier hs-var">passL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InnerEdge n] -&gt; MultiSet (InnerEdge n)
forall (t :: * -&gt; *) a.
(Foldable t, Eq a, Hashable a) =&gt;
t a -&gt; MultiSet a
</span><a href="Internal.MultiSet.html#fromList"><span class="hs-identifier hs-var">MS.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InnerEdge n]
</span><a href="#local-6989586621679468469"><span class="hs-identifier hs-var">passR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#InnerEdge"><span class="hs-identifier hs-type">InnerEdge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>    </span><span id="local-6989586621679465730"><span id="local-6989586621679465731"><span class="annot"><a href="#local-6989586621679468462"><span class="hs-identifier hs-type">parseElaboration</span></a></span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679465730"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="annot"><a href="#local-6989586621679465731"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span>
</span><span id="line-400"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465731"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465730"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621679468462"><span class="annot"><span class="annottext">parseElaboration :: forall o p.
(Notation n, FromJSON o) =&gt;
(Value -&gt; Parser p) -&gt; Value -&gt; Parser (p, [(Note n, o)])
</span><a href="#local-6989586621679468462"><span class="hs-identifier hs-var hs-var">parseElaboration</span></a></span></span><span> </span><span id="local-6989586621679468485"><span class="annot"><span class="annottext">Value -&gt; Parser p
</span><a href="#local-6989586621679468485"><span class="hs-identifier hs-var">parseParent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (p, [(Note n, o)]))
-&gt; Value
-&gt; Parser (p, [(Note n, o)])
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Elaboration&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (p, [(Note n, o)]))
 -&gt; Value -&gt; Parser (p, [(Note n, o)]))
-&gt; (Object -&gt; Parser (p, [(Note n, o)]))
-&gt; Value
-&gt; Parser (p, [(Note n, o)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679468486"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468486"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-402"></span><span>      </span><span id="local-6989586621679468487"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679468487"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468486"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser p) -&gt; Parser p
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser p
</span><a href="#local-6989586621679468485"><span class="hs-identifier hs-var">parseParent</span></a></span><span>
</span><span id="line-403"></span><span>      </span><span id="local-6989586621679468488"><span class="annot"><span class="annottext">[(Note n, o)]
</span><a href="#local-6989586621679468488"><span class="hs-identifier hs-var">children</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468486"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;children&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [(Note n, o)]) -&gt; Parser [(Note n, o)]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n, o)) -&gt; [Value] -&gt; Parser [(Note n, o)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n, o)
forall o. (Notation n, FromJSON o) =&gt; Value -&gt; Parser (Note n, o)
</span><a href="#local-6989586621679468489"><span class="hs-identifier hs-var">parseChild</span></a></span><span>
</span><span id="line-404"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679468487"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Note n, o)]
</span><a href="#local-6989586621679468488"><span class="hs-identifier hs-var">children</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621679465736"><span class="annot"><a href="#local-6989586621679468489"><span class="hs-identifier hs-type">parseChild</span></a></span><span>
</span><span id="line-406"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679465736"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465227"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465736"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621679468489"><span class="annot"><span class="annottext">parseChild :: forall o. (Notation n, FromJSON o) =&gt; Value -&gt; Parser (Note n, o)
</span><a href="#local-6989586621679468489"><span class="hs-identifier hs-var hs-var">parseChild</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Note n, o)) -&gt; Value -&gt; Parser (Note n, o)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Child&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Note n, o)) -&gt; Value -&gt; Parser (Note n, o))
-&gt; (Object -&gt; Parser (Note n, o)) -&gt; Value -&gt; Parser (Note n, o)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679468500"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468500"><span class="hs-identifier hs-var">cld</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-408"></span><span>      </span><span id="local-6989586621679468501"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679468501"><span class="hs-identifier hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468500"><span class="hs-identifier hs-var">cld</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser (Note n)) -&gt; Parser (Note n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span>
</span><span id="line-409"></span><span>      </span><span id="local-6989586621679468502"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679468502"><span class="hs-identifier hs-var">orn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468500"><span class="hs-identifier hs-var">cld</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser o
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;orn&quot;</span></span><span>
</span><span id="line-410"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679468501"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679468502"><span class="hs-identifier hs-var">orn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465739"><span id="local-6989586621679468506"><span id="local-6989586621679468510"><span id="local-6989586621679468513"><span id="local-6989586621679468516"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465739"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465739"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-413"></span><span>  </span><span id="local-6989586621679468566"><span class="annot"><span class="annottext">toJSON :: Split n -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-type">SplitOp</span></a></span><span> </span><span id="local-6989586621679468567"><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468567"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679468568"><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468568"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621679468569"><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468569"><span class="hs-identifier hs-var">fromL</span></a></span></span><span> </span><span id="local-6989586621679468570"><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468570"><span class="hs-identifier hs-var">fromR</span></a></span></span><span> </span><span id="local-6989586621679468571"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468571"><span class="hs-identifier hs-var">keepL</span></a></span></span><span> </span><span id="local-6989586621679468572"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468572"><span class="hs-identifier hs-var">keepR</span></a></span></span><span> </span><span id="local-6989586621679468573"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468573"><span class="hs-identifier hs-var">passL</span></a></span></span><span> </span><span id="local-6989586621679468574"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468574"><span class="hs-identifier hs-var">passR</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-414"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-415"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;regular&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">((Edge n, [(Note n, DoubleOrnament)]) -&gt; Value)
-&gt; [(Edge n, [(Note n, DoubleOrnament)])] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Edge n -&gt; Value) -&gt; (Edge n, [(Note n, DoubleOrnament)]) -&gt; Value
forall o p. ToJSON o =&gt; (p -&gt; Value) -&gt; (p, [(Note n, o)]) -&gt; Value
</span><a href="#local-6989586621679468575"><span class="hs-identifier hs-var">elaboToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; [(Edge n, [(Note n, DoubleOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679468567"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">((InnerEdge n, [(Note n, PassingOrnament)]) -&gt; Value)
-&gt; [(InnerEdge n, [(Note n, PassingOrnament)])] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(InnerEdge n -&gt; Value)
-&gt; (InnerEdge n, [(Note n, PassingOrnament)]) -&gt; Value
forall o p. ToJSON o =&gt; (p -&gt; Value) -&gt; (p, [(Note n, o)]) -&gt; Value
</span><a href="#local-6989586621679468575"><span class="hs-identifier hs-var">elaboToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; [(InnerEdge n, [(Note n, PassingOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679468568"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fromLeft&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">((Note n, [(Note n, RightOrnament)]) -&gt; Value)
-&gt; [(Note n, [(Note n, RightOrnament)])] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Note n -&gt; Value) -&gt; (Note n, [(Note n, RightOrnament)]) -&gt; Value
forall o p. ToJSON o =&gt; (p -&gt; Value) -&gt; (p, [(Note n, o)]) -&gt; Value
</span><a href="#local-6989586621679468575"><span class="hs-identifier hs-var">elaboToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
-&gt; [(Note n, [(Note n, RightOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679468569"><span class="hs-identifier hs-var">fromL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fromRight&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">((Note n, [(Note n, LeftOrnament)]) -&gt; Value)
-&gt; [(Note n, [(Note n, LeftOrnament)])] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Note n -&gt; Value) -&gt; (Note n, [(Note n, LeftOrnament)]) -&gt; Value
forall o p. ToJSON o =&gt; (p -&gt; Value) -&gt; (p, [(Note n, o)]) -&gt; Value
</span><a href="#local-6989586621679468575"><span class="hs-identifier hs-var">elaboToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
-&gt; [(Note n, [(Note n, LeftOrnament)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679468570"><span class="hs-identifier hs-var">fromR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;keepLeft&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; Value) -&gt; [Edge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468571"><span class="hs-identifier hs-var">keepL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;keepRight&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; Value) -&gt; [Edge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468572"><span class="hs-identifier hs-var">keepR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passLeft&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; Value) -&gt; [InnerEdge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [InnerEdge n]
forall a. MultiSet a -&gt; [a]
</span><a href="Internal.MultiSet.html#toList"><span class="hs-identifier hs-var">MS.toList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468573"><span class="hs-identifier hs-var">passL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;passRight&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; Value) -&gt; [InnerEdge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">InnerEdge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MultiSet (InnerEdge n) -&gt; [InnerEdge n]
forall a. MultiSet a -&gt; [a]
</span><a href="Internal.MultiSet.html#toList"><span class="hs-identifier hs-var">MS.toList</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679468574"><span class="hs-identifier hs-var">passR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-424"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-425"></span><span>    </span><span id="local-6989586621679465740"><span id="local-6989586621679465741"><span class="annot"><a href="#local-6989586621679468575"><span class="hs-identifier hs-type">elaboToJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679465740"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465741"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465741"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465739"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465740"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span></span></span><span>
</span><span id="line-426"></span><span>    </span><span id="local-6989586621679468575"><span class="annot"><span class="annottext">elaboToJSON :: forall o p. ToJSON o =&gt; (p -&gt; Value) -&gt; (p, [(Note n, o)]) -&gt; Value
</span><a href="#local-6989586621679468575"><span class="hs-identifier hs-var hs-var">elaboToJSON</span></a></span></span><span> </span><span id="local-6989586621679468586"><span class="annot"><span class="annottext">p -&gt; Value
</span><a href="#local-6989586621679468586"><span class="hs-identifier hs-var">fParent</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468587"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679468587"><span class="hs-identifier hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468588"><span class="annot"><span class="annottext">[(Note n, o)]
</span><a href="#local-6989586621679468588"><span class="hs-identifier hs-var">children</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-427"></span><span>      </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-428"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">p -&gt; Value
</span><a href="#local-6989586621679468586"><span class="hs-identifier hs-var">fParent</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679468587"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-429"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;children&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">((Note n, o) -&gt; Value) -&gt; [(Note n, o)] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Note n, o) -&gt; Value
forall {v} {v}. (ToJSON v, ToJSON v) =&gt; (v, v) -&gt; Value
</span><a href="#local-6989586621679468589"><span class="hs-identifier hs-var">childToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">[(Note n, o)]
</span><a href="#local-6989586621679468588"><span class="hs-identifier hs-var">children</span></a></span><span>
</span><span id="line-430"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-431"></span><span>    </span><span id="local-6989586621679468589"><span class="annot"><span class="annottext">childToJSON :: (v, v) -&gt; Value
</span><a href="#local-6989586621679468589"><span class="hs-identifier hs-var hs-var">childToJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468600"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679468600"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468601"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679468601"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; v -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679468600"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;orn&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; v -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679468601"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="annot"><span class="hs-comment">{- | Represents a freeze operation.
 Since this just ties all remaining edges
 (which must all be repetitions)
 no decisions have to be encoded.
-}</span></span><span>
</span><span id="line-438"></span><span class="hs-keyword">newtype</span><span> </span><span id="Freeze"><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-var">Freeze</span></a></span></span><span> </span><span id="local-6989586621679465746"><span class="annot"><a href="#local-6989586621679465746"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FreezeOp"><span class="annot"><a href="PVGrammar.html#FreezeOp"><span class="hs-identifier hs-var">FreezeOp</span></a></span></span><span> </span><span class="hs-special">{</span><span id="freezeTies"><span class="annot"><span class="annottext">forall n. Freeze n -&gt; HashSet (Edge n)
</span><a href="PVGrammar.html#freezeTies"><span class="hs-identifier hs-var hs-var">freezeTies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465746"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468606"><span id="local-6989586621679468611"><span class="annot"><span class="annottext">Freeze n -&gt; Freeze n -&gt; Bool
(Freeze n -&gt; Freeze n -&gt; Bool)
-&gt; (Freeze n -&gt; Freeze n -&gt; Bool) -&gt; Eq (Freeze n)
forall n. Eq n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
== :: Freeze n -&gt; Freeze n -&gt; Bool
$c/= :: forall n. Eq n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
/= :: Freeze n -&gt; Freeze n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468627"><span id="local-6989586621679468632"><span id="local-6989586621679468637"><span id="local-6989586621679468642"><span id="local-6989586621679468647"><span id="local-6989586621679468652"><span id="local-6989586621679468657"><span class="annot"><span class="annottext">Eq (Freeze n)
Eq (Freeze n) =&gt;
(Freeze n -&gt; Freeze n -&gt; Ordering)
-&gt; (Freeze n -&gt; Freeze n -&gt; Bool)
-&gt; (Freeze n -&gt; Freeze n -&gt; Bool)
-&gt; (Freeze n -&gt; Freeze n -&gt; Bool)
-&gt; (Freeze n -&gt; Freeze n -&gt; Bool)
-&gt; (Freeze n -&gt; Freeze n -&gt; Freeze n)
-&gt; (Freeze n -&gt; Freeze n -&gt; Freeze n)
-&gt; Ord (Freeze n)
Freeze n -&gt; Freeze n -&gt; Bool
Freeze n -&gt; Freeze n -&gt; Ordering
Freeze n -&gt; Freeze n -&gt; Freeze n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (Freeze n)
forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Ordering
forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Freeze n
$ccompare :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Ordering
compare :: Freeze n -&gt; Freeze n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
&lt; :: Freeze n -&gt; Freeze n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
&lt;= :: Freeze n -&gt; Freeze n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
&gt; :: Freeze n -&gt; Freeze n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Bool
&gt;= :: Freeze n -&gt; Freeze n -&gt; Bool
$cmax :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Freeze n
max :: Freeze n -&gt; Freeze n -&gt; Freeze n
$cmin :: forall n. Ord n =&gt; Freeze n -&gt; Freeze n -&gt; Freeze n
min :: Freeze n -&gt; Freeze n -&gt; Freeze n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468684"><span id="local-6989586621679468686"><span class="annot"><span class="annottext">(forall x. Freeze n -&gt; Rep (Freeze n) x)
-&gt; (forall x. Rep (Freeze n) x -&gt; Freeze n) -&gt; Generic (Freeze n)
forall x. Rep (Freeze n) x -&gt; Freeze n
forall x. Freeze n -&gt; Rep (Freeze n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (Freeze n) x -&gt; Freeze n
forall n x. Freeze n -&gt; Rep (Freeze n) x
$cfrom :: forall n x. Freeze n -&gt; Rep (Freeze n) x
from :: forall x. Freeze n -&gt; Rep (Freeze n) x
$cto :: forall n x. Rep (Freeze n) x -&gt; Freeze n
to :: forall x. Rep (Freeze n) x -&gt; Freeze n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468690"><span class="annot"><span class="annottext">Freeze n -&gt; ()
(Freeze n -&gt; ()) -&gt; NFData (Freeze n)
forall n. NFData n =&gt; Freeze n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; Freeze n -&gt; ()
rnf :: Freeze n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465757"><span id="local-6989586621679468706"><span id="local-6989586621679468711"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465757"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465757"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-443"></span><span>  </span><span id="local-6989586621679468720"><span class="annot"><span class="annottext">show :: Freeze n -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#FreezeOp"><span class="hs-identifier hs-type">FreezeOp</span></a></span><span> </span><span id="local-6989586621679468721"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468721"><span class="hs-identifier hs-var">ties</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468721"><span class="hs-identifier hs-var">ties</span></a></span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465228"><span id="local-6989586621679468726"><span id="local-6989586621679468729"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465228"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465228"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465228"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679468748"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Freeze n)
</span><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Freeze n)) -&gt; Value -&gt; Parser (Freeze n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Freeze&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Freeze n)) -&gt; Value -&gt; Parser (Freeze n))
-&gt; (Object -&gt; Parser (Freeze n)) -&gt; Value -&gt; Parser (Freeze n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679468749"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468749"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-447"></span><span>    </span><span id="local-6989586621679468750"><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679468750"><span class="hs-identifier hs-var">ties</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679468749"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;ties&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value] -&gt; ([Value] -&gt; Parser [Edge n]) -&gt; Parser [Edge n]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Edge n)) -&gt; [Value] -&gt; Parser [Edge n]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Edge n)
forall n.
Notation n =&gt;
Value -&gt; Parser (StartStop (Note n), StartStop (Note n))
</span><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-var">parseEdge</span></a></span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; Freeze n
forall n. HashSet (Edge n) -&gt; Freeze n
</span><a href="PVGrammar.html#FreezeOp"><span class="hs-identifier hs-var">FreezeOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Edge n] -&gt; HashSet (Edge n)
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">[Edge n]
</span><a href="#local-6989586621679468750"><span class="hs-identifier hs-var">ties</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465763"><span id="local-6989586621679468754"><span id="local-6989586621679468758"><span id="local-6989586621679468761"><span id="local-6989586621679468764"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465763"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465763"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-451"></span><span>  </span><span id="local-6989586621679468775"><span class="annot"><span class="annottext">toJSON :: Freeze n -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#FreezeOp"><span class="hs-identifier hs-type">FreezeOp</span></a></span><span> </span><span id="local-6989586621679468776"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468776"><span class="hs-identifier hs-var">ties</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;ties&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; Value) -&gt; [Edge n] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Edge n -&gt; Value
forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var">edgeToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet (Edge n) -&gt; [Edge n]
forall a. HashSet a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679468776"><span class="hs-identifier hs-var">ties</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- TODO: add empty prevTime?</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="hs-comment">-- {- | Encodes the distribution of a pitch in a spread.</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-comment">--  All instances of a pitch must be either moved completely to the left or the right (or both).</span><span>
</span><span id="line-456"></span><span class="hs-comment">--  In addition, some instances may be repeated on the other side.</span><span>
</span><span id="line-457"></span><span class="hs-comment">--  The difference is indicated by the field of the 'ToLeft' and 'ToRight' constructors.</span><span>
</span><span id="line-458"></span><span class="hs-comment">--  For example, @ToLeft 3@ indicates that out of @n@ instances,</span><span>
</span><span id="line-459"></span><span class="hs-comment">--  all @n@ are moved to the left and @n-3@ are replicated on the right.</span><span>
</span><span id="line-460"></span><span class="hs-comment">-- -}</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- data SpreadDirection</span><span>
</span><span id="line-462"></span><span class="hs-comment">--   = -- | all to the left, n fewer to the right</span><span>
</span><span id="line-463"></span><span class="hs-comment">--     ToLeft !Int</span><span>
</span><span id="line-464"></span><span class="hs-comment">--   | -- | all to the right, n fewer to the left</span><span>
</span><span id="line-465"></span><span class="hs-comment">--     ToRight !Int</span><span>
</span><span id="line-466"></span><span class="hs-comment">--   | -- | all to both</span><span>
</span><span id="line-467"></span><span class="hs-comment">--     ToBoth</span><span>
</span><span id="line-468"></span><span class="hs-comment">--   deriving (Eq, Ord, Show, Generic, NFData)</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="hs-comment">-- instance Semigroup SpreadDirection where</span><span>
</span><span id="line-471"></span><span class="hs-comment">--   ToLeft l1 &lt;&gt; ToLeft l2 = ToLeft (l1 + l2)</span><span>
</span><span id="line-472"></span><span class="hs-comment">--   ToRight l1 &lt;&gt; ToRight l2 = ToLeft (l1 + l2)</span><span>
</span><span id="line-473"></span><span class="hs-comment">--   ToLeft l &lt;&gt; ToRight r</span><span>
</span><span id="line-474"></span><span class="hs-comment">--     | l == r = ToBoth</span><span>
</span><span id="line-475"></span><span class="hs-comment">--     | l &lt; r = ToRight (r - l)</span><span>
</span><span id="line-476"></span><span class="hs-comment">--     | otherwise = ToLeft (l - r)</span><span>
</span><span id="line-477"></span><span class="hs-comment">--   ToBoth &lt;&gt; other = other</span><span>
</span><span id="line-478"></span><span class="hs-comment">--   a &lt;&gt; b = b &lt;&gt; a</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="hs-comment">-- instance Monoid SpreadDirection where</span><span>
</span><span id="line-481"></span><span class="hs-comment">--   mempty = ToBoth</span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="annot"><span class="hs-comment">{- | Represents the children of a note that is spread out.

A note can be distributed to either or both sub-slice.
-}</span></span><span>
</span><span id="line-487"></span><span class="hs-keyword">data</span><span> </span><span id="SpreadChildren"><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-var">SpreadChildren</span></a></span></span><span> </span><span id="local-6989586621679465801"><span class="annot"><a href="#local-6989586621679465801"><span class="hs-identifier hs-type">n</span></a></span></span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | a single child in the left slice</span></span><span>
</span><span id="line-489"></span><span>    </span><span id="SpreadLeftChild"><span class="annot"><a href="PVGrammar.html#SpreadLeftChild"><span class="hs-identifier hs-var">SpreadLeftChild</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465801"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | a single child in the right slice</span></span><span>
</span><span id="line-491"></span><span>    </span><span id="SpreadRightChild"><span class="annot"><a href="PVGrammar.html#SpreadRightChild"><span class="hs-identifier hs-var">SpreadRightChild</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465801"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | two children, on in each slice</span></span><span>
</span><span id="line-493"></span><span>    </span><span id="SpreadBothChildren"><span class="annot"><a href="PVGrammar.html#SpreadBothChildren"><span class="hs-identifier hs-var">SpreadBothChildren</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465801"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465801"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679468782"><span id="local-6989586621679468790"><span class="annot"><span class="annottext">SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
(SpreadChildren n -&gt; SpreadChildren n -&gt; Bool)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; Bool)
-&gt; Eq (SpreadChildren n)
forall n. Eq n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
== :: SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
$c/= :: forall n. Eq n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
/= :: SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468798"><span id="local-6989586621679468804"><span id="local-6989586621679468810"><span id="local-6989586621679468814"><span id="local-6989586621679468817"><span id="local-6989586621679468820"><span id="local-6989586621679468823"><span class="annot"><span class="annottext">Eq (SpreadChildren n)
Eq (SpreadChildren n) =&gt;
(SpreadChildren n -&gt; SpreadChildren n -&gt; Ordering)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; Bool)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; Bool)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; Bool)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; Bool)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n)
-&gt; (SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n)
-&gt; Ord (SpreadChildren n)
SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
SpreadChildren n -&gt; SpreadChildren n -&gt; Ordering
SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (SpreadChildren n)
forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Ordering
forall n.
Ord n =&gt;
SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
$ccompare :: forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Ordering
compare :: SpreadChildren n -&gt; SpreadChildren n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
&lt; :: SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
&lt;= :: SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
&gt; :: SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
&gt;= :: SpreadChildren n -&gt; SpreadChildren n -&gt; Bool
$cmax :: forall n.
Ord n =&gt;
SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
max :: SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
$cmin :: forall n.
Ord n =&gt;
SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
min :: SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468826"><span id="local-6989586621679468832"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; SpreadChildren a -&gt; SpreadChildren b)
-&gt; (forall a b. a -&gt; SpreadChildren b -&gt; SpreadChildren a)
-&gt; Functor SpreadChildren
forall a b. a -&gt; SpreadChildren b -&gt; SpreadChildren a
forall a b. (a -&gt; b) -&gt; SpreadChildren a -&gt; SpreadChildren b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; SpreadChildren a -&gt; SpreadChildren b
fmap :: forall a b. (a -&gt; b) -&gt; SpreadChildren a -&gt; SpreadChildren b
$c&lt;$ :: forall a b. a -&gt; SpreadChildren b -&gt; SpreadChildren a
&lt;$ :: forall a b. a -&gt; SpreadChildren b -&gt; SpreadChildren a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468839"><span id="local-6989586621679468845"><span id="local-6989586621679468857"><span id="local-6989586621679468862"><span id="local-6989586621679468868"><span id="local-6989586621679468871"><span id="local-6989586621679468874"><span id="local-6989586621679468877"><span id="local-6989586621679468880"><span id="local-6989586621679468883"><span id="local-6989586621679468886"><span id="local-6989586621679468892"><span id="local-6989586621679468895"><span id="local-6989586621679468900"><span id="local-6989586621679468905"><span id="local-6989586621679468910"><span id="local-6989586621679468915"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; SpreadChildren m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a)
-&gt; (forall a. SpreadChildren a -&gt; [a])
-&gt; (forall a. SpreadChildren a -&gt; Bool)
-&gt; (forall a. SpreadChildren a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; SpreadChildren a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; SpreadChildren a -&gt; a)
-&gt; (forall a. Ord a =&gt; SpreadChildren a -&gt; a)
-&gt; (forall a. Num a =&gt; SpreadChildren a -&gt; a)
-&gt; (forall a. Num a =&gt; SpreadChildren a -&gt; a)
-&gt; Foldable SpreadChildren
forall a. Eq a =&gt; a -&gt; SpreadChildren a -&gt; Bool
forall a. Num a =&gt; SpreadChildren a -&gt; a
forall a. Ord a =&gt; SpreadChildren a -&gt; a
forall m. Monoid m =&gt; SpreadChildren m -&gt; m
forall a. SpreadChildren a -&gt; Bool
forall a. SpreadChildren a -&gt; Int
forall a. SpreadChildren a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; SpreadChildren m -&gt; m
fold :: forall m. Monoid m =&gt; SpreadChildren m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; SpreadChildren a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; SpreadChildren a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; SpreadChildren a -&gt; a
$ctoList :: forall a. SpreadChildren a -&gt; [a]
toList :: forall a. SpreadChildren a -&gt; [a]
$cnull :: forall a. SpreadChildren a -&gt; Bool
null :: forall a. SpreadChildren a -&gt; Bool
$clength :: forall a. SpreadChildren a -&gt; Int
length :: forall a. SpreadChildren a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; SpreadChildren a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; SpreadChildren a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; SpreadChildren a -&gt; a
maximum :: forall a. Ord a =&gt; SpreadChildren a -&gt; a
$cminimum :: forall a. Ord a =&gt; SpreadChildren a -&gt; a
minimum :: forall a. Ord a =&gt; SpreadChildren a -&gt; a
$csum :: forall a. Num a =&gt; SpreadChildren a -&gt; a
sum :: forall a. Num a =&gt; SpreadChildren a -&gt; a
$cproduct :: forall a. Num a =&gt; SpreadChildren a -&gt; a
product :: forall a. Num a =&gt; SpreadChildren a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468924"><span id="local-6989586621679468939"><span id="local-6989586621679468945"><span id="local-6989586621679468950"><span class="annot"><span class="annottext">Functor SpreadChildren
Foldable SpreadChildren
(Functor SpreadChildren, Foldable SpreadChildren) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; SpreadChildren a -&gt; f (SpreadChildren b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    SpreadChildren (f a) -&gt; f (SpreadChildren a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; SpreadChildren a -&gt; m (SpreadChildren b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    SpreadChildren (m a) -&gt; m (SpreadChildren a))
-&gt; Traversable SpreadChildren
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
SpreadChildren (m a) -&gt; m (SpreadChildren a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
SpreadChildren (f a) -&gt; f (SpreadChildren a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; SpreadChildren a -&gt; m (SpreadChildren b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; SpreadChildren a -&gt; f (SpreadChildren b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; SpreadChildren a -&gt; f (SpreadChildren b)
traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; SpreadChildren a -&gt; f (SpreadChildren b)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
SpreadChildren (f a) -&gt; f (SpreadChildren a)
sequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
SpreadChildren (f a) -&gt; f (SpreadChildren a)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; SpreadChildren a -&gt; m (SpreadChildren b)
mapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; SpreadChildren a -&gt; m (SpreadChildren b)
$csequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
SpreadChildren (m a) -&gt; m (SpreadChildren a)
sequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
SpreadChildren (m a) -&gt; m (SpreadChildren a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468955"><span id="local-6989586621679468957"><span class="annot"><span class="annottext">(forall x. SpreadChildren n -&gt; Rep (SpreadChildren n) x)
-&gt; (forall x. Rep (SpreadChildren n) x -&gt; SpreadChildren n)
-&gt; Generic (SpreadChildren n)
forall x. Rep (SpreadChildren n) x -&gt; SpreadChildren n
forall x. SpreadChildren n -&gt; Rep (SpreadChildren n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (SpreadChildren n) x -&gt; SpreadChildren n
forall n x. SpreadChildren n -&gt; Rep (SpreadChildren n) x
$cfrom :: forall n x. SpreadChildren n -&gt; Rep (SpreadChildren n) x
from :: forall x. SpreadChildren n -&gt; Rep (SpreadChildren n) x
$cto :: forall n x. Rep (SpreadChildren n) x -&gt; SpreadChildren n
to :: forall x. Rep (SpreadChildren n) x -&gt; SpreadChildren n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468961"><span class="annot"><span class="annottext">SpreadChildren n -&gt; ()
(SpreadChildren n -&gt; ()) -&gt; NFData (SpreadChildren n)
forall n. NFData n =&gt; SpreadChildren n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; SpreadChildren n -&gt; ()
rnf :: SpreadChildren n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679468981"><span id="local-6989586621679468988"><span class="annot"><span class="annottext">Eq (SpreadChildren n)
Eq (SpreadChildren n) =&gt;
(Int -&gt; SpreadChildren n -&gt; Int)
-&gt; (SpreadChildren n -&gt; Int) -&gt; Hashable (SpreadChildren n)
Int -&gt; SpreadChildren n -&gt; Int
SpreadChildren n -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall n. Hashable n =&gt; Eq (SpreadChildren n)
forall n. Hashable n =&gt; Int -&gt; SpreadChildren n -&gt; Int
forall n. Hashable n =&gt; SpreadChildren n -&gt; Int
$chashWithSalt :: forall n. Hashable n =&gt; Int -&gt; SpreadChildren n -&gt; Int
hashWithSalt :: Int -&gt; SpreadChildren n -&gt; Int
$chash :: forall n. Hashable n =&gt; SpreadChildren n -&gt; Int
hash :: SpreadChildren n -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465798"><span id="local-6989586621679469004"><span id="local-6989586621679469009"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465798"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-type">SpreadChildren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465798"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>  </span><span id="local-6989586621679469023"><span class="annot"><span class="annottext">show :: SpreadChildren n -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadLeftChild"><span class="hs-identifier hs-type">SpreadLeftChild</span></a></span><span> </span><span id="local-6989586621679469024"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469024"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469024"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9496;&quot;</span></span><span>
</span><span id="line-498"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadRightChild"><span class="hs-identifier hs-type">SpreadRightChild</span></a></span><span> </span><span id="local-6989586621679469025"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469025"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9492;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469025"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-499"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadBothChildren"><span class="hs-identifier hs-type">SpreadBothChildren</span></a></span><span> </span><span id="local-6989586621679469026"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469026"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621679469027"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469027"><span class="hs-identifier hs-var">nr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469026"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9524;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469027"><span class="hs-identifier hs-var">nr</span></a></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465800"><span id="local-6989586621679469031"><span id="local-6989586621679469035"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465800"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-type">SpreadChildren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465800"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-502"></span><span>  </span><span id="local-6989586621679469060"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (SpreadChildren n)
</span><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (SpreadChildren n))
-&gt; Value
-&gt; Parser (SpreadChildren n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SpreadChild&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (SpreadChildren n))
 -&gt; Value -&gt; Parser (SpreadChildren n))
-&gt; (Object -&gt; Parser (SpreadChildren n))
-&gt; Value
-&gt; Parser (SpreadChildren n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679469061"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469061"><span class="hs-identifier hs-var">cld</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-503"></span><span>    </span><span id="local-6989586621679469062"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469062"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469061"><span class="hs-identifier hs-var">cld</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469062"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-505"></span><span>      </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;leftChild&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; SpreadChildren n)
-&gt; Parser (Note n) -&gt; Parser (SpreadChildren n)
forall a b. (a -&gt; b) -&gt; Parser a -&gt; Parser b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; SpreadChildren n
forall n. Note n -&gt; SpreadChildren n
</span><a href="PVGrammar.html#SpreadLeftChild"><span class="hs-identifier hs-var">SpreadLeftChild</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser (Note n) -&gt; Parser (SpreadChildren n))
-&gt; Parser (Note n) -&gt; Parser (SpreadChildren n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469061"><span class="hs-identifier hs-var">cld</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser (Note n)) -&gt; Parser (Note n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-comment">-- pure $ ToLeft 1</span><span>
</span><span id="line-506"></span><span>      </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;rightChild&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; SpreadChildren n)
-&gt; Parser (Note n) -&gt; Parser (SpreadChildren n)
forall a b. (a -&gt; b) -&gt; Parser a -&gt; Parser b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Note n -&gt; SpreadChildren n
forall n. Note n -&gt; SpreadChildren n
</span><a href="PVGrammar.html#SpreadRightChild"><span class="hs-identifier hs-var">SpreadRightChild</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser (Note n) -&gt; Parser (SpreadChildren n))
-&gt; Parser (Note n) -&gt; Parser (SpreadChildren n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469061"><span class="hs-identifier hs-var">cld</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser (Note n)) -&gt; Parser (Note n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-comment">-- pure $ ToRight 1</span><span>
</span><span id="line-507"></span><span>      </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;bothChildren&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469061"><span class="hs-identifier hs-var">cld</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser (SpreadChildren n))
-&gt; Parser (SpreadChildren n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (SpreadChildren n)
</span><a href="#local-6989586621679469063"><span class="hs-identifier hs-var">parseBoth</span></a></span><span> </span><span class="hs-comment">-- pure ToBoth</span><span>
</span><span id="line-508"></span><span>      </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (SpreadChildren n)
forall a. Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.unexpected</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469062"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-509"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-510"></span><span>    </span><span id="local-6989586621679469063"><span class="annot"><span class="annottext">parseBoth :: Value -&gt; Parser (SpreadChildren n)
</span><a href="#local-6989586621679469063"><span class="hs-identifier hs-var hs-var">parseBoth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (SpreadChildren n))
-&gt; Value
-&gt; Parser (SpreadChildren n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SpreadBothChildren&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (SpreadChildren n))
 -&gt; Value -&gt; Parser (SpreadChildren n))
-&gt; (Object -&gt; Parser (SpreadChildren n))
-&gt; Value
-&gt; Parser (SpreadChildren n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679469076"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469076"><span class="hs-identifier hs-var">bth</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>      </span><span id="local-6989586621679469077"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469077"><span class="hs-identifier hs-var">left</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469076"><span class="hs-identifier hs-var">bth</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;left&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser (Note n)) -&gt; Parser (Note n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span>
</span><span id="line-512"></span><span>      </span><span id="local-6989586621679469078"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469078"><span class="hs-identifier hs-var">right</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469076"><span class="hs-identifier hs-var">bth</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;right&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser (Note n)) -&gt; Parser (Note n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span>
</span><span id="line-513"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Note n -&gt; SpreadChildren n
forall n. Note n -&gt; Note n -&gt; SpreadChildren n
</span><a href="PVGrammar.html#SpreadBothChildren"><span class="hs-identifier hs-var">SpreadBothChildren</span></a></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469077"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469078"><span class="hs-identifier hs-var">right</span></a></span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465804"><span id="local-6989586621679469082"><span id="local-6989586621679469086"><span id="local-6989586621679469089"><span id="local-6989586621679469092"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465804"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-type">SpreadChildren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465804"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-516"></span><span>  </span><span id="local-6989586621679469121"><span class="annot"><span class="annottext">toJSON :: SpreadChildren n -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadLeftChild"><span class="hs-identifier hs-type">SpreadLeftChild</span></a></span><span> </span><span id="local-6989586621679469122"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469122"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;leftChild&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Note n -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469122"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-517"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadRightChild"><span class="hs-identifier hs-type">SpreadRightChild</span></a></span><span> </span><span id="local-6989586621679469123"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469123"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rightChild&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Note n -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469123"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-518"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadBothChildren"><span class="hs-identifier hs-type">SpreadBothChildren</span></a></span><span> </span><span id="local-6989586621679469124"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469124"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621679469125"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469125"><span class="hs-identifier hs-var">nr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-519"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-520"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bothChildren&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;left&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Note n -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469124"><span class="hs-identifier hs-var">nl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;right&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Note n -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469125"><span class="hs-identifier hs-var">nr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-522"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="annot"><span class="hs-comment">-- | Returns the left child of a spread note, if it exists</span></span><span>
</span><span id="line-525"></span><span id="local-6989586621679465805"><span class="annot"><a href="PVGrammar.html#leftSpreadChild"><span class="hs-identifier hs-type">leftSpreadChild</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-type">SpreadChildren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465805"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465805"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-526"></span><span id="leftSpreadChild"><span class="annot"><span class="annottext">leftSpreadChild :: forall n. SpreadChildren n -&gt; Maybe (Note n)
</span><a href="PVGrammar.html#leftSpreadChild"><span class="hs-identifier hs-var hs-var">leftSpreadChild</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-527"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadLeftChild"><span class="hs-identifier hs-type">SpreadLeftChild</span></a></span><span> </span><span id="local-6989586621679469126"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469126"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Maybe (Note n)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469126"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-528"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadBothChildren"><span class="hs-identifier hs-type">SpreadBothChildren</span></a></span><span> </span><span id="local-6989586621679469127"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469127"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Maybe (Note n)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469127"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-529"></span><span>  </span><span class="annot"><span class="annottext">SpreadChildren n
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Note n)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span class="annot"><span class="hs-comment">-- | Returns the right child of a spread note, if it exists</span></span><span>
</span><span id="line-532"></span><span id="local-6989586621679469128"><span class="annot"><a href="PVGrammar.html#rightSpreadChild"><span class="hs-identifier hs-type">rightSpreadChild</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-type">SpreadChildren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469128"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469128"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-533"></span><span id="rightSpreadChild"><span class="annot"><span class="annottext">rightSpreadChild :: forall n. SpreadChildren n -&gt; Maybe (Note n)
</span><a href="PVGrammar.html#rightSpreadChild"><span class="hs-identifier hs-var hs-var">rightSpreadChild</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadRightChild"><span class="hs-identifier hs-type">SpreadRightChild</span></a></span><span> </span><span id="local-6989586621679469129"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469129"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Maybe (Note n)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469129"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadBothChildren"><span class="hs-identifier hs-type">SpreadBothChildren</span></a></span><span> </span><span class="annot"><span class="annottext">Note n
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679469130"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469130"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; Maybe (Note n)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469130"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-536"></span><span>  </span><span class="annot"><span class="annottext">SpreadChildren n
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Note n)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="annot"><span class="hs-comment">{- | Represents a spread operation.
 Records for every pitch how it is distributed (see 'SpreadDirection').
 The resulting edges (repetitions and passing edges) are represented in a child transition.
-}</span></span><span>
</span><span id="line-542"></span><span class="hs-keyword">data</span><span> </span><span id="Spread"><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-var">Spread</span></a></span></span><span> </span><span id="local-6989586621679465834"><span class="annot"><a href="#local-6989586621679465834"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SpreadOp"><span class="annot"><a href="PVGrammar.html#SpreadOp"><span class="hs-identifier hs-var">SpreadOp</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HM.HashMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465834"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadChildren"><span class="hs-identifier hs-type">SpreadChildren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465834"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465834"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469134"><span id="local-6989586621679469141"><span class="annot"><span class="annottext">Spread n -&gt; Spread n -&gt; Bool
(Spread n -&gt; Spread n -&gt; Bool)
-&gt; (Spread n -&gt; Spread n -&gt; Bool) -&gt; Eq (Spread n)
forall n. Eq n =&gt; Spread n -&gt; Spread n -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall n. Eq n =&gt; Spread n -&gt; Spread n -&gt; Bool
== :: Spread n -&gt; Spread n -&gt; Bool
$c/= :: forall n. Eq n =&gt; Spread n -&gt; Spread n -&gt; Bool
/= :: Spread n -&gt; Spread n -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469149"><span id="local-6989586621679469156"><span id="local-6989586621679469162"><span id="local-6989586621679469166"><span id="local-6989586621679469169"><span id="local-6989586621679469172"><span id="local-6989586621679469175"><span class="annot"><span class="annottext">Eq (Spread n)
Eq (Spread n) =&gt;
(Spread n -&gt; Spread n -&gt; Ordering)
-&gt; (Spread n -&gt; Spread n -&gt; Bool)
-&gt; (Spread n -&gt; Spread n -&gt; Bool)
-&gt; (Spread n -&gt; Spread n -&gt; Bool)
-&gt; (Spread n -&gt; Spread n -&gt; Bool)
-&gt; (Spread n -&gt; Spread n -&gt; Spread n)
-&gt; (Spread n -&gt; Spread n -&gt; Spread n)
-&gt; Ord (Spread n)
Spread n -&gt; Spread n -&gt; Bool
Spread n -&gt; Spread n -&gt; Ordering
Spread n -&gt; Spread n -&gt; Spread n
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall n. Ord n =&gt; Eq (Spread n)
forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Bool
forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Ordering
forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Spread n
$ccompare :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Ordering
compare :: Spread n -&gt; Spread n -&gt; Ordering
$c&lt; :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Bool
&lt; :: Spread n -&gt; Spread n -&gt; Bool
$c&lt;= :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Bool
&lt;= :: Spread n -&gt; Spread n -&gt; Bool
$c&gt; :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Bool
&gt; :: Spread n -&gt; Spread n -&gt; Bool
$c&gt;= :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Bool
&gt;= :: Spread n -&gt; Spread n -&gt; Bool
$cmax :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Spread n
max :: Spread n -&gt; Spread n -&gt; Spread n
$cmin :: forall n. Ord n =&gt; Spread n -&gt; Spread n -&gt; Spread n
min :: Spread n -&gt; Spread n -&gt; Spread n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469178"><span id="local-6989586621679469180"><span class="annot"><span class="annottext">(forall x. Spread n -&gt; Rep (Spread n) x)
-&gt; (forall x. Rep (Spread n) x -&gt; Spread n) -&gt; Generic (Spread n)
forall x. Rep (Spread n) x -&gt; Spread n
forall x. Spread n -&gt; Rep (Spread n) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall n x. Rep (Spread n) x -&gt; Spread n
forall n x. Spread n -&gt; Rep (Spread n) x
$cfrom :: forall n x. Spread n -&gt; Rep (Spread n) x
from :: forall x. Spread n -&gt; Rep (Spread n) x
$cto :: forall n x. Rep (Spread n) x -&gt; Spread n
to :: forall x. Rep (Spread n) x -&gt; Spread n
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469184"><span class="annot"><span class="annottext">Spread n -&gt; ()
(Spread n -&gt; ()) -&gt; NFData (Spread n)
forall n. NFData n =&gt; Spread n -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall n. NFData n =&gt; Spread n -&gt; ()
rnf :: Spread n -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469206"><span id="local-6989586621679469213"><span class="annot"><span class="annottext">Eq (Spread n)
Eq (Spread n) =&gt;
(Int -&gt; Spread n -&gt; Int)
-&gt; (Spread n -&gt; Int) -&gt; Hashable (Spread n)
Int -&gt; Spread n -&gt; Int
Spread n -&gt; Int
forall a. Eq a =&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall n. Hashable n =&gt; Eq (Spread n)
forall n. Hashable n =&gt; Int -&gt; Spread n -&gt; Int
forall n. Hashable n =&gt; Spread n -&gt; Int
$chashWithSalt :: forall n. Hashable n =&gt; Int -&gt; Spread n -&gt; Int
hashWithSalt :: Int -&gt; Spread n -&gt; Int
$chash :: forall n. Hashable n =&gt; Spread n -&gt; Int
hash :: Spread n -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465828"><span id="local-6989586621679469228"><span id="local-6989586621679469233"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465828"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465828"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-546"></span><span>  </span><span id="local-6989586621679469243"><span class="annot"><span class="annottext">show :: Spread n -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadOp"><span class="hs-identifier hs-type">SpreadOp</span></a></span><span> </span><span id="local-6989586621679469244"><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n)
</span><a href="#local-6989586621679469244"><span class="hs-identifier hs-var">dist</span></a></span></span><span> </span><span id="local-6989586621679469245"><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469245"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679469246"><span class="hs-identifier hs-var">dists</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;} =&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Edges n -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469245"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-547"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-548"></span><span>    </span><span id="local-6989586621679469246"><span class="annot"><span class="annottext">dists :: [String]
</span><a href="#local-6989586621679469246"><span class="hs-identifier hs-var hs-var">dists</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Note n, SpreadChildren n) -&gt; String
forall {a} {a}. (Show a, Show a) =&gt; (a, a) -&gt; String
</span><a href="#local-6989586621679469251"><span class="hs-identifier hs-var">showDist</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n, SpreadChildren n) -&gt; String)
-&gt; [(Note n, SpreadChildren n)] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n) -&gt; [(Note n, SpreadChildren n)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HM.toList</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n)
</span><a href="#local-6989586621679469244"><span class="hs-identifier hs-var">dist</span></a></span><span>
</span><span id="line-549"></span><span>    </span><span id="local-6989586621679469251"><span class="annot"><span class="annottext">showDist :: (a, a) -&gt; String
</span><a href="#local-6989586621679469251"><span class="hs-identifier hs-var hs-var">showDist</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469261"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469261"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469262"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469262"><span class="hs-identifier hs-var">to</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469261"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469262"><span class="hs-identifier hs-var">to</span></a></span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465229"><span id="local-6989586621679469268"><span id="local-6989586621679469271"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465229"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465229"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465229"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465229"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-552"></span><span>  </span><span id="local-6989586621679469285"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Spread n)
</span><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Spread n)) -&gt; Value -&gt; Parser (Spread n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Spread&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Spread n)) -&gt; Value -&gt; Parser (Spread n))
-&gt; (Object -&gt; Parser (Spread n)) -&gt; Value -&gt; Parser (Spread n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679469286"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469286"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-553"></span><span>    </span><span id="local-6989586621679469287"><span class="annot"><span class="annottext">[(Note n, SpreadChildren n)]
</span><a href="#local-6989586621679469287"><span class="hs-identifier hs-var">dists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469286"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;children&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser [Value]
-&gt; ([Value] -&gt; Parser [(Note n, SpreadChildren n)])
-&gt; Parser [(Note n, SpreadChildren n)]
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n, SpreadChildren n))
-&gt; [Value] -&gt; Parser [(Note n, SpreadChildren n)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n, SpreadChildren n)
</span><a href="#local-6989586621679469288"><span class="hs-identifier hs-var">parseDist</span></a></span><span>
</span><span id="line-554"></span><span>    </span><span id="local-6989586621679469289"><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469289"><span class="hs-identifier hs-var">edges</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469286"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (Edges n)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;midEdges&quot;</span></span><span>
</span><span id="line-555"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n) -&gt; Edges n -&gt; Spread n
forall n.
HashMap (Note n) (SpreadChildren n) -&gt; Edges n -&gt; Spread n
</span><a href="PVGrammar.html#SpreadOp"><span class="hs-identifier hs-var">SpreadOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n)
-&gt; [(Note n, SpreadChildren n)]
-&gt; HashMap (Note n) (SpreadChildren n)
forall k v.
(Eq k, Hashable k) =&gt;
(v -&gt; v -&gt; v) -&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HM.fromListWith</span></span><span> </span><span class="annot"><span class="annottext">SpreadChildren n -&gt; SpreadChildren n -&gt; SpreadChildren n
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">[(Note n, SpreadChildren n)]
</span><a href="#local-6989586621679469287"><span class="hs-identifier hs-var">dists</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469289"><span class="hs-identifier hs-var">edges</span></a></span><span>
</span><span id="line-556"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-557"></span><span>    </span><span id="local-6989586621679469288"><span class="annot"><span class="annottext">parseDist :: Value -&gt; Parser (Note n, SpreadChildren n)
</span><a href="#local-6989586621679469288"><span class="hs-identifier hs-var hs-var">parseDist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Note n, SpreadChildren n))
-&gt; Value
-&gt; Parser (Note n, SpreadChildren n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SpreadDist&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Note n, SpreadChildren n))
 -&gt; Value -&gt; Parser (Note n, SpreadChildren n))
-&gt; (Object -&gt; Parser (Note n, SpreadChildren n))
-&gt; Value
-&gt; Parser (Note n, SpreadChildren n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679469302"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469302"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-558"></span><span>      </span><span id="local-6989586621679469303"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469303"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469302"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value -&gt; (Value -&gt; Parser (Note n)) -&gt; Parser (Note n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span>
</span><span id="line-559"></span><span>      </span><span id="local-6989586621679469304"><span class="annot"><span class="annottext">SpreadChildren n
</span><a href="#local-6989586621679469304"><span class="hs-identifier hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469302"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser (SpreadChildren n))
-&gt; Parser (SpreadChildren n)
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (SpreadChildren n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span>
</span><span id="line-560"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469303"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SpreadChildren n
</span><a href="#local-6989586621679469304"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679465840"><span id="local-6989586621679469308"><span id="local-6989586621679469312"><span id="local-6989586621679469315"><span id="local-6989586621679469318"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465840"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465840"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-563"></span><span>  </span><span id="local-6989586621679469332"><span class="annot"><span class="annottext">toJSON :: Spread n -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadOp"><span class="hs-identifier hs-type">SpreadOp</span></a></span><span> </span><span id="local-6989586621679469333"><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n)
</span><a href="#local-6989586621679469333"><span class="hs-identifier hs-var">dists</span></a></span></span><span> </span><span id="local-6989586621679469334"><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469334"><span class="hs-identifier hs-var">edges</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-564"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-565"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;children&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Value] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">((Note n, SpreadChildren n) -&gt; Value)
-&gt; [(Note n, SpreadChildren n)] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Note n, SpreadChildren n) -&gt; Value
forall {v} {v}. (ToJSON v, ToJSON v) =&gt; (v, v) -&gt; Value
</span><a href="#local-6989586621679469335"><span class="hs-identifier hs-var">distToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n) -&gt; [(Note n, SpreadChildren n)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HM.toList</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n)
</span><a href="#local-6989586621679469333"><span class="hs-identifier hs-var">dists</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;midEdges&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Edges n -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469334"><span class="hs-identifier hs-var">edges</span></a></span><span>
</span><span id="line-567"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-568"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-569"></span><span>    </span><span id="local-6989586621679469335"><span class="annot"><span class="annottext">distToJSON :: (v, v) -&gt; Value
</span><a href="#local-6989586621679469335"><span class="hs-identifier hs-var hs-var">distToJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469346"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679469346"><span class="hs-identifier hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469347"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679469347"><span class="hs-identifier hs-var">child</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; v -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679469346"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; v -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679469347"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="annot"><span class="hs-comment">-- | 'Leftmost' specialized to the split, freeze, and spread operations of the grammar.</span></span><span>
</span><span id="line-572"></span><span class="hs-keyword">type</span><span> </span><span id="PVLeftmost"><span class="annot"><a href="PVGrammar.html#PVLeftmost"><span class="hs-identifier hs-var">PVLeftmost</span></a></span></span><span> </span><span id="local-6989586621679469348"><span class="annot"><a href="#local-6989586621679469348"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Common.html#Leftmost"><span class="hs-identifier hs-type">Leftmost</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469348"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469348"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469348"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="hs-comment">-- helpers</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- =======</span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span class="hs-comment">-- -- | Helper: parses a note's pitch from JSON.</span><span>
</span><span id="line-578"></span><span class="hs-comment">-- parseJSONNote :: (Notation n) =&gt; Aeson.Value -&gt; Aeson.Parser (Note n)</span><span>
</span><span id="line-579"></span><span class="hs-comment">-- parseJSONNote = _</span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span class="annot"><span class="hs-comment">-- | Helper: parses an edge from JSON.</span></span><span>
</span><span id="line-582"></span><span id="local-6989586621679465551"><span class="annot"><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-type">parseEdge</span></a></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465551"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#StartStop"><span class="hs-identifier hs-type">StartStop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465551"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Common.html#StartStop"><span class="hs-identifier hs-type">StartStop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465551"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-584"></span><span id="parseEdge"><span class="annot"><span class="annottext">parseEdge :: forall n.
Notation n =&gt;
Value -&gt; Parser (StartStop (Note n), StartStop (Note n))
</span><a href="PVGrammar.html#parseEdge"><span class="hs-identifier hs-var hs-var">parseEdge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (StartStop (Note n), StartStop (Note n)))
-&gt; Value
-&gt; Parser (StartStop (Note n), StartStop (Note n))
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Edge&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (StartStop (Note n), StartStop (Note n)))
 -&gt; Value -&gt; Parser (StartStop (Note n), StartStop (Note n)))
-&gt; (Object -&gt; Parser (StartStop (Note n), StartStop (Note n)))
-&gt; Value
-&gt; Parser (StartStop (Note n), StartStop (Note n))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679469367"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469367"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-585"></span><span>  </span><span id="local-6989586621679469368"><span class="annot"><span class="annottext">StartStop (Note n)
</span><a href="#local-6989586621679469368"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469367"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (StartStop Value)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;left&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (StartStop Value)
-&gt; (StartStop Value -&gt; Parser (StartStop (Note n)))
-&gt; Parser (StartStop (Note n))
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n))
-&gt; StartStop Value -&gt; Parser (StartStop (Note n))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; StartStop a -&gt; m (StartStop b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-comment">-- TODO: this might be broken wrt. StartStop</span><span>
</span><span id="line-586"></span><span>  </span><span id="local-6989586621679469369"><span class="annot"><span class="annottext">StartStop (Note n)
</span><a href="#local-6989586621679469369"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469367"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (StartStop Value)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;right&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (StartStop Value)
-&gt; (StartStop Value -&gt; Parser (StartStop (Note n)))
-&gt; Parser (StartStop (Note n))
forall a b. Parser a -&gt; (a -&gt; Parser b) -&gt; Parser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Note n))
-&gt; StartStop Value -&gt; Parser (StartStop (Note n))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; StartStop a -&gt; m (StartStop b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StartStop (Note n)
</span><a href="#local-6989586621679469368"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StartStop (Note n)
</span><a href="#local-6989586621679469369"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span class="annot"><span class="hs-comment">-- | Helper: parses an inner edge from JSON</span></span><span>
</span><span id="line-590"></span><span id="local-6989586621679465552"><span class="annot"><a href="PVGrammar.html#parseInnerEdge"><span class="hs-identifier hs-type">parseInnerEdge</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Notation</span></span><span> </span><span class="annot"><a href="#local-6989586621679465552"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465552"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465552"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-591"></span><span id="parseInnerEdge"><span class="annot"><span class="annottext">parseInnerEdge :: forall n. Notation n =&gt; Value -&gt; Parser (Note n, Note n)
</span><a href="PVGrammar.html#parseInnerEdge"><span class="hs-identifier hs-var hs-var">parseInnerEdge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Note n, Note n))
-&gt; Value
-&gt; Parser (Note n, Note n)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;InnerEdge&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (Note n, Note n))
 -&gt; Value -&gt; Parser (Note n, Note n))
-&gt; (Object -&gt; Parser (Note n, Note n))
-&gt; Value
-&gt; Parser (Note n, Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679469384"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469384"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-592"></span><span>  </span><span id="local-6989586621679469385"><span class="annot"><span class="annottext">StartStop Value
</span><a href="#local-6989586621679469385"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469384"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (StartStop Value)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;left&quot;</span></span><span>
</span><span id="line-593"></span><span>  </span><span id="local-6989586621679469386"><span class="annot"><span class="annottext">StartStop Value
</span><a href="#local-6989586621679469386"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679469384"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser (StartStop Value)
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;right&quot;</span></span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StartStop Value
</span><a href="#local-6989586621679469385"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StartStop Value
</span><a href="#local-6989586621679469386"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Inner"><span class="hs-identifier hs-type">Inner</span></a></span><span> </span><span id="local-6989586621679469387"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469387"><span class="hs-identifier hs-var">il</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Common.html#Inner"><span class="hs-identifier hs-type">Inner</span></a></span><span> </span><span id="local-6989586621679469388"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469388"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-596"></span><span>      </span><span id="local-6989586621679469389"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469389"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469387"><span class="hs-identifier hs-var">il</span></a></span><span>
</span><span id="line-597"></span><span>      </span><span id="local-6989586621679469390"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469390"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Note n)
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679469388"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-598"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469389"><span class="hs-identifier hs-var">pl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469390"><span class="hs-identifier hs-var">pr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><span class="annottext">(StartStop Value, StartStop Value)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser (Note n, Note n)
forall a. String -&gt; Parser a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Edge is not an inner edge&quot;</span></span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span id="local-6989586621679465558"><span class="annot"><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-type">edgeToJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679465558"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465558"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465558"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span></span><span>
</span><span id="line-602"></span><span id="edgeToJSON"><span class="annot"><span class="annottext">edgeToJSON :: forall a. ToJSON a =&gt; (a, a) -&gt; Value
</span><a href="PVGrammar.html#edgeToJSON"><span class="hs-identifier hs-var hs-var">edgeToJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469400"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469400"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469401"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469401"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;left&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; a -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469400"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;right&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; a -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469401"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-comment">-- edgeToEncoding :: (ToJSON a) =&gt; (a, a) -&gt; Aeson.Encoding</span><span>
</span><span id="line-605"></span><span class="hs-comment">-- edgeToEncoding (l, r) = Aeson.pairs $ (&quot;left&quot; .= l) &lt;&gt; (&quot;right&quot; .= r)</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="annot"><span class="hs-comment">-- | An 'Analysis' specialized to PV types.</span></span><span>
</span><span id="line-608"></span><span class="hs-keyword">type</span><span> </span><span id="PVAnalysis"><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-var">PVAnalysis</span></a></span></span><span> </span><span id="local-6989586621679469403"><span class="annot"><a href="#local-6989586621679469403"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Common.html#Analysis"><span class="hs-identifier hs-type">Analysis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469403"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469403"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469403"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469403"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679469403"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span class="annot"><span class="hs-comment">{- | Loads an analysis from a JSON file
 (as exported by the annotation tool).
-}</span></span><span>
</span><span id="line-613"></span><span class="annot"><a href="PVGrammar.html#loadAnalysis"><span class="hs-identifier hs-type">loadAnalysis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-type">PVAnalysis</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPitch</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-614"></span><span id="loadAnalysis"><span class="annot"><span class="annottext">loadAnalysis :: String -&gt; IO (Either String (PVAnalysis SPitch))
</span><a href="PVGrammar.html#loadAnalysis"><span class="hs-identifier hs-var hs-var">loadAnalysis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Either String (PVAnalysis SPitch))
forall a. FromJSON a =&gt; String -&gt; IO (Either String a)
</span><span class="hs-identifier hs-var">Aeson.eitherDecodeFileStrict</span></span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="annot"><span class="hs-comment">{- | Loads an analysis from a JSON file
 (as exported by the annotation tool).
 Converts all pitches to pitch classes.
-}</span></span><span>
</span><span id="line-620"></span><span class="annot"><a href="PVGrammar.html#loadAnalysis%27"><span class="hs-identifier hs-type">loadAnalysis'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-type">PVAnalysis</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPC</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span id="loadAnalysis%27"><span class="annot"><span class="annottext">loadAnalysis' :: String -&gt; IO (Either String (PVAnalysis SPC))
</span><a href="PVGrammar.html#loadAnalysis%27"><span class="hs-identifier hs-var hs-var">loadAnalysis'</span></a></span></span><span> </span><span id="local-6989586621679469406"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469406"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PVAnalysis SPitch -&gt; PVAnalysis SPC)
-&gt; Either String (PVAnalysis SPitch)
-&gt; Either String (PVAnalysis SPC)
forall a b. (a -&gt; b) -&gt; Either String a -&gt; Either String b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SPitch -&gt; SPC) -&gt; PVAnalysis SPitch -&gt; PVAnalysis SPC
forall n' n.
(Eq n', Hashable n', Ord n') =&gt;
(n -&gt; n') -&gt; PVAnalysis n -&gt; PVAnalysis n'
</span><a href="PVGrammar.html#analysisMapPitch"><span class="hs-identifier hs-var">analysisMapPitch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p. Interval p =&gt; Pitch p -&gt; Pitch (ICOf p)
</span><span class="hs-identifier hs-var">pc</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">SInterval</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either String (PVAnalysis SPitch)
 -&gt; Either String (PVAnalysis SPC))
-&gt; IO (Either String (PVAnalysis SPitch))
-&gt; IO (Either String (PVAnalysis SPC))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Either String (PVAnalysis SPitch))
</span><a href="PVGrammar.html#loadAnalysis"><span class="hs-identifier hs-var">loadAnalysis</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469406"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span class="annot"><span class="hs-comment">{- | Loads a MusicXML file and returns a list of salami slices.
 Each note is expressed as a pitch and a flag that indicates
 whether the note continues in the next slice.
-}</span></span><span>
</span><span id="line-627"></span><span class="annot"><a href="PVGrammar.html#slicesFromFile"><span class="hs-identifier hs-type">slicesFromFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPitch</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Music.RightTied</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-628"></span><span id="slicesFromFile"><span class="annot"><span class="annottext">slicesFromFile :: String -&gt; IO [[(Note SPitch, RightTied)]]
</span><a href="PVGrammar.html#slicesFromFile"><span class="hs-identifier hs-var hs-var">slicesFromFile</span></a></span></span><span> </span><span id="local-6989586621679469407"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469407"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-629"></span><span>  </span><span id="local-6989586621679469408"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679469408"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Text
</span><span class="hs-identifier hs-var">TL.readFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469407"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Text -&gt; Maybe Document
</span><span class="hs-identifier hs-var">MusicXML.parseWithIds</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679469408"><span class="hs-identifier hs-var">txt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-631"></span><span>    </span><span class="annot"><span class="annottext">Maybe Document
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[[(Note SPitch, RightTied)]] -&gt; IO [[(Note SPitch, RightTied)]]
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-632"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679469411"><span class="annot"><span class="annottext">Document
</span><a href="#local-6989586621679469411"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-633"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469412"><span class="annot"><span class="annottext">[XmlNote]
</span><a href="#local-6989586621679469412"><span class="hs-identifier hs-var">xmlNotes</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[[(Ratio Int, TimeSignature)]]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Document -&gt; ([XmlNote], [[(Ratio Int, TimeSignature)]])
</span><span class="hs-identifier hs-var">MusicXML.parseScore</span></span><span> </span><span class="annot"><span class="annottext">Document
</span><a href="#local-6989586621679469411"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-634"></span><span>          </span><span id="local-6989586621679469415"><span class="annot"><span class="annottext">notes :: [NoteId SInterval (Ratio Int) (Maybe String)]
</span><a href="#local-6989586621679469415"><span class="hs-identifier hs-var hs-var">notes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XmlNote -&gt; NoteId SInterval (Ratio Int) (Maybe String)
</span><span class="hs-identifier hs-var">MusicXML.asNoteWithIdHeard</span></span><span> </span><span class="annot"><span class="annottext">(XmlNote -&gt; NoteId SInterval (Ratio Int) (Maybe String))
-&gt; [XmlNote] -&gt; [NoteId SInterval (Ratio Int) (Maybe String)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[XmlNote]
</span><a href="#local-6989586621679469412"><span class="hs-identifier hs-var">xmlNotes</span></a></span><span>
</span><span id="line-635"></span><span>          </span><span id="local-6989586621679469437"><span class="annot"><span class="annottext">slices :: [[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]]
</span><a href="#local-6989586621679469437"><span class="hs-identifier hs-var hs-var">slices</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Slicer
  (NoteId SInterval (Ratio Int) (Maybe String))
  (TimeOf (NoteId SInterval (Ratio Int) (Maybe String)))
  ([NoteId SInterval (Ratio Int) (Maybe String)],
   [NoteId SInterval (Ratio Int) (Maybe String)])
  [(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
-&gt; [NoteId SInterval (Ratio Int) (Maybe String)]
-&gt; [[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]]
forall (f :: * -&gt; *) n st s.
(Foldable f, HasTime n) =&gt;
Slicer n (TimeOf n) st s -&gt; f n -&gt; [s]
</span><span class="hs-identifier hs-var">Music.slicePiece</span></span><span> </span><span class="annot"><span class="annottext">Slicer
  (NoteId SInterval (Ratio Int) (Maybe String))
  (Ratio Int)
  ([NoteId SInterval (Ratio Int) (Maybe String)],
   [NoteId SInterval (Ratio Int) (Maybe String)])
  [(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
Slicer
  (NoteId SInterval (Ratio Int) (Maybe String))
  (TimeOf (NoteId SInterval (Ratio Int) (Maybe String)))
  ([NoteId SInterval (Ratio Int) (Maybe String)],
   [NoteId SInterval (Ratio Int) (Maybe String)])
  [(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
forall a t. Eq a =&gt; Slicer a t ([a], [a]) [(a, Tied)]
</span><span class="hs-identifier hs-var">Music.tiedSlicer</span></span><span> </span><span class="annot"><span class="annottext">[NoteId SInterval (Ratio Int) (Maybe String)]
</span><a href="#local-6989586621679469415"><span class="hs-identifier hs-var">notes</span></a></span><span>
</span><span id="line-636"></span><span>      </span><span class="annot"><span class="annottext">[[(Note SPitch, RightTied)]] -&gt; IO [[(Note SPitch, RightTied)]]
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([[(Note SPitch, RightTied)]] -&gt; IO [[(Note SPitch, RightTied)]])
-&gt; [[(Note SPitch, RightTied)]] -&gt; IO [[(Note SPitch, RightTied)]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
-&gt; [(Note
       (Pitch (IntervalOf (NoteId SInterval (Ratio Int) (Maybe String)))),
     RightTied)]
[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
-&gt; [(Note SPitch, RightTied)]
forall {i} {f :: * -&gt; *}.
(IdOf i ~ Maybe String, Functor f, HasPitch i, Identifiable i) =&gt;
f (i, Tied) -&gt; f (Note (Pitch (IntervalOf i)), RightTied)
</span><a href="#local-6989586621679469440"><span class="hs-identifier hs-var">mkSlice</span></a></span><span> </span><span class="annot"><span class="annottext">([(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
 -&gt; [(Note SPitch, RightTied)])
-&gt; [[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]]
-&gt; [[(Note SPitch, RightTied)]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">([(NoteId SInterval (Ratio Int) (Maybe String), Tied)] -&gt; Bool)
-&gt; [[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]]
-&gt; [[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; ([(NoteId SInterval (Ratio Int) (Maybe String), Tied)] -&gt; Bool)
-&gt; [(NoteId SInterval (Ratio Int) (Maybe String), Tied)]
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[(NoteId SInterval (Ratio Int) (Maybe String), Tied)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[(NoteId SInterval (Ratio Int) (Maybe String), Tied)]]
</span><a href="#local-6989586621679469437"><span class="hs-identifier hs-var">slices</span></a></span><span>
</span><span id="line-637"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-638"></span><span>  </span><span id="local-6989586621679469440"><span class="annot"><span class="annottext">mkSlice :: f (i, Tied) -&gt; f (Note (Pitch (IntervalOf i)), RightTied)
</span><a href="#local-6989586621679469440"><span class="hs-identifier hs-var hs-var">mkSlice</span></a></span></span><span> </span><span id="local-6989586621679469467"><span class="annot"><span class="annottext">f (i, Tied)
</span><a href="#local-6989586621679469467"><span class="hs-identifier hs-var">notes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(i, Tied) -&gt; (Note (Pitch (IntervalOf i)), RightTied)
forall {i}.
(IdOf i ~ Maybe String, HasPitch i, Identifiable i) =&gt;
(i, Tied) -&gt; (Note (Pitch (IntervalOf i)), RightTied)
</span><a href="#local-6989586621679469468"><span class="hs-identifier hs-var">mkNote</span></a></span><span> </span><span class="annot"><span class="annottext">((i, Tied) -&gt; (Note (Pitch (IntervalOf i)), RightTied))
-&gt; f (i, Tied) -&gt; f (Note (Pitch (IntervalOf i)), RightTied)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f (i, Tied)
</span><a href="#local-6989586621679469467"><span class="hs-identifier hs-var">notes</span></a></span><span>
</span><span id="line-639"></span><span>  </span><span id="local-6989586621679469468"><span class="annot"><span class="annottext">mkNote :: (i, Tied) -&gt; (Note (Pitch (IntervalOf i)), RightTied)
</span><a href="#local-6989586621679469468"><span class="hs-identifier hs-var hs-var">mkNote</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469486"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679469486"><span class="hs-identifier hs-var">note</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469487"><span class="annot"><span class="annottext">Tied
</span><a href="#local-6989586621679469487"><span class="hs-identifier hs-var">tie</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pitch (IntervalOf i) -&gt; String -&gt; Note (Pitch (IntervalOf i))
forall n. n -&gt; String -&gt; Note n
</span><a href="PVGrammar.html#Note"><span class="hs-identifier hs-var">Note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; Pitch (IntervalOf i)
forall a. HasPitch a =&gt; a -&gt; Pitch (IntervalOf a)
</span><span class="hs-identifier hs-var">Music.pitch</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679469486"><span class="hs-identifier hs-var">note</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; String
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; String) -&gt; Maybe String -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">i -&gt; IdOf i
forall i. Identifiable i =&gt; i -&gt; IdOf i
</span><span class="hs-identifier hs-var">Music.getId</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679469486"><span class="hs-identifier hs-var">note</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Tied -&gt; RightTied
</span><span class="hs-identifier hs-var">Music.rightTie</span></span><span> </span><span class="annot"><span class="annottext">Tied
</span><a href="#local-6989586621679469487"><span class="hs-identifier hs-var">tie</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="annot"><span class="hs-comment">-- | Converts salami slices (as returned by 'slicesFromFile') to a path as expected by parsers.</span></span><span>
</span><span id="line-642"></span><span class="annot"><a href="PVGrammar.html#slicesToPath"><span class="hs-identifier hs-type">slicesToPath</span></a></span><span>
</span><span id="line-643"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679465891"><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span></span><span>
</span><span id="line-644"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Interval</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pitch</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Music.RightTied</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pitch</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pitch</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-647"></span><span id="slicesToPath"><span class="annot"><span class="annottext">slicesToPath :: forall i.
(Interval i, Ord i, Eq i) =&gt;
[[(Note (Pitch i), RightTied)]]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
</span><a href="PVGrammar.html#slicesToPath"><span class="hs-identifier hs-var hs-var">slicesToPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [[(Note (Pitch i), RightTied)]]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
</span><a href="#local-6989586621679469504"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-648"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-comment">-- normalizeTies (s : next : rest) = (fixTie &lt;$&gt; s)</span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-comment">--   : normalizeTies (next : rest)</span><span>
</span><span id="line-651"></span><span>  </span><span class="hs-comment">--  where</span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-comment">--   nextNotes = fst &lt;$&gt; next</span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-comment">--   fixTie (p, t) = if p `L.elem` nextNotes then (p, t) else (p, Ends)</span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-comment">-- normalizeTies [s] = [map (fmap $ const Ends) s]</span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-comment">-- normalizeTies []  = []</span><span>
</span><span id="line-656"></span><span>  </span><span id="local-6989586621679469513"><span class="annot"><span class="annottext">mkNote :: a -&gt; Note n -&gt; Note n
</span><a href="#local-6989586621679469513"><span class="hs-identifier hs-var hs-var">mkNote</span></a></span></span><span> </span><span id="local-6989586621679469514"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469514"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span id="local-6989586621679469515"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679469515"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679469516"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469516"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">n -&gt; String -&gt; Note n
forall n. n -&gt; String -&gt; Note n
</span><a href="PVGrammar.html#Note"><span class="hs-identifier hs-var">Note</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679469515"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;slice&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469514"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469516"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>  </span><span id="local-6989586621679469523"><span class="annot"><span class="annottext">mkEdge :: a
-&gt; (Note n, RightTied)
-&gt; Maybe (StartStop (Note n), StartStop (Note n))
</span><a href="#local-6989586621679469523"><span class="hs-identifier hs-var hs-var">mkEdge</span></a></span></span><span> </span><span id="local-6989586621679469524"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469524"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Note n
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RightTied
</span><span class="hs-identifier hs-var">Music.Ends</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (StartStop (Note n), StartStop (Note n))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-658"></span><span>  </span><span class="annot"><a href="#local-6989586621679469523"><span class="hs-identifier hs-var">mkEdge</span></a></span><span> </span><span id="local-6989586621679469526"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469526"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469527"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469527"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RightTied
</span><span class="hs-identifier hs-var">Music.Holds</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(StartStop (Note n), StartStop (Note n))
-&gt; Maybe (StartStop (Note n), StartStop (Note n))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Note n -&gt; StartStop (Note n)
forall a. a -&gt; StartStop a
</span><a href="Common.html#Inner"><span class="hs-identifier hs-var">Inner</span></a></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; StartStop (Note n)) -&gt; Note n -&gt; StartStop (Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Note n -&gt; Note n
forall {a} {n}. Show a =&gt; a -&gt; Note n -&gt; Note n
</span><a href="#local-6989586621679469513"><span class="hs-identifier hs-var">mkNote</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469526"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469527"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Note n -&gt; StartStop (Note n)
forall a. a -&gt; StartStop a
</span><a href="Common.html#Inner"><span class="hs-identifier hs-var">Inner</span></a></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; StartStop (Note n)) -&gt; Note n -&gt; StartStop (Note n)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Note n -&gt; Note n
forall {a} {n}. Show a =&gt; a -&gt; Note n -&gt; Note n
</span><a href="#local-6989586621679469513"><span class="hs-identifier hs-var">mkNote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679469526"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469527"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-659"></span><span>  </span><span class="annot"><a href="#local-6989586621679469504"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pitch</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Music.RightTied</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pitch</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pitch</span></span><span> </span><span class="annot"><a href="#local-6989586621679465891"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-660"></span><span>  </span><span id="local-6989586621679469504"><span class="annot"><span class="annottext">go :: Int
-&gt; [[(Note (Pitch i), RightTied)]]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
</span><a href="#local-6989586621679469504"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cannot construct path from empty list&quot;</span></span><span>
</span><span id="line-661"></span><span>  </span><span class="annot"><a href="#local-6989586621679469504"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679469530"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469530"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679469531"><span class="annot"><span class="annottext">[(Note (Pitch i), RightTied)]
</span><a href="#local-6989586621679469531"><span class="hs-identifier hs-var">notes</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Note (Pitch i)] -&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
forall around between. around -&gt; Path around between
</span><a href="Common.html#PathEnd"><span class="hs-identifier hs-var">PathEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Note (Pitch i) -&gt; Note (Pitch i)
forall {a} {n}. Show a =&gt; a -&gt; Note n -&gt; Note n
</span><a href="#local-6989586621679469513"><span class="hs-identifier hs-var">mkNote</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469530"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Note (Pitch i) -&gt; Note (Pitch i))
-&gt; ((Note (Pitch i), RightTied) -&gt; Note (Pitch i))
-&gt; (Note (Pitch i), RightTied)
-&gt; Note (Pitch i)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Note (Pitch i), RightTied) -&gt; Note (Pitch i)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Note (Pitch i), RightTied) -&gt; Note (Pitch i))
-&gt; [(Note (Pitch i), RightTied)] -&gt; [Note (Pitch i)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Note (Pitch i), RightTied)]
</span><a href="#local-6989586621679469531"><span class="hs-identifier hs-var">notes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span>  </span><span class="annot"><a href="#local-6989586621679469504"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679469534"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469534"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469535"><span class="annot"><span class="annottext">[(Note (Pitch i), RightTied)]
</span><a href="#local-6989586621679469535"><span class="hs-identifier hs-var">notes</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679469536"><span class="annot"><span class="annottext">[[(Note (Pitch i), RightTied)]]
</span><a href="#local-6989586621679469536"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Note (Pitch i)]
-&gt; [Edge (Pitch i)]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
forall around between.
around -&gt; between -&gt; Path around between -&gt; Path around between
</span><a href="Common.html#Path"><span class="hs-identifier hs-var">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Note (Pitch i) -&gt; Note (Pitch i)
forall {a} {n}. Show a =&gt; a -&gt; Note n -&gt; Note n
</span><a href="#local-6989586621679469513"><span class="hs-identifier hs-var">mkNote</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469534"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Note (Pitch i) -&gt; Note (Pitch i))
-&gt; ((Note (Pitch i), RightTied) -&gt; Note (Pitch i))
-&gt; (Note (Pitch i), RightTied)
-&gt; Note (Pitch i)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Note (Pitch i), RightTied) -&gt; Note (Pitch i)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Note (Pitch i), RightTied) -&gt; Note (Pitch i))
-&gt; [(Note (Pitch i), RightTied)] -&gt; [Note (Pitch i)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Note (Pitch i), RightTied)]
</span><a href="#local-6989586621679469535"><span class="hs-identifier hs-var">notes</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Note (Pitch i), RightTied) -&gt; Maybe (Edge (Pitch i)))
-&gt; [(Note (Pitch i), RightTied)] -&gt; [Edge (Pitch i)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (Note (Pitch i), RightTied) -&gt; Maybe (Edge (Pitch i))
forall {a} {n}.
(Show a, Num a) =&gt;
a
-&gt; (Note n, RightTied)
-&gt; Maybe (StartStop (Note n), StartStop (Note n))
</span><a href="#local-6989586621679469523"><span class="hs-identifier hs-var">mkEdge</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469534"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Note (Pitch i), RightTied)]
</span><a href="#local-6989586621679469535"><span class="hs-identifier hs-var">notes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Path [Note (Pitch i)] [Edge (Pitch i)]
 -&gt; Path [Note (Pitch i)] [Edge (Pitch i)])
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [[(Note (Pitch i), RightTied)]]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
</span><a href="#local-6989586621679469504"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469534"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[(Note (Pitch i), RightTied)]]
</span><a href="#local-6989586621679469536"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="annot"><span class="hs-comment">{- | Loads a MusicXML File and returns a surface path
 as input to parsers.
-}</span></span><span>
</span><span id="line-667"></span><span class="annot"><a href="PVGrammar.html#loadSurface"><span class="hs-identifier hs-type">loadSurface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPitch</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPitch</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span id="loadSurface"><span class="annot"><span class="annottext">loadSurface :: String -&gt; IO (Path [Note SPitch] [Edge SPitch])
</span><a href="PVGrammar.html#loadSurface"><span class="hs-identifier hs-var hs-var">loadSurface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([[(Note SPitch, RightTied)]] -&gt; Path [Note SPitch] [Edge SPitch])
-&gt; IO [[(Note SPitch, RightTied)]]
-&gt; IO (Path [Note SPitch] [Edge SPitch])
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[[(Note SPitch, RightTied)]] -&gt; Path [Note SPitch] [Edge SPitch]
forall i.
(Interval i, Ord i, Eq i) =&gt;
[[(Note (Pitch i), RightTied)]]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
</span><a href="PVGrammar.html#slicesToPath"><span class="hs-identifier hs-var">slicesToPath</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [[(Note SPitch, RightTied)]]
 -&gt; IO (Path [Note SPitch] [Edge SPitch]))
-&gt; (String -&gt; IO [[(Note SPitch, RightTied)]])
-&gt; String
-&gt; IO (Path [Note SPitch] [Edge SPitch])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO [[(Note SPitch, RightTied)]]
</span><a href="PVGrammar.html#slicesFromFile"><span class="hs-identifier hs-var">slicesFromFile</span></a></span><span>
</span><span id="line-669"></span><span>
</span><span id="line-670"></span><span class="annot"><span class="hs-comment">{- | Loads a MusicXML File
 and returns a surface path of the given range of slices.
-}</span></span><span>
</span><span id="line-673"></span><span class="annot"><a href="PVGrammar.html#loadSurface%27"><span class="hs-identifier hs-type">loadSurface'</span></a></span><span>
</span><span id="line-674"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-675"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ path to a MusicXML file</span></span><span>
</span><span id="line-676"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-677"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ the first slice to include (starting at 0)</span></span><span>
</span><span id="line-678"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-679"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ the last slice to include</span></span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPitch</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PVGrammar.html#Edge"><span class="hs-identifier hs-type">Edge</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SPitch</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span id="loadSurface%27"><span class="annot"><span class="annottext">loadSurface' :: String -&gt; Int -&gt; Int -&gt; IO (Path [Note SPitch] [Edge SPitch])
</span><a href="PVGrammar.html#loadSurface%27"><span class="hs-identifier hs-var hs-var">loadSurface'</span></a></span></span><span> </span><span id="local-6989586621679469538"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469538"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span id="local-6989586621679469539"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469539"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621679469540"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469540"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-682"></span><span>  </span><span class="annot"><span class="annottext">[[(Note SPitch, RightTied)]] -&gt; Path [Note SPitch] [Edge SPitch]
forall i.
(Interval i, Ord i, Eq i) =&gt;
[[(Note (Pitch i), RightTied)]]
-&gt; Path [Note (Pitch i)] [Edge (Pitch i)]
</span><a href="PVGrammar.html#slicesToPath"><span class="hs-identifier hs-var">slicesToPath</span></a></span><span> </span><span class="annot"><span class="annottext">([[(Note SPitch, RightTied)]] -&gt; Path [Note SPitch] [Edge SPitch])
-&gt; ([[(Note SPitch, RightTied)]] -&gt; [[(Note SPitch, RightTied)]])
-&gt; [[(Note SPitch, RightTied)]]
-&gt; Path [Note SPitch] [Edge SPitch]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [[(Note SPitch, RightTied)]] -&gt; [[(Note SPitch, RightTied)]]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469539"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">([[(Note SPitch, RightTied)]] -&gt; [[(Note SPitch, RightTied)]])
-&gt; ([[(Note SPitch, RightTied)]] -&gt; [[(Note SPitch, RightTied)]])
-&gt; [[(Note SPitch, RightTied)]]
-&gt; [[(Note SPitch, RightTied)]]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [[(Note SPitch, RightTied)]] -&gt; [[(Note SPitch, RightTied)]]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469540"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679469539"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([[(Note SPitch, RightTied)]] -&gt; Path [Note SPitch] [Edge SPitch])
-&gt; IO [[(Note SPitch, RightTied)]]
-&gt; IO (Path [Note SPitch] [Edge SPitch])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO [[(Note SPitch, RightTied)]]
</span><a href="PVGrammar.html#slicesFromFile"><span class="hs-identifier hs-var">slicesFromFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679469538"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="annot"><span class="hs-comment">-- | Apply an applicative action to all pitches in an analysis.</span></span><span>
</span><span id="line-685"></span><span id="local-6989586621679465906"><span id="local-6989586621679465907"><span id="local-6989586621679465908"><span class="annot"><a href="PVGrammar.html#analysisTraversePitch"><span class="hs-identifier hs-type">analysisTraversePitch</span></a></span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465906"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465907"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465907"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465907"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465908"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465906"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465907"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-type">PVAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465908"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-689"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465906"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-type">PVAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465907"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-690"></span><span id="analysisTraversePitch"><span class="annot"><span class="annottext">analysisTraversePitch :: forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n', Ord n') =&gt;
(n -&gt; f n') -&gt; PVAnalysis n -&gt; f (PVAnalysis n')
</span><a href="PVGrammar.html#analysisTraversePitch"><span class="hs-identifier hs-var hs-var">analysisTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469559"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469559"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Analysis"><span class="hs-identifier hs-type">Analysis</span></a></span><span> </span><span id="local-6989586621679469560"><span class="annot"><span class="annottext">[Leftmost (Split n) (Freeze n) (Spread n)]
</span><a href="#local-6989586621679469560"><span class="hs-identifier hs-var">deriv</span></a></span></span><span> </span><span id="local-6989586621679469561"><span class="annot"><span class="annottext">Path (Edges n) (Notes n)
</span><a href="#local-6989586621679469561"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-691"></span><span>  </span><span id="local-6989586621679469562"><span class="annot"><span class="annottext">[Leftmost (Split n') (Freeze n') (Spread n')]
</span><a href="#local-6989586621679469562"><span class="hs-identifier hs-var">deriv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Leftmost (Split n) (Freeze n) (Spread n)
 -&gt; f (Leftmost (Split n') (Freeze n') (Spread n')))
-&gt; [Leftmost (Split n) (Freeze n) (Spread n)]
-&gt; f [Leftmost (Split n') (Freeze n') (Spread n')]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(n -&gt; f n')
-&gt; Leftmost (Split n) (Freeze n) (Spread n)
-&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n', Ord n') =&gt;
(n -&gt; f n')
-&gt; Leftmost (Split n) (Freeze n) (Spread n)
-&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
</span><a href="PVGrammar.html#leftmostTraversePitch"><span class="hs-identifier hs-var">leftmostTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469559"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Leftmost (Split n) (Freeze n) (Spread n)]
</span><a href="#local-6989586621679469560"><span class="hs-identifier hs-var">deriv</span></a></span><span>
</span><span id="line-692"></span><span>  </span><span id="local-6989586621679469564"><span class="annot"><span class="annottext">Path (Edges n') (Notes n')
</span><a href="#local-6989586621679469564"><span class="hs-identifier hs-var">top'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n')
-&gt; Path (Edges n) (Notes n) -&gt; f (Path (Edges n') (Notes n'))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n')
-&gt; Path (Edges n) (Notes n) -&gt; f (Path (Edges n') (Notes n'))
</span><a href="PVGrammar.html#pathTraversePitch"><span class="hs-identifier hs-var">pathTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469559"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Path (Edges n) (Notes n)
</span><a href="#local-6989586621679469561"><span class="hs-identifier hs-var">top</span></a></span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">[Leftmost (Split n') (Freeze n') (Spread n')]
-&gt; Path (Edges n') (Notes n') -&gt; PVAnalysis n'
forall s f h tr slc.
[Leftmost s f h] -&gt; Path tr slc -&gt; Analysis s f h tr slc
</span><a href="Common.html#Analysis"><span class="hs-identifier hs-var">Analysis</span></a></span><span> </span><span class="annot"><span class="annottext">[Leftmost (Split n') (Freeze n') (Spread n')]
</span><a href="#local-6989586621679469562"><span class="hs-identifier hs-var">deriv'</span></a></span><span> </span><span class="annot"><span class="annottext">Path (Edges n') (Notes n')
</span><a href="#local-6989586621679469564"><span class="hs-identifier hs-var">top'</span></a></span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span class="annot"><span class="hs-comment">-- | Map a function over all pitches in an analysis.</span></span><span>
</span><span id="line-696"></span><span id="local-6989586621679465848"><span id="local-6989586621679465849"><span class="annot"><a href="PVGrammar.html#analysisMapPitch"><span class="hs-identifier hs-type">analysisMapPitch</span></a></span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465848"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465848"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465848"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465849"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465848"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-type">PVAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465849"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#PVAnalysis"><span class="hs-identifier hs-type">PVAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465848"><span class="hs-identifier hs-type">n'</span></a></span></span></span><span>
</span><span id="line-698"></span><span id="analysisMapPitch"><span class="annot"><span class="annottext">analysisMapPitch :: forall n' n.
(Eq n', Hashable n', Ord n') =&gt;
(n -&gt; n') -&gt; PVAnalysis n -&gt; PVAnalysis n'
</span><a href="PVGrammar.html#analysisMapPitch"><span class="hs-identifier hs-var hs-var">analysisMapPitch</span></a></span></span><span> </span><span id="local-6989586621679469575"><span class="annot"><span class="annottext">n -&gt; n'
</span><a href="#local-6989586621679469575"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Identity (PVAnalysis n') -&gt; PVAnalysis n'
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span> </span><span class="annot"><span class="annottext">(Identity (PVAnalysis n') -&gt; PVAnalysis n')
-&gt; (PVAnalysis n -&gt; Identity (PVAnalysis n'))
-&gt; PVAnalysis n
-&gt; PVAnalysis n'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; Identity n') -&gt; PVAnalysis n -&gt; Identity (PVAnalysis n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n', Ord n') =&gt;
(n -&gt; f n') -&gt; PVAnalysis n -&gt; f (PVAnalysis n')
</span><a href="PVGrammar.html#analysisTraversePitch"><span class="hs-identifier hs-var">analysisTraversePitch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">n' -&gt; Identity n'
forall a. a -&gt; Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(n' -&gt; Identity n') -&gt; (n -&gt; n') -&gt; n -&gt; Identity n'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; n'
</span><a href="#local-6989586621679469575"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>
</span><span id="line-700"></span><span id="local-6989586621679465916"><span id="local-6989586621679465917"><span id="local-6989586621679465918"><span class="annot"><a href="PVGrammar.html#pathTraversePitch"><span class="hs-identifier hs-type">pathTraversePitch</span></a></span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465916"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465917"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465917"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465918"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465916"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465917"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465918"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465918"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465916"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465917"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465917"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-705"></span><span id="pathTraversePitch"><span class="annot"><span class="annottext">pathTraversePitch :: forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n')
-&gt; Path (Edges n) (Notes n) -&gt; f (Path (Edges n') (Notes n'))
</span><a href="PVGrammar.html#pathTraversePitch"><span class="hs-identifier hs-var hs-var">pathTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469596"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469596"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span id="local-6989586621679469597"><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469597"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679469598"><span class="annot"><span class="annottext">Notes n
</span><a href="#local-6989586621679469598"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679469599"><span class="annot"><span class="annottext">Path (Edges n) (Notes n)
</span><a href="#local-6989586621679469599"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-706"></span><span>  </span><span id="local-6989586621679469600"><span class="annot"><span class="annottext">Edges n'
</span><a href="#local-6989586621679469600"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
</span><a href="PVGrammar.html#edgesTraversePitch"><span class="hs-identifier hs-var">edgesTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469596"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469597"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-707"></span><span>  </span><span id="local-6989586621679469602"><span class="annot"><span class="annottext">Notes n'
</span><a href="#local-6989586621679469602"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Notes n -&gt; f (Notes n')
forall n (f :: * -&gt; *) a.
(Eq n, Hashable n, Applicative f) =&gt;
(a -&gt; f n) -&gt; Notes a -&gt; f (Notes n)
</span><a href="PVGrammar.html#notesTraversePitch"><span class="hs-identifier hs-var">notesTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469596"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Notes n
</span><a href="#local-6989586621679469598"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-708"></span><span>  </span><span id="local-6989586621679469604"><span class="annot"><span class="annottext">Path (Edges n') (Notes n')
</span><a href="#local-6989586621679469604"><span class="hs-identifier hs-var">rest'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n')
-&gt; Path (Edges n) (Notes n) -&gt; f (Path (Edges n') (Notes n'))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n')
-&gt; Path (Edges n) (Notes n) -&gt; f (Path (Edges n') (Notes n'))
</span><a href="PVGrammar.html#pathTraversePitch"><span class="hs-identifier hs-var">pathTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469596"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Path (Edges n) (Notes n)
</span><a href="#local-6989586621679469599"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-709"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Edges n'
-&gt; Notes n'
-&gt; Path (Edges n') (Notes n')
-&gt; Path (Edges n') (Notes n')
forall around between.
around -&gt; between -&gt; Path around between -&gt; Path around between
</span><a href="Common.html#Path"><span class="hs-identifier hs-var">Path</span></a></span><span> </span><span class="annot"><span class="annottext">Edges n'
</span><a href="#local-6989586621679469600"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">Notes n'
</span><a href="#local-6989586621679469602"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Path (Edges n') (Notes n')
</span><a href="#local-6989586621679469604"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-710"></span><span class="annot"><a href="PVGrammar.html#pathTraversePitch"><span class="hs-identifier hs-var">pathTraversePitch</span></a></span><span> </span><span id="local-6989586621679469605"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469605"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#PathEnd"><span class="hs-identifier hs-type">PathEnd</span></a></span><span> </span><span id="local-6989586621679469606"><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469606"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Edges n' -&gt; Path (Edges n') (Notes n')
forall around between. around -&gt; Path around between
</span><a href="Common.html#PathEnd"><span class="hs-identifier hs-var">PathEnd</span></a></span><span> </span><span class="annot"><span class="annottext">(Edges n' -&gt; Path (Edges n') (Notes n'))
-&gt; f (Edges n') -&gt; f (Path (Edges n') (Notes n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
</span><a href="PVGrammar.html#edgesTraversePitch"><span class="hs-identifier hs-var">edgesTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469605"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469606"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span id="local-6989586621679465937"><span id="local-6989586621679465938"><span id="local-6989586621679465939"><span class="annot"><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-type">traverseEdge</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465937"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465938"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465937"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465939"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465938"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465938"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465937"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465939"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465939"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-713"></span><span id="traverseEdge"><span class="annot"><span class="annottext">traverseEdge :: forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var hs-var">traverseEdge</span></a></span></span><span> </span><span id="local-6989586621679469612"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469612"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469613"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679469613"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469614"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679469614"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(n' -&gt; n' -&gt; (n', n')) -&gt; f n' -&gt; f (n' -&gt; (n', n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469612"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679469613"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">f (n' -&gt; (n', n')) -&gt; f n' -&gt; f (n', n')
forall a b. f (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469612"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679469614"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span id="local-6989586621679465934"><span id="local-6989586621679465935"><span id="local-6989586621679465936"><span class="annot"><a href="PVGrammar.html#notesTraversePitch"><span class="hs-identifier hs-type">notesTraversePitch</span></a></span><span>
</span><span id="line-716"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465934"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465934"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465935"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465935"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465934"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465935"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465934"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-717"></span><span id="notesTraversePitch"><span class="annot"><span class="annottext">notesTraversePitch :: forall n (f :: * -&gt; *) a.
(Eq n, Hashable n, Applicative f) =&gt;
(a -&gt; f n) -&gt; Notes a -&gt; f (Notes n)
</span><a href="PVGrammar.html#notesTraversePitch"><span class="hs-identifier hs-var hs-var">notesTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469625"><span class="annot"><span class="annottext">a -&gt; f n
</span><a href="#local-6989586621679469625"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-type">Notes</span></a></span><span> </span><span id="local-6989586621679469626"><span class="annot"><span class="annottext">HashSet (Note a)
</span><a href="#local-6989586621679469626"><span class="hs-identifier hs-var">notes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet (Note n) -&gt; Notes n
forall n. HashSet (Note n) -&gt; Notes n
</span><a href="PVGrammar.html#Notes"><span class="hs-identifier hs-var">Notes</span></a></span><span> </span><span class="annot"><span class="annottext">(HashSet (Note n) -&gt; Notes n)
-&gt; f (HashSet (Note n)) -&gt; f (Notes n)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Note a -&gt; f (Note n)) -&gt; HashSet (Note a) -&gt; f (HashSet (Note n))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; HashSet n -&gt; f (HashSet n')
</span><a href="Common.html#traverseSet"><span class="hs-identifier hs-var">traverseSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; f n) -&gt; Note a -&gt; f (Note n)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f n
</span><a href="#local-6989586621679469625"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashSet (Note a)
</span><a href="#local-6989586621679469626"><span class="hs-identifier hs-var">notes</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span id="local-6989586621679465931"><span id="local-6989586621679465932"><span id="local-6989586621679465933"><span class="annot"><a href="PVGrammar.html#edgesTraversePitch"><span class="hs-identifier hs-type">edgesTraversePitch</span></a></span><span>
</span><span id="line-720"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465931"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465932"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465932"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465933"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465931"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465932"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465933"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-723"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465931"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465932"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-724"></span><span id="edgesTraversePitch"><span class="annot"><span class="annottext">edgesTraversePitch :: forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
</span><a href="PVGrammar.html#edgesTraversePitch"><span class="hs-identifier hs-var hs-var">edgesTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469654"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469654"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-type">Edges</span></a></span><span> </span><span id="local-6989586621679469655"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469655"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679469656"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679469656"><span class="hs-identifier hs-var">pass</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-725"></span><span>  </span><span id="local-6989586621679469657"><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
</span><a href="#local-6989586621679469657"><span class="hs-identifier hs-var">reg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; HashSet (Edge n)
-&gt; f (HashSet (StartStop (Note n'), StartStop (Note n')))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; HashSet n -&gt; f (HashSet n')
</span><a href="Common.html#traverseSet"><span class="hs-identifier hs-var">traverseSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n'))
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((StartStop (Note n) -&gt; f (StartStop (Note n')))
 -&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; (StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n
-&gt; f (StartStop (Note n'), StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; StartStop (Note n) -&gt; f (StartStop (Note n'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; StartStop a -&gt; f (StartStop b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n'))
 -&gt; StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; (Note n -&gt; f (Note n'))
-&gt; StartStop (Note n)
-&gt; f (StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469654"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469655"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-726"></span><span>  </span><span id="local-6989586621679469658"><span class="annot"><span class="annottext">MultiSet (Note n', Note n')
</span><a href="#local-6989586621679469658"><span class="hs-identifier hs-var">pass'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; f (Note n', Note n'))
-&gt; MultiSet (InnerEdge n) -&gt; f (MultiSet (Note n', Note n'))
forall b (f :: * -&gt; *) a.
(Eq b, Hashable b, Applicative f) =&gt;
(a -&gt; f b) -&gt; MultiSet a -&gt; f (MultiSet b)
</span><a href="Internal.MultiSet.html#traverse"><span class="hs-identifier hs-var">MS.traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n'))
-&gt; (Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469654"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679469656"><span class="hs-identifier hs-var">pass</span></a></span><span>
</span><span id="line-727"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
-&gt; MultiSet (Note n', Note n') -&gt; Edges n'
forall n. HashSet (Edge n) -&gt; MultiSet (InnerEdge n) -&gt; Edges n
</span><a href="PVGrammar.html#Edges"><span class="hs-identifier hs-var">Edges</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
</span><a href="#local-6989586621679469657"><span class="hs-identifier hs-var">reg'</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (Note n', Note n')
</span><a href="#local-6989586621679469658"><span class="hs-identifier hs-var">pass'</span></a></span><span>
</span><span id="line-728"></span><span>
</span><span id="line-729"></span><span id="local-6989586621679465913"><span id="local-6989586621679465914"><span id="local-6989586621679465915"><span class="annot"><a href="PVGrammar.html#leftmostTraversePitch"><span class="hs-identifier hs-type">leftmostTraversePitch</span></a></span><span>
</span><span id="line-730"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465913"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465915"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465913"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Common.html#Leftmost"><span class="hs-identifier hs-type">Leftmost</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465915"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465915"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465915"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465913"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Common.html#Leftmost"><span class="hs-identifier hs-type">Leftmost</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465914"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-734"></span><span id="leftmostTraversePitch"><span class="annot"><span class="annottext">leftmostTraversePitch :: forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n', Ord n') =&gt;
(n -&gt; f n')
-&gt; Leftmost (Split n) (Freeze n) (Spread n)
-&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
</span><a href="PVGrammar.html#leftmostTraversePitch"><span class="hs-identifier hs-var hs-var">leftmostTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469687"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679469688"><span class="annot"><span class="annottext">Leftmost (Split n) (Freeze n) (Spread n)
</span><a href="#local-6989586621679469688"><span class="hs-identifier hs-var">lm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Leftmost (Split n) (Freeze n) (Spread n)
</span><a href="#local-6989586621679469688"><span class="hs-identifier hs-var">lm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-735"></span><span>  </span><span class="annot"><a href="Common.html#LMSplitLeft"><span class="hs-identifier hs-type">LMSplitLeft</span></a></span><span> </span><span id="local-6989586621679469690"><span class="annot"><span class="annottext">Split n
</span><a href="#local-6989586621679469690"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Split n' -&gt; Leftmost (Split n') (Freeze n') (Spread n')
forall s f h. s -&gt; Leftmost s f h
</span><a href="Common.html#LMSplitLeft"><span class="hs-identifier hs-var">LMSplitLeft</span></a></span><span> </span><span class="annot"><span class="annottext">(Split n' -&gt; Leftmost (Split n') (Freeze n') (Spread n'))
-&gt; f (Split n') -&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
forall (f :: * -&gt; *) n n'.
(Applicative f, Ord n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
</span><a href="PVGrammar.html#splitTraversePitch"><span class="hs-identifier hs-var">splitTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Split n
</span><a href="#local-6989586621679469690"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-736"></span><span>  </span><span class="annot"><a href="Common.html#LMSplitRight"><span class="hs-identifier hs-type">LMSplitRight</span></a></span><span> </span><span id="local-6989586621679469693"><span class="annot"><span class="annottext">Split n
</span><a href="#local-6989586621679469693"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Split n' -&gt; Leftmost (Split n') (Freeze n') (Spread n')
forall s f h. s -&gt; Leftmost s f h
</span><a href="Common.html#LMSplitRight"><span class="hs-identifier hs-var">LMSplitRight</span></a></span><span> </span><span class="annot"><span class="annottext">(Split n' -&gt; Leftmost (Split n') (Freeze n') (Spread n'))
-&gt; f (Split n') -&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
forall (f :: * -&gt; *) n n'.
(Applicative f, Ord n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
</span><a href="PVGrammar.html#splitTraversePitch"><span class="hs-identifier hs-var">splitTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Split n
</span><a href="#local-6989586621679469693"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-737"></span><span>  </span><span class="annot"><a href="Common.html#LMSplitOnly"><span class="hs-identifier hs-type">LMSplitOnly</span></a></span><span> </span><span id="local-6989586621679469695"><span class="annot"><span class="annottext">Split n
</span><a href="#local-6989586621679469695"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Split n' -&gt; Leftmost (Split n') (Freeze n') (Spread n')
forall s f h. s -&gt; Leftmost s f h
</span><a href="Common.html#LMSplitOnly"><span class="hs-identifier hs-var">LMSplitOnly</span></a></span><span> </span><span class="annot"><span class="annottext">(Split n' -&gt; Leftmost (Split n') (Freeze n') (Spread n'))
-&gt; f (Split n') -&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
forall (f :: * -&gt; *) n n'.
(Applicative f, Ord n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
</span><a href="PVGrammar.html#splitTraversePitch"><span class="hs-identifier hs-var">splitTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Split n
</span><a href="#local-6989586621679469695"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-738"></span><span>  </span><span class="annot"><a href="Common.html#LMFreezeLeft"><span class="hs-identifier hs-type">LMFreezeLeft</span></a></span><span> </span><span id="local-6989586621679469697"><span class="annot"><span class="annottext">Freeze n
</span><a href="#local-6989586621679469697"><span class="hs-identifier hs-var">fr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Freeze n' -&gt; Leftmost (Split n') (Freeze n') (Spread n')
forall f s h. f -&gt; Leftmost s f h
</span><a href="Common.html#LMFreezeLeft"><span class="hs-identifier hs-var">LMFreezeLeft</span></a></span><span> </span><span class="annot"><span class="annottext">(Freeze n' -&gt; Leftmost (Split n') (Freeze n') (Spread n'))
-&gt; f (Freeze n') -&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Freeze n -&gt; f (Freeze n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Hashable n') =&gt;
(n -&gt; f n') -&gt; Freeze n -&gt; f (Freeze n')
</span><a href="PVGrammar.html#freezeTraversePitch"><span class="hs-identifier hs-var">freezeTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Freeze n
</span><a href="#local-6989586621679469697"><span class="hs-identifier hs-var">fr</span></a></span><span>
</span><span id="line-739"></span><span>  </span><span class="annot"><a href="Common.html#LMFreezeOnly"><span class="hs-identifier hs-type">LMFreezeOnly</span></a></span><span> </span><span id="local-6989586621679469700"><span class="annot"><span class="annottext">Freeze n
</span><a href="#local-6989586621679469700"><span class="hs-identifier hs-var">fr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Freeze n' -&gt; Leftmost (Split n') (Freeze n') (Spread n')
forall f s h. f -&gt; Leftmost s f h
</span><a href="Common.html#LMFreezeOnly"><span class="hs-identifier hs-var">LMFreezeOnly</span></a></span><span> </span><span class="annot"><span class="annottext">(Freeze n' -&gt; Leftmost (Split n') (Freeze n') (Spread n'))
-&gt; f (Freeze n') -&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Freeze n -&gt; f (Freeze n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Hashable n') =&gt;
(n -&gt; f n') -&gt; Freeze n -&gt; f (Freeze n')
</span><a href="PVGrammar.html#freezeTraversePitch"><span class="hs-identifier hs-var">freezeTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Freeze n
</span><a href="#local-6989586621679469700"><span class="hs-identifier hs-var">fr</span></a></span><span>
</span><span id="line-740"></span><span>  </span><span class="annot"><a href="Common.html#LMSpread"><span class="hs-identifier hs-type">LMSpread</span></a></span><span> </span><span id="local-6989586621679469702"><span class="annot"><span class="annottext">Spread n
</span><a href="#local-6989586621679469702"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Spread n' -&gt; Leftmost (Split n') (Freeze n') (Spread n')
forall h s f. h -&gt; Leftmost s f h
</span><a href="Common.html#LMSpread"><span class="hs-identifier hs-var">LMSpread</span></a></span><span> </span><span class="annot"><span class="annottext">(Spread n' -&gt; Leftmost (Split n') (Freeze n') (Spread n'))
-&gt; f (Spread n') -&gt; f (Leftmost (Split n') (Freeze n') (Spread n'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Spread n -&gt; f (Spread n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Spread n -&gt; f (Spread n')
</span><a href="PVGrammar.html#spreadTraversePitch"><span class="hs-identifier hs-var">spreadTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469687"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Spread n
</span><a href="#local-6989586621679469702"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="annot"><a href="PVGrammar.html#splitTraversePitch"><span class="hs-identifier hs-type">splitTraversePitch</span></a></span><span>
</span><span id="line-743"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679465961"><span class="annot"><a href="#local-6989586621679465961"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621679465963"><span class="annot"><a href="#local-6989586621679465963"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621679465962"><span class="annot"><a href="#local-6989586621679465962"><span class="hs-identifier hs-type">n'</span></a></span></span><span>
</span><span id="line-744"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465961"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465962"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465962"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465963"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465961"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465962"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465963"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-747"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465961"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Split"><span class="hs-identifier hs-type">Split</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465962"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span id="splitTraversePitch"><span class="annot"><span class="annottext">splitTraversePitch :: forall (f :: * -&gt; *) n n'.
(Applicative f, Ord n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Split n -&gt; f (Split n')
</span><a href="PVGrammar.html#splitTraversePitch"><span class="hs-identifier hs-var hs-var">splitTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469770"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-type">SplitOp</span></a></span><span> </span><span id="local-6989586621679469771"><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679469771"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621679469772"><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679469772"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621679469773"><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679469773"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679469774"><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679469774"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span id="local-6989586621679469775"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469775"><span class="hs-identifier hs-var">kl</span></a></span></span><span> </span><span id="local-6989586621679469776"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469776"><span class="hs-identifier hs-var">kr</span></a></span></span><span> </span><span id="local-6989586621679469777"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679469777"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span id="local-6989586621679469778"><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679469778"><span class="hs-identifier hs-var">pr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-749"></span><span>  </span><span id="local-6989586621679469779"><span class="annot"><span class="annottext">Map
  (StartStop (Note n'), StartStop (Note n'))
  [(Note n', DoubleOrnament)]
</span><a href="#local-6989586621679469779"><span class="hs-identifier hs-var">reg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; f (Map
        (StartStop (Note n'), StartStop (Note n'))
        [(Note n', DoubleOrnament)])
forall p p' o.
Ord p' =&gt;
(p -&gt; f p') -&gt; Map p [(Note n, o)] -&gt; f (Map p' [(Note n', o)])
</span><a href="#local-6989586621679469780"><span class="hs-identifier hs-var">traverseElabo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n'))
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((StartStop (Note n) -&gt; f (StartStop (Note n')))
 -&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; (StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n
-&gt; f (StartStop (Note n'), StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; StartStop (Note n) -&gt; f (StartStop (Note n'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; StartStop a -&gt; f (StartStop b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n'))
 -&gt; StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; (Note n -&gt; f (Note n'))
-&gt; StartStop (Note n)
-&gt; f (StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (Edge n) [(Note n, DoubleOrnament)]
</span><a href="#local-6989586621679469771"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-750"></span><span>  </span><span id="local-6989586621679469781"><span class="annot"><span class="annottext">Map (Note n', Note n') [(Note n', PassingOrnament)]
</span><a href="#local-6989586621679469781"><span class="hs-identifier hs-var">pass'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; f (Note n', Note n'))
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; f (Map (Note n', Note n') [(Note n', PassingOrnament)])
forall p p' o.
Ord p' =&gt;
(p -&gt; f p') -&gt; Map p [(Note n, o)] -&gt; f (Map p' [(Note n', o)])
</span><a href="#local-6989586621679469780"><span class="hs-identifier hs-var">traverseElabo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n'))
-&gt; (Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (InnerEdge n) [(Note n, PassingOrnament)]
</span><a href="#local-6989586621679469772"><span class="hs-identifier hs-var">pass</span></a></span><span>
</span><span id="line-751"></span><span>  </span><span id="local-6989586621679469782"><span class="annot"><span class="annottext">Map (Note n') [(Note n', RightOrnament)]
</span><a href="#local-6989586621679469782"><span class="hs-identifier hs-var">ls'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; f (Map (Note n') [(Note n', RightOrnament)])
forall p p' o.
Ord p' =&gt;
(p -&gt; f p') -&gt; Map p [(Note n, o)] -&gt; f (Map p' [(Note n', o)])
</span><a href="#local-6989586621679469780"><span class="hs-identifier hs-var">traverseElabo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, RightOrnament)]
</span><a href="#local-6989586621679469773"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span id="local-6989586621679469783"><span class="annot"><span class="annottext">Map (Note n') [(Note n', LeftOrnament)]
</span><a href="#local-6989586621679469783"><span class="hs-identifier hs-var">rs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; f (Map (Note n') [(Note n', LeftOrnament)])
forall p p' o.
Ord p' =&gt;
(p -&gt; f p') -&gt; Map p [(Note n, o)] -&gt; f (Map p' [(Note n', o)])
</span><a href="#local-6989586621679469780"><span class="hs-identifier hs-var">traverseElabo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (Note n) [(Note n, LeftOrnament)]
</span><a href="#local-6989586621679469774"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-753"></span><span>  </span><span id="local-6989586621679469784"><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
</span><a href="#local-6989586621679469784"><span class="hs-identifier hs-var">kl'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; HashSet (Edge n)
-&gt; f (HashSet (StartStop (Note n'), StartStop (Note n')))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; HashSet n -&gt; f (HashSet n')
</span><a href="Common.html#traverseSet"><span class="hs-identifier hs-var">traverseSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n'))
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((StartStop (Note n) -&gt; f (StartStop (Note n')))
 -&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; (StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n
-&gt; f (StartStop (Note n'), StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; StartStop (Note n) -&gt; f (StartStop (Note n'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; StartStop a -&gt; f (StartStop b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n'))
 -&gt; StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; (Note n -&gt; f (Note n'))
-&gt; StartStop (Note n)
-&gt; f (StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469775"><span class="hs-identifier hs-var">kl</span></a></span><span>
</span><span id="line-754"></span><span>  </span><span id="local-6989586621679469785"><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
</span><a href="#local-6989586621679469785"><span class="hs-identifier hs-var">kr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; HashSet (Edge n)
-&gt; f (HashSet (StartStop (Note n'), StartStop (Note n')))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; HashSet n -&gt; f (HashSet n')
</span><a href="Common.html#traverseSet"><span class="hs-identifier hs-var">traverseSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n'))
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((StartStop (Note n) -&gt; f (StartStop (Note n')))
 -&gt; Edge n -&gt; f (StartStop (Note n'), StartStop (Note n')))
-&gt; (StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n
-&gt; f (StartStop (Note n'), StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; StartStop (Note n) -&gt; f (StartStop (Note n'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; StartStop a -&gt; f (StartStop b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n'))
 -&gt; StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; (Note n -&gt; f (Note n'))
-&gt; StartStop (Note n)
-&gt; f (StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469776"><span class="hs-identifier hs-var">kr</span></a></span><span>
</span><span id="line-755"></span><span>  </span><span id="local-6989586621679469786"><span class="annot"><span class="annottext">MultiSet (Note n', Note n')
</span><a href="#local-6989586621679469786"><span class="hs-identifier hs-var">pl'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; f (Note n', Note n'))
-&gt; MultiSet (InnerEdge n) -&gt; f (MultiSet (Note n', Note n'))
forall b (f :: * -&gt; *) a.
(Eq b, Hashable b, Applicative f) =&gt;
(a -&gt; f b) -&gt; MultiSet a -&gt; f (MultiSet b)
</span><a href="Internal.MultiSet.html#traverse"><span class="hs-identifier hs-var">MS.traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n'))
-&gt; (Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679469777"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-756"></span><span>  </span><span id="local-6989586621679469787"><span class="annot"><span class="annottext">MultiSet (Note n', Note n')
</span><a href="#local-6989586621679469787"><span class="hs-identifier hs-var">pr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(InnerEdge n -&gt; f (Note n', Note n'))
-&gt; MultiSet (InnerEdge n) -&gt; f (MultiSet (Note n', Note n'))
forall b (f :: * -&gt; *) a.
(Eq b, Hashable b, Applicative f) =&gt;
(a -&gt; f b) -&gt; MultiSet a -&gt; f (MultiSet b)
</span><a href="Internal.MultiSet.html#traverse"><span class="hs-identifier hs-var">MS.traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n'))
-&gt; (Note n -&gt; f (Note n')) -&gt; InnerEdge n -&gt; f (Note n', Note n')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MultiSet (InnerEdge n)
</span><a href="#local-6989586621679469778"><span class="hs-identifier hs-var">pr</span></a></span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Map
  (StartStop (Note n'), StartStop (Note n'))
  [(Note n', DoubleOrnament)]
-&gt; Map (Note n', Note n') [(Note n', PassingOrnament)]
-&gt; Map (Note n') [(Note n', RightOrnament)]
-&gt; Map (Note n') [(Note n', LeftOrnament)]
-&gt; HashSet (StartStop (Note n'), StartStop (Note n'))
-&gt; HashSet (StartStop (Note n'), StartStop (Note n'))
-&gt; MultiSet (Note n', Note n')
-&gt; MultiSet (Note n', Note n')
-&gt; Split n'
forall n.
Map (Edge n) [(Note n, DoubleOrnament)]
-&gt; Map (InnerEdge n) [(Note n, PassingOrnament)]
-&gt; Map (Note n) [(Note n, RightOrnament)]
-&gt; Map (Note n) [(Note n, LeftOrnament)]
-&gt; HashSet (Edge n)
-&gt; HashSet (Edge n)
-&gt; MultiSet (InnerEdge n)
-&gt; MultiSet (InnerEdge n)
-&gt; Split n
</span><a href="PVGrammar.html#SplitOp"><span class="hs-identifier hs-var">SplitOp</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (StartStop (Note n'), StartStop (Note n'))
  [(Note n', DoubleOrnament)]
</span><a href="#local-6989586621679469779"><span class="hs-identifier hs-var">reg'</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n', Note n') [(Note n', PassingOrnament)]
</span><a href="#local-6989586621679469781"><span class="hs-identifier hs-var">pass'</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n') [(Note n', RightOrnament)]
</span><a href="#local-6989586621679469782"><span class="hs-identifier hs-var">ls'</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Note n') [(Note n', LeftOrnament)]
</span><a href="#local-6989586621679469783"><span class="hs-identifier hs-var">rs'</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
</span><a href="#local-6989586621679469784"><span class="hs-identifier hs-var">kl'</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (StartStop (Note n'), StartStop (Note n'))
</span><a href="#local-6989586621679469785"><span class="hs-identifier hs-var">kr'</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (Note n', Note n')
</span><a href="#local-6989586621679469786"><span class="hs-identifier hs-var">pl'</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSet (Note n', Note n')
</span><a href="#local-6989586621679469787"><span class="hs-identifier hs-var">pr'</span></a></span><span>
</span><span id="line-758"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-759"></span><span>  </span><span class="annot"><a href="#local-6989586621679469780"><span class="hs-identifier hs-type">traverseElabo</span></a></span><span>
</span><span id="line-760"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679465980"><span class="annot"><a href="#local-6989586621679465980"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621679465979"><span class="annot"><a href="#local-6989586621679465979"><span class="hs-identifier hs-type">p'</span></a></span></span><span> </span><span id="local-6989586621679465981"><span class="annot"><a href="#local-6989586621679465981"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-761"></span><span>     </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679465979"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465980"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465961"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465979"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679465980"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465963"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465981"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-764"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465961"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679465979"><span class="hs-identifier hs-type">p'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Note"><span class="hs-identifier hs-type">Note</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465962"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679465981"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>  </span><span id="local-6989586621679469780"><span class="annot"><span class="annottext">traverseElabo :: forall p p' o.
Ord p' =&gt;
(p -&gt; f p') -&gt; Map p [(Note n, o)] -&gt; f (Map p' [(Note n', o)])
</span><a href="#local-6989586621679469780"><span class="hs-identifier hs-var hs-var">traverseElabo</span></a></span></span><span> </span><span id="local-6989586621679469800"><span class="annot"><span class="annottext">p -&gt; f p'
</span><a href="#local-6989586621679469800"><span class="hs-identifier hs-var">fparent</span></a></span></span><span> </span><span id="local-6989586621679469801"><span class="annot"><span class="annottext">Map p [(Note n, o)]
</span><a href="#local-6989586621679469801"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(p', [(Note n', o)])] -&gt; Map p' [(Note n', o)])
-&gt; f [(p', [(Note n', o)])] -&gt; f (Map p' [(Note n', o)])
forall a b. (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(p', [(Note n', o)])] -&gt; Map p' [(Note n', o)]
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">(f [(p', [(Note n', o)])] -&gt; f (Map p' [(Note n', o)]))
-&gt; f [(p', [(Note n', o)])] -&gt; f (Map p' [(Note n', o)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(p, [(Note n, o)])]
-&gt; ((p, [(Note n, o)]) -&gt; f (p', [(Note n', o)]))
-&gt; f [(p', [(Note n', o)])]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map p [(Note n, o)] -&gt; [(p, [(Note n, o)])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map p [(Note n, o)]
</span><a href="#local-6989586621679469801"><span class="hs-identifier hs-var">mp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((p, [(Note n, o)]) -&gt; f (p', [(Note n', o)]))
 -&gt; f [(p', [(Note n', o)])])
-&gt; ((p, [(Note n, o)]) -&gt; f (p', [(Note n', o)]))
-&gt; f [(p', [(Note n', o)])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679469802"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679469802"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469803"><span class="annot"><span class="annottext">[(Note n, o)]
</span><a href="#local-6989586621679469803"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-766"></span><span>    </span><span class="hs-keyword">do</span><span>
</span><span id="line-767"></span><span>      </span><span id="local-6989586621679469804"><span class="annot"><span class="annottext">p'
</span><a href="#local-6989586621679469804"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">p -&gt; f p'
</span><a href="#local-6989586621679469800"><span class="hs-identifier hs-var">fparent</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621679469802"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-768"></span><span>      </span><span id="local-6989586621679469805"><span class="annot"><span class="annottext">[(Note n', o)]
</span><a href="#local-6989586621679469805"><span class="hs-identifier hs-var">cs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Note n, o) -&gt; f (Note n', o))
-&gt; [(Note n, o)] -&gt; f [(Note n', o)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679469806"><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469806"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469807"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679469807"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679469807"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Note n' -&gt; (Note n', o)) -&gt; f (Note n') -&gt; f (Note n', o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469770"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Note n
</span><a href="#local-6989586621679469806"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Note n, o)]
</span><a href="#local-6989586621679469803"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-769"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">p'
</span><a href="#local-6989586621679469804"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Note n', o)]
</span><a href="#local-6989586621679469805"><span class="hs-identifier hs-var">cs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-770"></span><span>
</span><span id="line-771"></span><span id="local-6989586621679465973"><span id="local-6989586621679465974"><span id="local-6989586621679465975"><span class="annot"><a href="PVGrammar.html#spreadTraversePitch"><span class="hs-identifier hs-type">spreadTraversePitch</span></a></span><span>
</span><span id="line-772"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465973"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679465974"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465974"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465975"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465973"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465974"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465975"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465973"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Spread"><span class="hs-identifier hs-type">Spread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465974"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-776"></span><span id="spreadTraversePitch"><span class="annot"><span class="annottext">spreadTraversePitch :: forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Spread n -&gt; f (Spread n')
</span><a href="PVGrammar.html#spreadTraversePitch"><span class="hs-identifier hs-var hs-var">spreadTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469823"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469823"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#SpreadOp"><span class="hs-identifier hs-type">SpreadOp</span></a></span><span> </span><span id="local-6989586621679469824"><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n)
</span><a href="#local-6989586621679469824"><span class="hs-identifier hs-var">dist</span></a></span></span><span> </span><span id="local-6989586621679469825"><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469825"><span class="hs-identifier hs-var">edges</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-777"></span><span>  </span><span id="local-6989586621679469826"><span class="annot"><span class="annottext">[(Note n', SpreadChildren n')]
</span><a href="#local-6989586621679469826"><span class="hs-identifier hs-var">dist'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Note n, SpreadChildren n) -&gt; f (Note n', SpreadChildren n'))
-&gt; [(Note n, SpreadChildren n)] -&gt; f [(Note n', SpreadChildren n')]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(Note n, SpreadChildren n) -&gt; f (Note n', SpreadChildren n')
forall {t :: * -&gt; *} {t :: * -&gt; *}.
(Traversable t, Traversable t) =&gt;
(t n, t n) -&gt; f (t n', t n')
</span><a href="#local-6989586621679469827"><span class="hs-identifier hs-var">travDist</span></a></span><span> </span><span class="annot"><span class="annottext">([(Note n, SpreadChildren n)] -&gt; f [(Note n', SpreadChildren n')])
-&gt; [(Note n, SpreadChildren n)] -&gt; f [(Note n', SpreadChildren n')]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n) -&gt; [(Note n, SpreadChildren n)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HM.toList</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Note n) (SpreadChildren n)
</span><a href="#local-6989586621679469824"><span class="hs-identifier hs-var">dist</span></a></span><span>
</span><span id="line-778"></span><span>  </span><span id="local-6989586621679469828"><span class="annot"><span class="annottext">Edges n'
</span><a href="#local-6989586621679469828"><span class="hs-identifier hs-var">edges'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; Edges n -&gt; f (Edges n')
</span><a href="PVGrammar.html#edgesTraversePitch"><span class="hs-identifier hs-var">edgesTraversePitch</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469823"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Edges n
</span><a href="#local-6989586621679469825"><span class="hs-identifier hs-var">edges</span></a></span><span>
</span><span id="line-779"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HashMap (Note n') (SpreadChildren n') -&gt; Edges n' -&gt; Spread n'
forall n.
HashMap (Note n) (SpreadChildren n) -&gt; Edges n -&gt; Spread n
</span><a href="PVGrammar.html#SpreadOp"><span class="hs-identifier hs-var">SpreadOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SpreadChildren n' -&gt; SpreadChildren n' -&gt; SpreadChildren n')
-&gt; [(Note n', SpreadChildren n')]
-&gt; HashMap (Note n') (SpreadChildren n')
forall k v.
(Eq k, Hashable k) =&gt;
(v -&gt; v -&gt; v) -&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HM.fromListWith</span></span><span> </span><span class="annot"><span class="annottext">SpreadChildren n' -&gt; SpreadChildren n' -&gt; SpreadChildren n'
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">[(Note n', SpreadChildren n')]
</span><a href="#local-6989586621679469826"><span class="hs-identifier hs-var">dist'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Edges n'
</span><a href="#local-6989586621679469828"><span class="hs-identifier hs-var">edges'</span></a></span><span>
</span><span id="line-780"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-781"></span><span>  </span><span id="local-6989586621679469827"><span class="annot"><span class="annottext">travDist :: (t n, t n) -&gt; f (t n', t n')
</span><a href="#local-6989586621679469827"><span class="hs-identifier hs-var hs-var">travDist</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679469848"><span class="annot"><span class="annottext">t n
</span><a href="#local-6989586621679469848"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679469849"><span class="annot"><span class="annottext">t n
</span><a href="#local-6989586621679469849"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-782"></span><span>    </span><span id="local-6989586621679469850"><span class="annot"><span class="annottext">t n'
</span><a href="#local-6989586621679469850"><span class="hs-identifier hs-var">k'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; t n -&gt; f (t n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469823"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t n
</span><a href="#local-6989586621679469848"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-783"></span><span>    </span><span id="local-6989586621679469851"><span class="annot"><span class="annottext">t n'
</span><a href="#local-6989586621679469851"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; t n -&gt; f (t n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469823"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t n
</span><a href="#local-6989586621679469849"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t n'
</span><a href="#local-6989586621679469850"><span class="hs-identifier hs-var">k'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t n'
</span><a href="#local-6989586621679469851"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-785"></span><span>
</span><span id="line-786"></span><span id="local-6989586621679465967"><span id="local-6989586621679465968"><span id="local-6989586621679465969"><span class="annot"><a href="PVGrammar.html#freezeTraversePitch"><span class="hs-identifier hs-type">freezeTraversePitch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679465967"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679465968"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679465969"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465967"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465968"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465969"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679465967"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#Freeze"><span class="hs-identifier hs-type">Freeze</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679465968"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-787"></span><span id="freezeTraversePitch"><span class="annot"><span class="annottext">freezeTraversePitch :: forall (f :: * -&gt; *) n' n.
(Applicative f, Hashable n') =&gt;
(n -&gt; f n') -&gt; Freeze n -&gt; f (Freeze n')
</span><a href="PVGrammar.html#freezeTraversePitch"><span class="hs-identifier hs-var hs-var">freezeTraversePitch</span></a></span></span><span> </span><span id="local-6989586621679469871"><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469871"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PVGrammar.html#FreezeOp"><span class="hs-identifier hs-type">FreezeOp</span></a></span><span> </span><span id="local-6989586621679469872"><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469872"><span class="hs-identifier hs-var">ties</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n') -&gt; Freeze n'
forall n. HashSet (Edge n) -&gt; Freeze n
</span><a href="PVGrammar.html#FreezeOp"><span class="hs-identifier hs-var">FreezeOp</span></a></span><span> </span><span class="annot"><span class="annottext">(HashSet (Edge n') -&gt; Freeze n')
-&gt; f (HashSet (Edge n')) -&gt; f (Freeze n')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Edge n -&gt; f (Edge n'))
-&gt; HashSet (Edge n) -&gt; f (HashSet (Edge n'))
forall (f :: * -&gt; *) n' n.
(Applicative f, Eq n', Hashable n') =&gt;
(n -&gt; f n') -&gt; HashSet n -&gt; f (HashSet n')
</span><a href="Common.html#traverseSet"><span class="hs-identifier hs-var">traverseSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n -&gt; f (Edge n')
forall (f :: * -&gt; *) n n'.
Applicative f =&gt;
(n -&gt; f n') -&gt; (n, n) -&gt; f (n', n')
</span><a href="PVGrammar.html#traverseEdge"><span class="hs-identifier hs-var">traverseEdge</span></a></span><span> </span><span class="annot"><span class="annottext">((StartStop (Note n) -&gt; f (StartStop (Note n')))
 -&gt; Edge n -&gt; f (Edge n'))
-&gt; (StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; Edge n
-&gt; f (Edge n')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Note n -&gt; f (Note n'))
-&gt; StartStop (Note n) -&gt; f (StartStop (Note n'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; StartStop a -&gt; f (StartStop b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Note n -&gt; f (Note n'))
 -&gt; StartStop (Note n) -&gt; f (StartStop (Note n')))
-&gt; (Note n -&gt; f (Note n'))
-&gt; StartStop (Note n)
-&gt; f (StartStop (Note n'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(n -&gt; f n') -&gt; Note n -&gt; f (Note n')
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Note a -&gt; f (Note b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">n -&gt; f n'
</span><a href="#local-6989586621679469871"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashSet (Edge n)
</span><a href="#local-6989586621679469872"><span class="hs-identifier hs-var">ties</span></a></span><span>
</span><span id="line-788"></span></pre></body></html>