<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LINE 2 &quot;./Graphics/Rendering/Cairo/Internal/Surfaces/PNG.chs&quot; #-}</span><span>
</span><span id="line-2"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Module : Graphics.Rendering.Cairo.Internal.Surfaces.PNG</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Copyright : (c) Paolo Martini 2005</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- License : BSD-style (see cairo/COPYRIGHT)</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Maintainer : p.martini@neuralnoise.com</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Stability : experimental</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Portability : portable</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Reading and writing PNG images.</span><span>
</span><span id="line-13"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html"><span class="hs-identifier">Graphics.Rendering.Cairo.Internal.Surfaces.PNG</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Graphics.Rendering.Cairo.Types.html"><span class="hs-identifier">Graphics.Rendering.Cairo.Types</span></a></span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LINE 18 &quot;./Graphics/Rendering/Cairo/Internal/Surfaces/PNG.chs&quot; #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign.C</span></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-pragma">{-# LINE 23 &quot;./Graphics/Rendering/Cairo/Internal/Surfaces/PNG.chs&quot; #-}</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="annot"><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html#imageSurfaceCreateFromPNG"><span class="hs-identifier hs-type">imageSurfaceCreateFromPNG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Graphics.Rendering.Cairo.Types.html#Surface"><span class="hs-identifier hs-type">Surface</span></a></span><span>
</span><span id="line-27"></span><span id="imageSurfaceCreateFromPNG"><span class="annot"><span class="annottext">imageSurfaceCreateFromPNG :: FilePath -&gt; IO Surface
</span><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html#imageSurfaceCreateFromPNG"><span class="hs-identifier hs-var hs-var">imageSurfaceCreateFromPNG</span></a></span></span><span> </span><span id="local-6989586621679107796"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679107796"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; (CString -&gt; IO Surface) -&gt; IO Surface
forall a. FilePath -&gt; (CString -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">withCAString</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679107796"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO Surface) -&gt; IO Surface)
-&gt; (CString -&gt; IO Surface) -&gt; IO Surface
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679107798"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679107798"><span class="hs-identifier hs-var">filenamePtr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><span class="annottext">CString -&gt; IO (Ptr Surface)
</span><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html#cairo_image_surface_create_from_png"><span class="hs-identifier hs-var">cairo_image_surface_create_from_png</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679107798"><span class="hs-identifier hs-var">filenamePtr</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><span class="annottext">IO (Ptr Surface) -&gt; (Ptr Surface -&gt; IO Surface) -&gt; IO Surface
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Ptr Surface -&gt; IO Surface
</span><a href="Graphics.Rendering.Cairo.Types.html#mkSurface"><span class="hs-identifier hs-var">mkSurface</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="annot"><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html#surfaceWriteToPNG"><span class="hs-identifier hs-type">surfaceWriteToPNG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Graphics.Rendering.Cairo.Types.html#Surface"><span class="hs-identifier hs-type">Surface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Graphics.Rendering.Cairo.Types.html#Status"><span class="hs-identifier hs-type">Status</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span id="surfaceWriteToPNG"><span class="annot"><span class="annottext">surfaceWriteToPNG :: Surface -&gt; FilePath -&gt; IO Status
</span><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html#surfaceWriteToPNG"><span class="hs-identifier hs-var hs-var">surfaceWriteToPNG</span></a></span></span><span> </span><span id="local-6989586621679107802"><span class="annot"><span class="annottext">Surface
</span><a href="#local-6989586621679107802"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621679107803"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679107803"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="annottext">Surface -&gt; (Ptr Surface -&gt; IO Status) -&gt; IO Status
forall {b}. Surface -&gt; (Ptr Surface -&gt; IO b) -&gt; IO b
</span><a href="Graphics.Rendering.Cairo.Types.html#withSurface"><span class="hs-identifier hs-var">withSurface</span></a></span><span> </span><span class="annot"><span class="annottext">Surface
</span><a href="#local-6989586621679107802"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Surface -&gt; IO Status) -&gt; IO Status)
-&gt; (Ptr Surface -&gt; IO Status) -&gt; IO Status
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679107806"><span class="annot"><span class="annottext">Ptr Surface
</span><a href="#local-6989586621679107806"><span class="hs-identifier hs-var">a1'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; (CString -&gt; IO Status) -&gt; IO Status
forall a. FilePath -&gt; (CString -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">withCAString</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679107803"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">((CString -&gt; IO Status) -&gt; IO Status)
-&gt; (CString -&gt; IO Status) -&gt; IO Status
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679107807"><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679107807"><span class="hs-identifier hs-var">a2'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="annottext">Ptr Surface -&gt; CString -&gt; IO CInt
</span><a href="Graphics.Rendering.Cairo.Internal.Surfaces.PNG.html#surfaceWriteToPNG%27_"><span class="hs-identifier hs-var">surfaceWriteToPNG'_</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Surface
</span><a href="#local-6989586621679107806"><span class="hs-identifier hs-var">a1'</span></a></span><span> </span><span class="annot"><span class="annottext">CString
</span><a href="#local-6989586621679107807"><span class="hs-identifier hs-var">a2'</span></a></span><span> </span><span class="annot"><span class="annottext">IO CInt -&gt; (CInt -&gt; IO Status) -&gt; IO Status
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679107809"><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679107809"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span id="local-6989586621679107814"><span class="annot"><span class="annottext">res' :: Status
</span><a href="#local-6989586621679107814"><span class="hs-identifier hs-var hs-var">res'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Status
forall i e. (Integral i, Enum e) =&gt; i -&gt; e
</span><a href="Graphics.Rendering.Cairo.Types.html#cToEnum"><span class="hs-identifier hs-var">cToEnum</span></a></span><span> </span><span class="annot"><span class="annottext">CInt
</span><a href="#local-6989586621679107809"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><span class="annottext">Status -&gt; IO Status
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621679107814"><span class="hs-identifier hs-var">res'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-pragma">{-# LINE 33 &quot;./Graphics/Rendering/Cairo/Internal/Surfaces/PNG.chs&quot; #-}</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">ccall</span><span> </span><span class="hs-keyword">unsafe</span><span> </span><span class="hs-string">&quot;cairo_image_surface_create_from_png&quot;</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-identifier">cairo_image_surface_create_from_png</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Surface</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">ccall</span><span> </span><span class="hs-keyword">safe</span><span> </span><span class="hs-string">&quot;cairo_surface_write_to_png&quot;</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-identifier">surfaceWriteToPNG'_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Surface</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span></pre></body></html>