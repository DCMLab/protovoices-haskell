<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# OPTIONS_HADDOCK show-extensions #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Internal.html"><span class="hs-identifier">Internal</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Create new constraints</span></span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><span class="hs-identifier">TcPlugin.newWanted</span></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Constraint.html#newGiven"><span class="hs-identifier">newGiven</span></a></span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Creating evidence</span></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Evidence.html#evByFiat"><span class="hs-identifier">evByFiat</span></a></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Lookup</span></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.html#lookupModule"><span class="hs-identifier">lookupModule</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.html#lookupName"><span class="hs-identifier">lookupName</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Trace state of the plugin</span></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.html#tracePlugin"><span class="hs-identifier">tracePlugin</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Substitutions</span></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.html#flattenGivens"><span class="hs-identifier">flattenGivens</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Constraint.html#mkSubst"><span class="hs-identifier">mkSubst</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.html#mkSubst%27"><span class="hs-identifier">mkSubst'</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Type.html#substType"><span class="hs-identifier">substType</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.html#substCt"><span class="hs-identifier">substCt</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">where</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Driver.Config.Finder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">initFinderOpts</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Plugin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TcPluginM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookupOrig</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tcPluginTrace</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Plugin</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TcPlugin</span></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">newWanted</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getTopEnv</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tcPluginIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">findImportedModule</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TcPlugin</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TcPluginSolveResult</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">second</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">on</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">groupBy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">partition</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sortOn</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TcType</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GhcApi.Constraint.html"><span class="hs-identifier">GhcApi.Constraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Ct</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GhcApi.GhcPlugins.html"><span class="hs-identifier">GhcApi.GhcPlugins</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Internal.Type.html"><span class="hs-identifier">Internal.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Internal.Type.html#substType"><span class="hs-identifier">substType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Internal.Constraint.html"><span class="hs-identifier">Internal.Constraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Internal.Constraint.html#newGiven"><span class="hs-identifier">newGiven</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Constraint.html#flatToCt"><span class="hs-identifier">flatToCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Constraint.html#mkSubst"><span class="hs-identifier">mkSubst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Internal.Constraint.html#overEvidencePredType"><span class="hs-identifier">overEvidencePredType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Internal.Evidence.html"><span class="hs-identifier">Internal.Evidence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Internal.Evidence.html#evByFiat"><span class="hs-identifier">evByFiat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="annot"><span class="hs-comment">-- | Find a module</span></span><span>
</span><span id="line-44"></span><span class="annot"><a href="Internal.html#lookupModule"><span class="hs-identifier hs-type">lookupModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ModuleName</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Name of the module</span></span><span>
</span><span id="line-45"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FastString</span></span><span> </span><span class="hs-comment">-- ^ Name of the package containing the module.</span><span>
</span><span id="line-46"></span><span>                           </span><span class="hs-comment">-- NOTE: This value is ignored on ghc&gt;=8.0.</span><span>
</span><span id="line-47"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Module</span></span><span>
</span><span id="line-48"></span><span id="lookupModule"><span class="annot"><span class="annottext">lookupModule :: ModuleName -&gt; FastString -&gt; TcPluginM Module
</span><a href="Internal.html#lookupModule"><span class="hs-identifier hs-var hs-var">lookupModule</span></a></span></span><span> </span><span id="local-6989586621679226732"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679226732"><span class="hs-identifier hs-var">mod_nm</span></a></span></span><span> </span><span id="local-6989586621679226733"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621679226733"><span class="hs-identifier hs-var">_pkg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-49"></span><span>  </span><span id="local-6989586621679226734"><span class="annot"><a href="#local-6989586621679226734"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcPluginM HscEnv
</span><span class="hs-identifier hs-var">TcPlugin.getTopEnv</span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679226735"><span class="annot"><a href="#local-6989586621679226735"><span class="hs-identifier hs-var hs-var">fc</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; FinderCache
</span><span class="hs-identifier hs-var">hsc_FC</span></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621679226734"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-51"></span><span>      </span><span id="local-6989586621679226737"><span class="annot"><a href="#local-6989586621679226737"><span class="hs-identifier hs-var hs-var">dflags</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><span class="hs-identifier hs-var">hsc_dflags</span></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621679226734"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-52"></span><span>      </span><span id="local-6989586621679226739"><span class="annot"><a href="#local-6989586621679226739"><span class="hs-identifier hs-var hs-var">fopts</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; FinderOpts
</span><span class="hs-identifier hs-var">initFinderOpts</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621679226737"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-53"></span><span>      </span><span id="local-6989586621679226741"><span class="annot"><a href="#local-6989586621679226741"><span class="hs-identifier hs-var hs-var">units</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; HscEnv -&gt; UnitState
HscEnv -&gt; UnitState
</span><span class="hs-identifier hs-var">hsc_units</span></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621679226734"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-54"></span><span>      </span><span id="local-6989586621679226743"><span class="annot"><a href="#local-6989586621679226743"><span class="hs-identifier hs-var hs-var">mhome_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Maybe HomeUnit
</span><span class="hs-identifier hs-var">hsc_home_unit_maybe</span></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621679226734"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span id="local-6989586621679226745"><span class="annot"><a href="#local-6989586621679226745"><span class="hs-identifier hs-var">found_module</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin.tcPluginIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">findPluginModule</span></span><span> </span><span class="annot"><a href="#local-6989586621679226735"><span class="hs-identifier hs-type">fc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679226739"><span class="hs-identifier hs-type">fopts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679226741"><span class="hs-identifier hs-type">units</span></a></span><span>
</span><span id="line-56"></span><span>                                          </span><span class="annot"><a href="#local-6989586621679226743"><span class="hs-identifier hs-type">mhome_unit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679226732"><span class="hs-identifier hs-type">mod_nm</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679226745"><span class="hs-identifier hs-type">found_module</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Found</span></span><span> </span><span class="annot"><span class="annottext">ModLocation
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679226748"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621679226748"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Module -&gt; TcPluginM Module
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621679226748"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">FindResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-60"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679226749"><span class="annot"><span class="annottext">pkg_qual :: PkgQual
</span><a href="#local-6989586621679226749"><span class="hs-identifier hs-var hs-var hs-var">pkg_qual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PkgQual -&gt; (HomeUnit -&gt; PkgQual) -&gt; Maybe HomeUnit -&gt; PkgQual
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">PkgQual
</span><span class="hs-identifier hs-var">NoPkgQual</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; PkgQual
</span><span class="hs-identifier hs-var">ThisPkg</span></span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; PkgQual) -&gt; (HomeUnit -&gt; UnitId) -&gt; HomeUnit -&gt; PkgQual
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HomeUnit -&gt; UnitId
forall u. GenHomeUnit u -&gt; UnitId
</span><span class="hs-identifier hs-var">homeUnitId</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe HomeUnit
</span><a href="#local-6989586621679226743"><span class="hs-identifier hs-var">mhome_unit</span></a></span><span>
</span><span id="line-61"></span><span>      </span><span id="local-6989586621679226755"><span class="annot"><a href="#local-6989586621679226755"><span class="hs-identifier hs-var">found_module'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; PkgQual -&gt; TcPluginM FindResult
</span><span class="hs-identifier hs-var">TcPlugin.findImportedModule</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679226732"><span class="hs-identifier hs-var">mod_nm</span></a></span><span> </span><span class="annot"><span class="annottext">PkgQual
</span><a href="#local-6989586621679226749"><span class="hs-identifier hs-var">pkg_qual</span></a></span><span>
</span><span id="line-62"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679226755"><span class="hs-identifier hs-type">found_module'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Found</span></span><span> </span><span class="annot"><span class="annottext">ModLocation
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679226756"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621679226756"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Module -&gt; TcPluginM Module
forall a. a -&gt; TcPluginM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621679226756"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><span class="annottext">FindResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM Module
forall a. String -&gt; SDoc -&gt; a
</span><span class="hs-identifier hs-var">panicDoc</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Couldn't find module&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621679226732"><span class="hs-identifier hs-var">mod_nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="annot"><span class="hs-comment">-- | Find a 'Name' in a 'Module' given an 'OccName'</span></span><span>
</span><span id="line-67"></span><span class="annot"><a href="Internal.html#lookupName"><span class="hs-identifier hs-type">lookupName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Module</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OccName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPluginM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-68"></span><span id="lookupName"><span class="annot"><span class="annottext">lookupName :: Module -&gt; OccName -&gt; TcPluginM Name
</span><a href="Internal.html#lookupName"><span class="hs-identifier hs-var hs-var">lookupName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; OccName -&gt; TcPluginM Name
</span><span class="hs-identifier hs-var">lookupOrig</span></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Print out extra information about the initialisation, stop, and every run</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- of the plugin when @-ddump-tc-trace@ is enabled.</span><span>
</span><span id="line-72"></span><span class="annot"><a href="Internal.html#tracePlugin"><span class="hs-identifier hs-type">tracePlugin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin</span></span><span>
</span><span id="line-73"></span><span id="tracePlugin"><span class="annot"><span class="annottext">tracePlugin :: String -&gt; TcPlugin -&gt; TcPlugin
</span><a href="Internal.html#tracePlugin"><span class="hs-identifier hs-var hs-var">tracePlugin</span></a></span></span><span> </span><span id="local-6989586621679226760"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin</span></span><span class="hs-special">{</span><span id="local-6989586621679226762"><span id="local-6989586621679226763"><span id="local-6989586621679226764"><span id="local-6989586621679226765"><span class="annot"><span class="annottext">TcPluginM s
s -&gt; UniqFM TyCon TcPluginRewriter
s -&gt; TcPluginM ()
s -&gt; TcPluginSolver
tcPluginInit :: TcPluginM s
tcPluginSolve :: s -&gt; TcPluginSolver
tcPluginRewrite :: s -&gt; UniqFM TyCon TcPluginRewriter
tcPluginStop :: s -&gt; TcPluginM ()
tcPluginStop :: ()
tcPluginRewrite :: ()
tcPluginSolve :: ()
tcPluginInit :: ()
</span><a href="#local-6989586621679226762"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcPlugin</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcPluginInit :: TcPluginM s
</span><span class="hs-identifier hs-var">tcPluginInit</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcPluginM s
</span><a href="#local-6989586621679226770"><span class="hs-identifier hs-var">traceInit</span></a></span><span>
</span><span id="line-74"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcPluginSolve :: s -&gt; TcPluginSolver
</span><span class="hs-identifier hs-var">tcPluginSolve</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">s -&gt; TcPluginSolver
</span><a href="#local-6989586621679226771"><span class="hs-identifier hs-var">traceSolve</span></a></span><span>
</span><span id="line-75"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcPluginRewrite :: s -&gt; UniqFM TyCon TcPluginRewriter
</span><span class="hs-identifier hs-var">tcPluginRewrite</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">s -&gt; UniqFM TyCon TcPluginRewriter
</span><a href="#local-6989586621679226764"><span class="hs-identifier hs-var">tcPluginRewrite</span></a></span><span>
</span><span id="line-76"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcPluginStop :: s -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginStop</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">s -&gt; TcPluginM ()
</span><a href="#local-6989586621679226772"><span class="hs-identifier hs-var">traceStop</span></a></span><span>
</span><span id="line-77"></span><span>                                      </span><span class="hs-special">}</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-79"></span><span>    </span><span id="local-6989586621679226770"><span class="annot"><span class="annottext">traceInit :: TcPluginM s
</span><a href="#local-6989586621679226770"><span class="hs-identifier hs-var hs-var">traceInit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPluginInit &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><span class="hs-identifier hs-var">empty</span></span><span> </span><span class="annot"><span class="annottext">TcPluginM () -&gt; TcPluginM s -&gt; TcPluginM s
forall a b. TcPluginM a -&gt; TcPluginM b -&gt; TcPluginM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TcPluginM s
</span><a href="#local-6989586621679226762"><span class="hs-identifier hs-var">tcPluginInit</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>    </span><span id="local-6989586621679226772"><span class="annot"><span class="annottext">traceStop :: s -&gt; TcPluginM ()
</span><a href="#local-6989586621679226772"><span class="hs-identifier hs-var hs-var">traceStop</span></a></span></span><span>  </span><span id="local-6989586621679226779"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679226779"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPluginStop &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><span class="hs-identifier hs-var">empty</span></span><span> </span><span class="annot"><span class="annottext">TcPluginM () -&gt; TcPluginM () -&gt; TcPluginM ()
forall a b. TcPluginM a -&gt; TcPluginM b -&gt; TcPluginM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">s -&gt; TcPluginM ()
</span><a href="#local-6989586621679226765"><span class="hs-identifier hs-var">tcPluginStop</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679226779"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621679226771"><span class="annot"><span class="annottext">traceSolve :: s -&gt; TcPluginSolver
</span><a href="#local-6989586621679226771"><span class="hs-identifier hs-var hs-var">traceSolve</span></a></span></span><span> </span><span id="local-6989586621679226821"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679226821"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621679226822"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621679226822"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621679226823"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226823"><span class="hs-identifier hs-var">given</span></a></span></span><span> </span><span id="local-6989586621679226824"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226824"><span class="hs-identifier hs-var">wanted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPluginSolve start &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;given   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226823"><span class="hs-identifier hs-var">given</span></a></span><span>
</span><span id="line-87"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wanted  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226824"><span class="hs-identifier hs-var">wanted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>      </span><span id="local-6989586621679226828"><span class="annot"><a href="#local-6989586621679226828"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">s -&gt; TcPluginSolver
</span><a href="#local-6989586621679226763"><span class="hs-identifier hs-var">tcPluginSolve</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679226821"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621679226822"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226823"><span class="hs-identifier hs-var">given</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226824"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679226828"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">TcPluginOk</span></span><span> </span><span id="local-6989586621679226830"><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679226830"><span class="hs-identifier hs-var">solved</span></a></span></span><span> </span><span id="local-6989586621679226831"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226831"><span class="hs-identifier hs-var">new</span></a></span></span><span>
</span><span id="line-91"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPluginSolve ok &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;solved =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679226830"><span class="hs-identifier hs-var">solved</span></a></span><span>
</span><span id="line-93"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;new    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226831"><span class="hs-identifier hs-var">new</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">TcPluginContradiction</span></span><span> </span><span id="local-6989586621679226833"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226833"><span class="hs-identifier hs-var">bad</span></a></span></span><span>
</span><span id="line-95"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPluginSolve contradiction &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bad =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226833"><span class="hs-identifier hs-var">bad</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">TcPluginSolveResult</span></span><span> </span><span id="local-6989586621679226835"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226835"><span class="hs-identifier hs-var">bad</span></a></span></span><span> </span><span id="local-6989586621679226836"><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679226836"><span class="hs-identifier hs-var">solved</span></a></span></span><span> </span><span id="local-6989586621679226837"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226837"><span class="hs-identifier hs-var">new</span></a></span></span><span>
</span><span id="line-98"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcPluginM ()
</span><span class="hs-identifier hs-var">tcPluginTrace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPluginSolveResult &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679226760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;solved =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[(EvTerm, Ct)]
</span><a href="#local-6989586621679226836"><span class="hs-identifier hs-var">solved</span></a></span><span>
</span><span id="line-100"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bad    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226835"><span class="hs-identifier hs-var">bad</span></a></span><span>
</span><span id="line-101"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">$$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;new    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226837"><span class="hs-identifier hs-var">new</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621679226828"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Flattens evidence of constraints by substituting each others equalities.</span><span>
</span><span id="line-105"></span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- __NB:__ Should only be used on /[G]iven/ constraints!</span><span>
</span><span id="line-107"></span><span class="hs-comment">--</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- __NB:__ Doesn't flatten under binders</span><span>
</span><span id="line-109"></span><span class="annot"><a href="Internal.html#flattenGivens"><span class="hs-identifier hs-type">flattenGivens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span>
</span><span id="line-110"></span><span id="flattenGivens"><span class="annot"><span class="annottext">flattenGivens :: [Ct] -&gt; [Ct]
</span><a href="Internal.html#flattenGivens"><span class="hs-identifier hs-var hs-var">flattenGivens</span></a></span></span><span> </span><span id="local-6989586621679226838"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226838"><span class="hs-identifier hs-var">givens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="annottext">([((TcTyVar, TcType), Ct)] -&gt; Maybe Ct)
-&gt; [[((TcTyVar, TcType), Ct)]] -&gt; [Ct]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">[((TcTyVar, TcType), Ct)] -&gt; Maybe Ct
</span><a href="Internal.Constraint.html#flatToCt"><span class="hs-identifier hs-var">flatToCt</span></a></span><span> </span><span class="annot"><span class="annottext">[[((TcTyVar, TcType), Ct)]]
</span><a href="#local-6989586621679226839"><span class="hs-identifier hs-var">flat</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; [Ct] -&gt; [Ct]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Ct) -&gt; [Ct] -&gt; [Ct]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(TcTyVar, TcType)] -&gt; Ct -&gt; Ct
</span><a href="Internal.html#substCt"><span class="hs-identifier hs-var">substCt</span></a></span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, TcType)]
</span><a href="#local-6989586621679226840"><span class="hs-identifier hs-var">subst'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226838"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-112"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621679226841"><span class="annot"><span class="annottext">subst :: [((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226841"><span class="hs-identifier hs-var hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; [((TcTyVar, TcType), Ct)]
</span><a href="Internal.html#mkSubst%27"><span class="hs-identifier hs-var">mkSubst'</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621679226838"><span class="hs-identifier hs-var">givens</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679226839"><span class="annot"><span class="annottext">[[((TcTyVar, TcType), Ct)]]
</span><a href="#local-6989586621679226839"><span class="hs-identifier hs-var">flat</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679226840"><span class="annot"><span class="annottext">[(TcTyVar, TcType)]
</span><a href="#local-6989586621679226840"><span class="hs-identifier hs-var">subst'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([[((TcTyVar, TcType), Ct)]] -&gt; [(TcTyVar, TcType)])
-&gt; ([[((TcTyVar, TcType), Ct)]], [[((TcTyVar, TcType), Ct)]])
-&gt; ([[((TcTyVar, TcType), Ct)]], [(TcTyVar, TcType)])
forall b c d. (b -&gt; c) -&gt; (d, b) -&gt; (d, c)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType))
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [(TcTyVar, TcType)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">([((TcTyVar, TcType), Ct)] -&gt; [(TcTyVar, TcType)])
-&gt; ([[((TcTyVar, TcType), Ct)]] -&gt; [((TcTyVar, TcType), Ct)])
-&gt; [[((TcTyVar, TcType), Ct)]]
-&gt; [(TcTyVar, TcType)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[[((TcTyVar, TcType), Ct)]] -&gt; [((TcTyVar, TcType), Ct)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>    </span><span class="annot"><span class="annottext">(([[((TcTyVar, TcType), Ct)]], [[((TcTyVar, TcType), Ct)]])
 -&gt; ([[((TcTyVar, TcType), Ct)]], [(TcTyVar, TcType)]))
-&gt; ([[((TcTyVar, TcType), Ct)]], [[((TcTyVar, TcType), Ct)]])
-&gt; ([[((TcTyVar, TcType), Ct)]], [(TcTyVar, TcType)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([((TcTyVar, TcType), Ct)] -&gt; Bool)
-&gt; [[((TcTyVar, TcType), Ct)]]
-&gt; ([[((TcTyVar, TcType), Ct)]], [[((TcTyVar, TcType), Ct)]])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">partition</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Bool)
-&gt; ([((TcTyVar, TcType), Ct)] -&gt; Int)
-&gt; [((TcTyVar, TcType), Ct)]
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[((TcTyVar, TcType), Ct)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">([[((TcTyVar, TcType), Ct)]]
 -&gt; ([[((TcTyVar, TcType), Ct)]], [[((TcTyVar, TcType), Ct)]]))
-&gt; [[((TcTyVar, TcType), Ct)]]
-&gt; ([[((TcTyVar, TcType), Ct)]], [[((TcTyVar, TcType), Ct)]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(((TcTyVar, TcType), Ct) -&gt; ((TcTyVar, TcType), Ct) -&gt; Bool)
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [[((TcTyVar, TcType), Ct)]]
forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [[a]]
</span><span class="hs-identifier hs-var">groupBy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar -&gt; TcTyVar -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">(TcTyVar -&gt; TcTyVar -&gt; Bool)
-&gt; (((TcTyVar, TcType), Ct) -&gt; TcTyVar)
-&gt; ((TcTyVar, TcType), Ct)
-&gt; ((TcTyVar, TcType), Ct)
-&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TcTyVar, TcType) -&gt; TcTyVar
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="annot"><span class="annottext">((TcTyVar, TcType) -&gt; TcTyVar)
-&gt; (((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType))
-&gt; ((TcTyVar, TcType), Ct)
-&gt; TcTyVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="annottext">([((TcTyVar, TcType), Ct)] -&gt; [[((TcTyVar, TcType), Ct)]])
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [[((TcTyVar, TcType), Ct)]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(((TcTyVar, TcType), Ct) -&gt; TcTyVar)
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortOn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TcTyVar, TcType) -&gt; TcTyVar
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="annot"><span class="annottext">((TcTyVar, TcType) -&gt; TcTyVar)
-&gt; (((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType))
-&gt; ((TcTyVar, TcType), Ct)
-&gt; TcTyVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226841"><span class="hs-identifier hs-var">subst</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-comment">-- | Create flattened substitutions from type equalities, i.e. the substitutions</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- have been applied to each others right hand sides.</span><span>
</span><span id="line-122"></span><span class="annot"><a href="Internal.html#mkSubst%27"><span class="hs-identifier hs-type">mkSubst'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TcTyVar</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TcType</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span id="mkSubst%27"><span class="annot"><span class="annottext">mkSubst' :: [Ct] -&gt; [((TcTyVar, TcType), Ct)]
</span><a href="Internal.html#mkSubst%27"><span class="hs-identifier hs-var hs-var">mkSubst'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(((TcTyVar, TcType), Ct)
 -&gt; [((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)])
-&gt; [((TcTyVar, TcType), Ct)]
-&gt; [((TcTyVar, TcType), Ct)]
-&gt; [((TcTyVar, TcType), Ct)]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">((TcTyVar, TcType), Ct)
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226857"><span class="hs-identifier hs-var">substSubst</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">([((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)])
-&gt; ([Ct] -&gt; [((TcTyVar, TcType), Ct)])
-&gt; [Ct]
-&gt; [((TcTyVar, TcType), Ct)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Maybe ((TcTyVar, TcType), Ct))
-&gt; [Ct] -&gt; [((TcTyVar, TcType), Ct)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe ((TcTyVar, TcType), Ct)
</span><a href="Internal.Constraint.html#mkSubst"><span class="hs-identifier hs-var">mkSubst</span></a></span><span>
</span><span id="line-124"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="#local-6989586621679226857"><span class="hs-identifier hs-type">substSubst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TcTyVar</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TcType</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TcTyVar</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TcType</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TcTyVar</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">TcType</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679226857"><span class="annot"><span class="annottext">substSubst :: ((TcTyVar, TcType), Ct)
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226857"><span class="hs-identifier hs-var hs-var">substSubst</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679226858"><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621679226858"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679226859"><span class="annot"><span class="annottext">TcType
</span><a href="#local-6989586621679226859"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span id="local-6989586621679226860"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679226860"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679226861"><span class="annot"><span class="annottext">[((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226861"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621679226858"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(TcTyVar, TcType)] -&gt; TcType -&gt; TcType
</span><a href="Internal.Type.html#substType"><span class="hs-identifier hs-var">substType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType))
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [(TcTyVar, TcType)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">((TcTyVar, TcType), Ct) -&gt; (TcTyVar, TcType)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226861"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcType
</span><a href="#local-6989586621679226859"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621679226860"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>                           </span><span class="annot"><span class="annottext">((TcTyVar, TcType), Ct)
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(((TcTyVar, TcType), Ct) -&gt; ((TcTyVar, TcType), Ct))
-&gt; [((TcTyVar, TcType), Ct)] -&gt; [((TcTyVar, TcType), Ct)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((TcTyVar, TcType) -&gt; (TcTyVar, TcType))
-&gt; ((TcTyVar, TcType), Ct) -&gt; ((TcTyVar, TcType), Ct)
forall b c d. (b -&gt; c) -&gt; (b, d) -&gt; (c, d)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (b, d) (c, d)
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TcType -&gt; TcType) -&gt; (TcTyVar, TcType) -&gt; (TcTyVar, TcType)
forall b c d. (b -&gt; c) -&gt; (d, b) -&gt; (d, c)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(TcTyVar, TcType)] -&gt; TcType -&gt; TcType
</span><a href="Internal.Type.html#substType"><span class="hs-identifier hs-var">substType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyVar
</span><a href="#local-6989586621679226858"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">TcType
</span><a href="#local-6989586621679226859"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[((TcTyVar, TcType), Ct)]
</span><a href="#local-6989586621679226861"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><span class="hs-comment">-- | Apply substitution in the evidence of Cts</span></span><span>
</span><span id="line-132"></span><span class="annot"><a href="Internal.html#substCt"><span class="hs-identifier hs-type">substCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TcTyVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TcType</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ct</span></span><span>
</span><span id="line-133"></span><span id="substCt"><span class="annot"><span class="annottext">substCt :: [(TcTyVar, TcType)] -&gt; Ct -&gt; Ct
</span><a href="Internal.html#substCt"><span class="hs-identifier hs-var hs-var">substCt</span></a></span></span><span> </span><span id="local-6989586621679226862"><span class="annot"><span class="annottext">[(TcTyVar, TcType)]
</span><a href="#local-6989586621679226862"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TcType -&gt; TcType) -&gt; Ct -&gt; Ct
</span><a href="Internal.Constraint.html#overEvidencePredType"><span class="hs-identifier hs-var">overEvidencePredType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(TcTyVar, TcType)] -&gt; TcType -&gt; TcType
</span><a href="Internal.Type.html#substType"><span class="hs-identifier hs-var">substType</span></a></span><span> </span><span class="annot"><span class="annottext">[(TcTyVar, TcType)]
</span><a href="#local-6989586621679226862"><span class="hs-identifier hs-var">subst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span></pre></body></html>