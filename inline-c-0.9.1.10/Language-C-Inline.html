<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Language.C.Inline</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">inline-c-0.9.1.10: Write Haskell source files including C code inline. No FFI required.</span><ul class="links" id="page-menu"><li><a href="src/Language.C.Inline.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.C.Inline</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">GHCi</a></li><li><a href="#g:2">Contexts</a></li><li><a href="#g:3">Substitution</a></li><li><a href="#g:4">Inline C</a></li><li><a href="#g:5"><code>Ptr</code> utils</a></li><li><a href="#g:6"><code>FunPtr</code> utils</a><ul><li><a href="#g:7"><code>FunPtr</code> conversion</a></li></ul></li><li><a href="#g:8">C types re-exports</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Enable painless embedding of C code in Haskell code. If you're interested
 in how to use the library, skip to the &quot;Inline C&quot; section. To build, read the
 first two sections.</p><p>This module is intended to be imported qualified:</p><pre>import qualified <a href="Language-C-Inline.html">Language.C.Inline</a> as C
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Context">Context</a></li><li class="src short"><a href="#v:baseCtx">baseCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></li><li class="src short"><a href="#v:fptrCtx">fptrCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></li><li class="src short"><a href="#v:funCtx">funCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></li><li class="src short"><a href="#v:vecCtx">vecCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></li><li class="src short"><a href="#v:bsCtx">bsCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></li><li class="src short"><a href="#v:context">context</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:DecsQ" title="Language.Haskell.TH.Lib">DecsQ</a></li><li class="src short"><a href="#v:substitute">substitute</a> :: [(<a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a>)] -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a</li><li class="src short"><a href="#v:getHaskellType">getHaskellType</a> :: <a href="../base-4.20.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:TypeQ" title="Language.Haskell.TH.Lib">TypeQ</a></li><li class="src short"><a href="#v:exp">exp</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:pure">pure</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:block">block</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:include">include</a> :: <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:DecsQ" title="Language.Haskell.TH.Lib">DecsQ</a></li><li class="src short"><a href="#v:verbatim">verbatim</a> :: <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:DecsQ" title="Language.Haskell.TH.Lib">DecsQ</a></li><li class="src short"><a href="#v:emitBlock">emitBlock</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:withPtr">withPtr</a> :: <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b)</li><li class="src short"><a href="#v:withPtr_">withPtr_</a> :: <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> a</li><li class="src short"><span class="keyword">class</span> <a href="#t:WithPtrs">WithPtrs</a> a <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:WithPtrsPtrs">WithPtrsPtrs</a> a</li><li><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b)</li><li><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> a</li></ul></li><li class="src short"><a href="#v:funPtr">funPtr</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:mkFunPtr">mkFunPtr</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:TypeQ" title="Language.Haskell.TH.Lib">TypeQ</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:ExpQ" title="Language.Haskell.TH.Lib">ExpQ</a></li><li class="src short"><a href="#v:mkFunPtrFromName">mkFunPtrFromName</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:ExpQ" title="Language.Haskell.TH.Lib">ExpQ</a></li><li class="src short"><a href="#v:peekFunPtr">peekFunPtr</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:TypeQ" title="Language.Haskell.TH.Lib">TypeQ</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:ExpQ" title="Language.Haskell.TH.Lib">ExpQ</a></li><li class="src short">module <a href="../base-4.20.2.0/Foreign-C-Types.html">Foreign.C.Types</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>GHCi</h1></a><div class="doc"><p>Currently <code>inline-c</code> does not work in interpreted mode. However, GHCi
 can still be used using the <code>-fobject-code</code> flag. For speed, we
 reccomend passing <code>-fobject-code -O0</code>, for example</p><pre>stack ghci --ghci-options='-fobject-code -O0'
</pre><p>or</p><pre>cabal repl --ghc-options='-fobject-code -O0'
</pre></div><a href="#g:2" id="g:2"><h1>Contexts</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Context" class="def">Context</a> <a href="src/Language.C.Inline.Context.html#Context" class="link">Source</a> <a href="#t:Context" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code> stores various information needed to produce the files with
 the C code derived from the inline C snippets.</p><p><code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code>s can be composed with their <code><a href="../base-4.20.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code> instance, where <code><a href="../base-4.20.2.0/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> is
 right-biased -- in <code><code><a href="../base-4.20.2.0/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> x y</code> <code>y</code> will take precedence over <code>x</code>.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Context">Instances</h4><details id="i:Context" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Context:Monoid:1"></span> <a href="../base-4.20.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></span> <a href="src/Language.C.Inline.Context.html#line-181" class="link">Source</a> <a href="#t:Context" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Context:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline-Context.html">Language.C.Inline.Context</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a>] -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Context:Semigroup:2"></span> <a href="../base-4.20.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></span> <a href="src/Language.C.Inline.Context.html#line-170" class="link">Source</a> <a href="#t:Context" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Context:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline-Context.html">Language.C.Inline.Context</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.20.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.20.2.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:baseCtx" class="def">baseCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="src/Language.C.Inline.Context.html#baseCtx" class="link">Source</a> <a href="#v:baseCtx" class="selflink">#</a></p><div class="doc"><p>Context useful to work with vanilla C. Used by default.</p><p><code><a href="Language-C-Inline-Context.html#v:ctxTypesTable" title="Language.C.Inline.Context">ctxTypesTable</a></code>: converts C basic types to their counterparts in
 <a href="../base-4.20.2.0/Foreign-C-Types.html">Foreign.C.Types</a>.</p><p>No <code><a href="Language-C-Inline-Context.html#v:ctxAntiQuoters" title="Language.C.Inline.Context">ctxAntiQuoters</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:fptrCtx" class="def">fptrCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="src/Language.C.Inline.Context.html#fptrCtx" class="link">Source</a> <a href="#v:fptrCtx" class="selflink">#</a></p><div class="doc"><p>This <code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code> adds support for <code>ForeignPtr</code> arguments. It adds a unique
 marshaller called <code>fptr-ptr</code>. For example, <code>$fptr-ptr:(int *x)</code> extracts the
 bare C pointer out of foreign pointer <code>x</code>.</p></div></div><div class="top"><p class="src"><a id="v:funCtx" class="def">funCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="src/Language.C.Inline.Context.html#funCtx" class="link">Source</a> <a href="#v:funCtx" class="selflink">#</a></p><div class="doc"><p>This <code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code> includes a <code><a href="Language-C-Inline-Context.html#t:AntiQuoter" title="Language.C.Inline.Context">AntiQuoter</a></code> that removes the need for
 explicitely creating <code><a href="../base-4.20.2.0/Foreign-Ptr.html#t:FunPtr" title="Foreign.Ptr">FunPtr</a></code>s, named <code>&quot;fun&quot;</code> along with one which
 allocates new memory which must be manually freed named <code>&quot;fun-alloc&quot;</code>.</p><p>For example, we can capture function <code>f</code> of type <code>CInt -&gt; CInt -&gt; IO
 CInt</code> in C code using <code>$fun:(int (*f)(int, int))</code>.</p><p>When used in a <code>pure</code> embedding, the Haskell function will have to be
 pure too.  Continuing the example above we'll have <code>CInt -&gt; CInt -&gt;
 IO CInt</code>.</p><p>Does not include the <code><a href="Language-C-Inline.html#v:baseCtx" title="Language.C.Inline">baseCtx</a></code>, since most of the time it's going to
 be included as part of larger contexts.</p><p>IMPORTANT: When using the <code>fun</code> anti quoter, one must be aware that
 the function pointer which is automatically generated is freed when
 the code contained in the block containing the anti quoter exits.
 Thus, if you need the function pointer to be longer-lived, you must
 allocate it and free it manually using <code><a href="../base-4.20.2.0/Foreign-Ptr.html#v:freeHaskellFunPtr" title="Foreign.Ptr">freeHaskellFunPtr</a></code>.
 We provide utilities to easily
 allocate them (see <code><a href="Language-C-Inline.html#v:mkFunPtr" title="Language.C.Inline">mkFunPtr</a></code>).</p><p>IMPORTANT: When using the <code>fun-alloc</code> anti quoter, one must free the allocated
 function pointer. The GHC runtime provides a function to do this,
 <code>hs_free_fun_ptr</code> available in the <code><a href="HsFFI.html#v:h" title="HsFFI">h</a></code> header.</p></div></div><div class="top"><p class="src"><a id="v:vecCtx" class="def">vecCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="src/Language.C.Inline.Context.html#vecCtx" class="link">Source</a> <a href="#v:vecCtx" class="selflink">#</a></p><div class="doc"><p>This <code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code> includes two <code><a href="Language-C-Inline-Context.html#t:AntiQuoter" title="Language.C.Inline.Context">AntiQuoter</a></code>s that allow to easily use
 Haskell vectors in C.</p><p>Specifically, the <code>vec-len</code> and <code>vec-ptr</code> will get the length and the
 pointer underlying mutable (<code><a href="V.html#v:IOVector" title="V">IOVector</a></code>) and immutable (<code><a href="V.html#v:Vector" title="V">Vector</a></code>)
 storable vectors.</p><p>Note that if you use <code><a href="Language-C-Inline.html#v:vecCtx" title="Language.C.Inline">vecCtx</a></code> to manipulate immutable vectors you
 must make sure that the vector is not modified in the C code.</p><p>To use <code>vec-len</code>, simply write <code>$vec-len:x</code>, where <code>x</code> is something
 of type <code><code><a href="V.html#v:IOVector" title="V">IOVector</a></code> a</code> or <code><code><a href="V.html#v:Vector" title="V">Vector</a></code> a</code>, for some <code>a</code>.  To use
 <code>vec-ptr</code> you need to specify the type of the pointer,
 e.g. <code>$vec-len:(int *x)</code> will work if <code>x</code> has type <code><code><a href="V.html#v:IOVector" title="V">IOVector</a></code>
 <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CInt" title="Foreign.C.Types">CInt</a></code></code>.</p></div></div><div class="top"><p class="src"><a id="v:bsCtx" class="def">bsCtx</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> <a href="src/Language.C.Inline.Context.html#bsCtx" class="link">Source</a> <a href="#v:bsCtx" class="selflink">#</a></p><div class="doc"><p><code><a href="Language-C-Inline.html#v:bsCtx" title="Language.C.Inline">bsCtx</a></code> serves exactly the same purpose as <code><a href="Language-C-Inline.html#v:vecCtx" title="Language.C.Inline">vecCtx</a></code>, but only for
 <code><a href="BS.html#v:ByteString" title="BS">ByteString</a></code>.  <code>vec-ptr</code> becomes <code>bs-ptr</code>, and <code>vec-len</code> becomes
 <code>bs-len</code>.  You don't need to specify the type of the pointer in
 <code>bs-ptr</code>, it will always be <code>char*</code>.</p><p>Moreover, <code>bs-cstr</code> works as <code>bs-ptr</code> but it provides a null-terminated
 copy of the given <code><a href="BS.html#v:ByteString" title="BS">ByteString</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:context" class="def">context</a> :: <a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:DecsQ" title="Language.Haskell.TH.Lib">DecsQ</a> <a href="src/Language.C.Inline.html#context" class="link">Source</a> <a href="#v:context" class="selflink">#</a></p><div class="doc"><p>Sets the <code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code> for the current module.  This function, if
 called, must be called before any of the other TH functions in this
 module.  Fails if that's not the case.</p></div></div><a href="#g:3" id="g:3"><h1>Substitution</h1></a><div class="top"><p class="src"><a id="v:substitute" class="def">substitute</a> :: [(<a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a>)] -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> a <a href="src/Language.C.Inline.Internal.html#substitute" class="link">Source</a> <a href="#v:substitute" class="selflink">#</a></p><div class="doc"><p>Define macros that can be used in the nested Template Haskell expression.
 Macros can be used as <code>@MACRO_NAME(input)</code> in inline-c quotes, and will transform their input with the given function.
 They can be useful for passing in types when defining Haskell instances for C++ template types.</p></div></div><div class="top"><p class="src"><a id="v:getHaskellType" class="def">getHaskellType</a> :: <a href="../base-4.20.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:TypeQ" title="Language.Haskell.TH.Lib">TypeQ</a> <a href="src/Language.C.Inline.Internal.html#getHaskellType" class="link">Source</a> <a href="#v:getHaskellType" class="selflink">#</a></p><div class="doc"><p>Given a C type name, return the Haskell type in Template Haskell. The first parameter controls whether function pointers
 should be mapped as pure or IO functions.</p></div></div><a href="#g:4" id="g:4"><h1>Inline C</h1></a><div class="doc"><p>The quasiquoters below are the main interface to this library, for inlining
 C code into Haskell source files.</p><p>In general, quasiquoters are used like so:</p><pre>[C.XXX| int { &lt;C code&gt; } |]
</pre><p>Where <code>C.XXX</code> is one of the quasi-quoters defined in this section.</p><p>This syntax stands for a piece of typed C, decorated with a type:</p><ul><li>The first type to appear (<code>int</code> in the example) is the type of said C code.</li><li>The syntax of the <code>&lt;C code&gt;</code> depends on on the quasi-quoter used, and the
   anti-quoters available. The <code>exp</code> quasi-quoter expects a C expression. The
   <code>block</code> quasi-quoter expects a list of statements, like the body of
   a function. Just like a C function, a block has a return type, matching the
   type of any values in any <code>return</code> statements appearing in the block.</li></ul><p>See also the <code>README.md</code> file for more documentation.</p><h3>Anti-quoters</h3><p>Haskell variables can be captured using anti-quoters.  <code>inline-c</code>
 provides a basic anti-quoting mechanism extensible with user-defined
 anti-quoters (see <a href="Language-C-Inline-Context.html">Language.C.Inline.Context</a>).  The basic
 anti-quoter lets you capture Haskell variables, for
 example we might say</p><pre>let x = pi / 3 in [<code><a href="C.html#v:exp" title="C">exp</a></code>| double { cos($(double x)) } |]
</pre><p>Which would capture the Haskell variable <code>x</code> of type <code><code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code></code>.</p><p>In C expressions the <code>$</code> character is denoted using <code>$$</code>.</p><h3>Variable capture and the typing relation</h3><p>The Haskell type of the inlined expression is determined by the specified
 C return type. The relation between the C type and the Haskell type is
 defined in the current <code><a href="Language-C-Inline.html#t:Context" title="Language.C.Inline">Context</a></code> -- see <code>convertCType</code>. C pointers and
 arrays are both converted to Haskell <code><code><a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a></code></code>s, and function pointers are
 converted to <code><code>FunPtr</code></code>s. Sized arrays are not supported.</p><p>Similarly, when capturing Haskell variables using anti-quoting, their
 type is assumed to be of the Haskell type corresponding to the C type
 provided.  For example, if we capture variable <code>x</code> using <code>double x</code>
 in the parameter list, the code will expect a variable <code>x</code> of type
 <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code> in Haskell (when using <code><a href="Language-C-Inline.html#v:baseCtx" title="Language.C.Inline">baseCtx</a></code>).</p><h3>Purity</h3><p>The <code><a href="Language-C-Inline.html#v:exp" title="Language.C.Inline">exp</a></code> and <code><a href="Language-C-Inline.html#v:block" title="Language.C.Inline">block</a></code> quasi-quotes denote computations in the <code><a href="Language-C-Inline-Context.html#v:IO" title="Language.C.Inline.Context">IO</a></code> monad.
 <code><a href="Language-C-Inline.html#v:pure" title="Language.C.Inline">pure</a></code> denotes a pure value, expressed as a C expression.</p><h3>Safe and <code>unsafe</code> calls</h3><p><code>unsafe</code> variants of the quasi-quoters are provided in
 <a href="Language-C-Inline-Unsafe.html">Language.C.Inline.Unsafe</a> to call the C code unsafely, in the sense that the
 C code will block the RTS, but with the advantage of a faster call to the
 foreign code. See
 <a href="https://www.haskell.org/onlinereport/haskell2010/haskellch8.html#x15-1590008.4.3">https://www.haskell.org/onlinereport/haskell2010/haskellch8.html#x15-1590008.4.3</a>.</p><h2>Examples</h2><h3>Inline C expression</h3><pre>{-# LANGUAGE QuasiQuotes #-}
import qualified <a href="Language-C-Inline.html">Language.C.Inline</a> as C
import qualified <a href="Language-C-Inline-Unsafe.html">Language.C.Inline.Unsafe</a> as CU
import           <a href="../base-4.20.2.0/Foreign-C-Types.html">Foreign.C.Types</a>

C.<code><a href="Language-C-Inline.html#v:include" title="Language.C.Inline">include</a></code> &quot;&lt;math.h&gt;&quot;

c_cos :: <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code> -&gt; IO <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code>
c_cos x = [C.exp| double { cos($(double x)) } |]

faster_c_cos :: <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code> -&gt; IO <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code>
faster_c_cos x = [CU.exp| double { cos($(double x)) } |]
</pre><h3>Inline C statements</h3><pre>{-# LANGUAGE QuasiQuotes #-}
{-# LANGUAGE TemplateHaskell #-}
import qualified Data.Vector.Storable.Mutable as V
import qualified <a href="Language-C-Inline.html">Language.C.Inline</a> as C
import           <a href="../base-4.20.2.0/Foreign-C-Types.html">Foreign.C.Types</a>

C.<code><a href="Language-C-Inline.html#v:include" title="Language.C.Inline">include</a></code> &quot;&lt;stdio.h&gt;&quot;

parseVector :: <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CInt" title="Foreign.C.Types">CInt</a></code> -&gt; <code><a href="Language-C-Inline-Context.html#v:IO" title="Language.C.Inline.Context">IO</a></code> (V.IOVector <code><a href="../base-4.20.2.0/Foreign-C-Types.html#t:CDouble" title="Foreign.C.Types">CDouble</a></code>)
parseVector len = do
  vec &lt;- V.new $ <code><a href="../base-4.20.2.0/Prelude.html#v:fromIntegral" title="Prelude">fromIntegral</a></code> len0
  V.unsafeWith vec $ \ptr -&gt; [C.<code><a href="Language-C-Inline.html#v:block" title="Language.C.Inline">block</a></code>| void {
    int i;
    for (i = 0; i &lt; $(int len); i++) {
      scanf(&quot;%lf &quot;, &amp;$(double *ptr)[i]);
    }
  } |]
  <code><a href="../base-4.20.2.0/Control-Monad.html#v:return" title="Control.Monad">return</a></code> vec
</pre><h2>How it works</h2><p>For each quasi-quotation of C code, a C function is generated in a C file
 corresponding to the current Haskell file. Every inline C expression will result
 in a corresponding C function.
 For example, if we define <code>c_cos</code>
 as in the example above in <code>CCos.hs</code>, we will get a file containing</p><pre>#include <a href="math.h">math.h</a>

double inline_c_Main_0_a03fba228a6d8e36ea7d69381f87bade594c949d(double x_inline_c_0) {
  return cos(x_inline_c_0);
}
</pre><p>Every anti-quotation will correspond to an argument in the C function. If the same
 Haskell variable is anti-quoted twice, this will result in two arguments.</p><p>The C function is then automatically compiled and invoked from Haskell with the correct arguments passed in.</p></div><div class="top"><p class="src"><a id="v:exp" class="def">exp</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="src/Language.C.Inline.html#exp" class="link">Source</a> <a href="#v:exp" class="selflink">#</a></p><div class="doc"><p>C expressions.</p></div></div><div class="top"><p class="src"><a id="v:pure" class="def">pure</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="src/Language.C.Inline.html#pure" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><div class="doc"><p>Variant of <code><a href="Language-C-Inline.html#v:exp" title="Language.C.Inline">exp</a></code>, for use with expressions known to have no side effects.</p><p><strong>BEWARE</strong>: Use this function with caution, only when you know what you are
 doing. If an expression does in fact have side-effects, then indiscriminate
 use of <code><a href="Language-C-Inline.html#v:pure" title="Language.C.Inline">pure</a></code> may endanger referential transparency, and in principle even
 type safety. Also note that the function might be called multiple times,
 given that <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafeDupablePerformIO" title="System.IO.Unsafe">unsafeDupablePerformIO</a></code> is used to call the
 provided C code.  Please refer to the documentation for
 <code><a href="../base-4.20.2.0/System-IO-Unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> for more details.
 <a href="https://github.com/fpco/inline-c/issues/115">unsafeDupablePerformIO is used to ensure good performance using the
 threaded runtime</a>.</p></div></div><div class="top"><p class="src"><a id="v:block" class="def">block</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="src/Language.C.Inline.html#block" class="link">Source</a> <a href="#v:block" class="selflink">#</a></p><div class="doc"><p>C code blocks (i.e. statements).</p></div></div><div class="top"><p class="src"><a id="v:include" class="def">include</a> :: <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:DecsQ" title="Language.Haskell.TH.Lib">DecsQ</a> <a href="src/Language.C.Inline.html#include" class="link">Source</a> <a href="#v:include" class="selflink">#</a></p><div class="doc"><p>Emits a CPP include directive for C code associated with the current
 module. To avoid having to escape quotes, the function itself adds them when
 appropriate, so that</p><pre>include &quot;foo.h&quot; ==&gt; #include &quot;foo.h&quot;
</pre><p>but</p><pre>include &quot;&lt;foo&gt;&quot; ==&gt; #include &lt;foo&gt;
</pre></div></div><div class="top"><p class="src"><a id="v:verbatim" class="def">verbatim</a> :: <a href="../base-4.20.2.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:DecsQ" title="Language.Haskell.TH.Lib">DecsQ</a> <a href="src/Language.C.Inline.html#verbatim" class="link">Source</a> <a href="#v:verbatim" class="selflink">#</a></p><div class="doc"><p>Emits an arbitrary C string to the C code associated with the
 current module.  Use with care.</p></div></div><div class="top"><p class="src"><a id="v:emitBlock" class="def">emitBlock</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="src/Language.C.Inline.Internal.html#emitBlock" class="link">Source</a> <a href="#v:emitBlock" class="selflink">#</a></p><div class="doc"><p>Simply appends some string of block to the module's C file.  Use with care.</p></div></div><a href="#g:5" id="g:5"><h1><code>Ptr</code> utils</h1></a><div class="top"><p class="src"><a id="v:withPtr" class="def">withPtr</a> :: <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b) <a href="src/Language.C.Inline.html#withPtr" class="link">Source</a> <a href="#v:withPtr" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="../base-4.20.2.0/Foreign-Marshal-Alloc.html#v:alloca" title="Foreign.Marshal.Alloc">alloca</a></code>, but also peeks the contents of the <code><a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a></code> and returns
 them once the provided action has finished.</p></div></div><div class="top"><p class="src"><a id="v:withPtr_" class="def">withPtr_</a> :: <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> a <a href="src/Language.C.Inline.html#withPtr_" class="link">Source</a> <a href="#v:withPtr_" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:WithPtrs" class="def">WithPtrs</a> a <span class="keyword">where</span> <a href="src/Language.C.Inline.html#WithPtrs" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></p><div class="doc"><p>Type class with methods useful to allocate and peek multiple
 pointers at once:</p><pre>withPtrs_ :: (Storable a, Storable b) =&gt; ((Ptr a, Ptr b) -&gt; IO ()) -&gt; IO (a, b)
withPtrs_ :: (Storable a, Storable b, Storable c) =&gt; ((Ptr a, Ptr b, Ptr c) -&gt; IO ()) -&gt; IO (a, b, c)
...
</pre></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Language-C-Inline.html#v:withPtrs" title="Language.C.Inline">withPtrs</a></p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a id="t:WithPtrsPtrs" class="def">WithPtrsPtrs</a> a <a href="src/Language.C.Inline.html#WithPtrsPtrs" class="link">Source</a> <a href="#t:WithPtrsPtrs" class="selflink">#</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:withPtrs" class="def">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a id="v:withPtrs_" class="def">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> a -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> a <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:WithPtrs">Instances</h4><details id="i:WithPtrs" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:WithPtrs:WithPtrs:1"></span> (<a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b) =&gt; <a href="Language-C-Inline.html#t:WithPtrs" title="Language.C.Inline">WithPtrs</a> (a, b)</span> <a href="src/Language.C.Inline.html#line-356" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:WithPtrs:WithPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:D:R:WithPtrsPtrsTuple2:WithPtrsPtrs:1"></span> <span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:D:R:WithPtrsPtrsTuple2:WithPtrsPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="src"><span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b) = (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b)</div></details></td></tr></table></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b0) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ((a, b), b0) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b) <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:WithPtrs:WithPtrs:2"></span> (<a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> c) =&gt; <a href="Language-C-Inline.html#t:WithPtrs" title="Language.C.Inline">WithPtrs</a> (a, b, c)</span> <a href="src/Language.C.Inline.html#line-362" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:WithPtrs:WithPtrs:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:D:R:WithPtrsPtrsTuple3:WithPtrsPtrs:1"></span> <span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:D:R:WithPtrsPtrsTuple3:WithPtrsPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="src"><span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c) = (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> c)</div></details></td></tr></table></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b0) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ((a, b, c), b0) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b, c) <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:WithPtrs:WithPtrs:3"></span> (<a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> c, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> d) =&gt; <a href="Language-C-Inline.html#t:WithPtrs" title="Language.C.Inline">WithPtrs</a> (a, b, c, d)</span> <a href="src/Language.C.Inline.html#line-368" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:WithPtrs:WithPtrs:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:D:R:WithPtrsPtrsTuple4:WithPtrsPtrs:1"></span> <span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:D:R:WithPtrsPtrsTuple4:WithPtrsPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="src"><span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d) = (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> c, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> d)</div></details></td></tr></table></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b0) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ((a, b, c, d), b0) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b, c, d) <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:WithPtrs:WithPtrs:4"></span> (<a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> c, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> d, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> e) =&gt; <a href="Language-C-Inline.html#t:WithPtrs" title="Language.C.Inline">WithPtrs</a> (a, b, c, d, e)</span> <a href="src/Language.C.Inline.html#line-374" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:WithPtrs:WithPtrs:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:D:R:WithPtrsPtrsTuple5:WithPtrsPtrs:1"></span> <span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:D:R:WithPtrsPtrsTuple5:WithPtrsPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="src"><span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e) = (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> c, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> d, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> e)</div></details></td></tr></table></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b0) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ((a, b, c, d, e), b0) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b, c, d, e) <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:WithPtrs:WithPtrs:5"></span> (<a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> c, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> d, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> e, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> f) =&gt; <a href="Language-C-Inline.html#t:WithPtrs" title="Language.C.Inline">WithPtrs</a> (a, b, c, d, e, f)</span> <a href="src/Language.C.Inline.html#line-380" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:WithPtrs:WithPtrs:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:D:R:WithPtrsPtrsTuple6:WithPtrsPtrs:1"></span> <span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:D:R:WithPtrsPtrsTuple6:WithPtrsPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="src"><span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f) = (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> c, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> d, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> e, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> f)</div></details></td></tr></table></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b0) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ((a, b, c, d, e, f), b0) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b, c, d, e, f) <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:WithPtrs:WithPtrs:6"></span> (<a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> c, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> d, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> e, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> f, <a href="../base-4.20.2.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> g) =&gt; <a href="Language-C-Inline.html#t:WithPtrs" title="Language.C.Inline">WithPtrs</a> (a, b, c, d, e, f, g)</span> <a href="src/Language.C.Inline.html#line-386" class="link">Source</a> <a href="#t:WithPtrs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:WithPtrs:WithPtrs:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:D:R:WithPtrsPtrsTuple7:WithPtrsPtrs:1"></span> <span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f, g)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:D:R:WithPtrsPtrsTuple7:WithPtrsPtrs:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-C-Inline.html">Language.C.Inline</a></p> <div class="src"><span class="keyword">type</span> <a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f, g) = (<a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> c, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> d, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> e, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> f, <a href="../base-4.20.2.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> g)</div></details></td></tr></table></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:withPtrs">withPtrs</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f, g) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> b0) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ((a, b, c, d, e, f, g), b0) <a href="src/Language.C.Inline.html#withPtrs" class="link">Source</a> <a href="#v:withPtrs" class="selflink">#</a></p><p class="src"><a href="#v:withPtrs_">withPtrs_</a> :: (<a href="Language-C-Inline.html#t:WithPtrsPtrs" title="Language.C.Inline">WithPtrsPtrs</a> (a, b, c, d, e, f, g) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> ()) -&gt; <a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a> (a, b, c, d, e, f, g) <a href="src/Language.C.Inline.html#withPtrs_" class="link">Source</a> <a href="#v:withPtrs_" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:6" id="g:6"><h1><code>FunPtr</code> utils</h1></a><div class="top"><p class="src"><a id="v:funPtr" class="def">funPtr</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="src/Language.C.Inline.html#funPtr" class="link">Source</a> <a href="#v:funPtr" class="selflink">#</a></p><div class="doc"><p>Easily get a <code>FunPtr</code>:</p><pre>let fp :: FunPtr (Ptr CInt -&gt; IO ()) = [C.funPtr| void poke42(int *ptr) { *ptr = 42; } |]
</pre><p>Especially useful to generate finalizers that require C code.</p><p>Most importantly, this allows you to write <code><a href="../base-4.20.2.0/Foreign-ForeignPtr.html#v:newForeignPtr" title="Foreign.ForeignPtr">newForeignPtr</a></code> invocations conveniently:</p><pre>do
  let c_finalizer_funPtr =
        [C.funPtr| void myfree(char * ptr) { free(ptr); } |]
  fp &lt;- newForeignPtr c_finalizer_funPtr objPtr
</pre><p>Using where possible <code><a href="../base-4.20.2.0/Foreign-ForeignPtr.html#v:newForeignPtr" title="Foreign.ForeignPtr">newForeignPtr</a></code> is superior to
 resorting to its delayed-by-a-thread alternative <code><a href="../base-4.20.2.0/Foreign-Concurrent.html#v:newForeignPtr" title="Foreign.Concurrent">newForeignPtr</a></code>
 from <a href="../base-4.20.2.0/Foreign-Concurrent.html">Foreign.Concurrent</a> which takes an <code>IO ()</code> Haskell finaliser action:
 With the non-concurrent <code>newForeignPtr</code> you can guarantee that the finaliser
 will actually be run</p><ul><li>when a GC is executed under memory pressure, because it can point directly
   to a C function that doesn't have to run any Haskell code (which is
   problematic when you're out of memory)</li><li>when the program terminates (<code><a href="../base-4.20.2.0/Foreign-Concurrent.html#v:newForeignPtr" title="Foreign.Concurrent">newForeignPtr</a></code>'s finaliser
   will likely NOT be called if your main thread exits, making your program
   e.g. not Valgrind-clean if your finaliser is <code>free</code> or C++'s <code>delete</code>).</li></ul><p><code><a href="Language-C-Inline.html#v:funPtr" title="Language.C.Inline">funPtr</a></code> makes the normal <code>newForeignPtr</code> as convenient as its concurrent
 counterpart.</p></div></div><a href="#g:7" id="g:7"><h2><code>FunPtr</code> conversion</h2></a><div class="top"><p class="src"><a id="v:mkFunPtr" class="def">mkFunPtr</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:TypeQ" title="Language.Haskell.TH.Lib">TypeQ</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:ExpQ" title="Language.Haskell.TH.Lib">ExpQ</a> <a href="src/Language.C.Inline.FunPtr.html#mkFunPtr" class="link">Source</a> <a href="#v:mkFunPtr" class="selflink">#</a></p><div class="doc"><p><code>$(<code><a href="Language-C-Inline.html#v:mkFunPtr" title="Language.C.Inline">mkFunPtr</a></code> [t| <code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code> |] </code> generates a foreign import
 wrapper of type</p><pre>(<code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code>) -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> (<code><a href="../base-4.20.2.0/Foreign-Ptr.html#t:FunPtr" title="Foreign.Ptr">FunPtr</a></code> (<code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code>))
</pre><p>And invokes it.</p></div></div><div class="top"><p class="src"><a id="v:mkFunPtrFromName" class="def">mkFunPtrFromName</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:ExpQ" title="Language.Haskell.TH.Lib">ExpQ</a> <a href="src/Language.C.Inline.FunPtr.html#mkFunPtrFromName" class="link">Source</a> <a href="#v:mkFunPtrFromName" class="selflink">#</a></p><div class="doc"><p><code>$(<code><a href="Language-C-Inline.html#v:mkFunPtrFromName" title="Language.C.Inline">mkFunPtrFromName</a></code> 'foo)</code>, if <code>foo :: <code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code>
 <code>CDouble</code></code>, splices in an expression of type <code><code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> (<code><a href="../base-4.20.2.0/Foreign-Ptr.html#t:FunPtr" title="Foreign.Ptr">FunPtr</a></code>
 (<code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code>))</code>.</p></div></div><div class="top"><p class="src"><a id="v:peekFunPtr" class="def">peekFunPtr</a> :: <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:TypeQ" title="Language.Haskell.TH.Lib">TypeQ</a> -&gt; <a href="../template-haskell-2.22.0.0/Language-Haskell-TH-Lib.html#t:ExpQ" title="Language.Haskell.TH.Lib">ExpQ</a> <a href="src/Language.C.Inline.FunPtr.html#peekFunPtr" class="link">Source</a> <a href="#v:peekFunPtr" class="selflink">#</a></p><div class="doc"><p><code>$(<code><a href="Language-C-Inline.html#v:peekFunPtr" title="Language.C.Inline">peekFunPtr</a></code> [t| <code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code> |])</code> generates a foreign import
 dynamic of type</p><pre><code><a href="../base-4.20.2.0/Foreign-Ptr.html#t:FunPtr" title="Foreign.Ptr">FunPtr</a></code> (<code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code>) -&gt; (<code>CDouble</code> -&gt; <code><a href="../base-4.20.2.0/Prelude.html#t:IO" title="Prelude">IO</a></code> <code>CDouble</code>)
</pre><p>And invokes it.</p></div></div><a href="#g:8" id="g:8"><h1>C types re-exports</h1></a><div class="top"><p class="src">module <a href="../base-4.20.2.0/Foreign-C-Types.html">Foreign.C.Types</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>