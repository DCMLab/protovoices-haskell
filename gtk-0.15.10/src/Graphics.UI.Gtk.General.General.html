<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LINE 2 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- -*-haskell-*-</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- GIMP Toolkit (GTK) General</span><span>
</span><span id="line-4"></span><span class="hs-comment">--</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Author : Axel Simon, Manuel M. T. Chakravarty</span><span>
</span><span id="line-6"></span><span class="hs-comment">--</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Created: 8 December 1998</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Copyright (C) 2000..2005 Axel Simon, Manuel M. T. Chakravarty</span><span>
</span><span id="line-10"></span><span class="hs-comment">--</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- This library is free software; you can redistribute it and/or</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- modify it under the terms of the GNU Lesser General Public</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- License as published by the Free Software Foundation; either</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- version 2.1 of the License, or (at your option) any later version.</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- This library is distributed in the hope that it will be useful,</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- but WITHOUT ANY WARRANTY; without even the implied warranty of</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- Lesser General Public License for more details.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- Maintainer : gtk2hs-users@lists.sourceforge.net</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- Stability : provisional</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- Portability : portable (depends on GHC)</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- library initialization, main event loop, and events</span><span>
</span><span id="line-27"></span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html"><span class="hs-identifier">Graphics.UI.Gtk.General.General</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- getDefaultLanguage,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Initialisation</span></span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#initGUI"><span class="hs-identifier">initGUI</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Support for OS threads</span></span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#unsafeInitGUIForThreadedRTS"><span class="hs-identifier">unsafeInitGUIForThreadedRTS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#postGUISync"><span class="hs-identifier">postGUISync</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#postGUIAsync"><span class="hs-identifier">postGUIAsync</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#threadsEnter"><span class="hs-identifier">threadsEnter</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#threadsLeave"><span class="hs-identifier">threadsLeave</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Main event loop</span></span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainGUI"><span class="hs-identifier">mainGUI</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainQuit"><span class="hs-identifier">mainQuit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Less commonly used event loop functions</span></span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#eventsPending"><span class="hs-identifier">eventsPending</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainLevel"><span class="hs-identifier">mainLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainIteration"><span class="hs-identifier">mainIteration</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainIterationDo"><span class="hs-identifier">mainIterationDo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainDoEvent"><span class="hs-identifier">mainDoEvent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Call when mainloop is left</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#quitAddDestroy"><span class="hs-identifier">quitAddDestroy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#quitAdd"><span class="hs-identifier">quitAdd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#quitRemove"><span class="hs-identifier">quitRemove</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Grab widgets</span></span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#grabAdd"><span class="hs-identifier">grabAdd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#grabGetCurrent"><span class="hs-identifier">grabGetCurrent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#grabRemove"><span class="hs-identifier">grabRemove</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Timeout and idle callbacks</span></span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="hs-identifier">Priority</span></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="hs-identifier">priorityLow</span></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><span class="hs-identifier">priorityDefaultIdle</span></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="hs-identifier">priorityHighIdle</span></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><span class="hs-identifier">priorityDefault</span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><span class="hs-identifier">priorityHigh</span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#timeoutAdd"><span class="hs-identifier">timeoutAdd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#timeoutAddFull"><span class="hs-identifier">timeoutAddFull</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-identifier">timeoutRemove</span></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#idleAdd"><span class="hs-identifier">idleAdd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><span class="hs-identifier">idleRemove</span></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#inputAdd"><span class="hs-identifier">inputAdd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><span class="hs-identifier">inputRemove</span></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><span class="hs-identifier">IOCondition</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><span class="hs-identifier">HandlerId</span></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#FD"><span class="hs-identifier">FD</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Environment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getProgName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getArgs</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">rtsSupportsBoundThreads</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newEmptyMVar</span></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>                           </span><span class="annot"><span class="hs-identifier">putMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">takeMVar</span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Glib.FFI</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Glib.UTFString</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Glib.MainLoop</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ML</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Glib.MainLoop</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Priority</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">priorityLow</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">priorityDefaultIdle</span></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><span class="hs-identifier">priorityHighIdle</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">priorityDefault</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">priorityHigh</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">timeoutRemove</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">idleRemove</span></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="hs-identifier">inputRemove</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">IOCondition</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">HandlerId</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Abstract.Object.html"><span class="hs-identifier">Graphics.UI.Gtk.Abstract.Object</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Graphics.UI.Gtk.Abstract.Object.html#makeNewObject"><span class="hs-identifier">makeNewObject</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Gdk.EventM.html"><span class="hs-identifier">Graphics.UI.Gtk.Gdk.EventM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Graphics.UI.Gtk.Gdk.EventM.html#EventM"><span class="hs-identifier">EventM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ask</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html"><span class="hs-identifier">Graphics.UI.Gtk.Types</span></a></span><span>
</span><span id="line-100"></span><span class="hs-pragma">{-# LINE 100 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-pragma">{-# LINE 102 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">{-
-- | Retrieve the current language.
-- * This function returns a String which's pointer can be used later on for
-- comarisions.
--
--getDefaultLanguage :: GlibString string =&gt; IO string
--getDefaultLanguage = do
-- strPtr &lt;- {#call unsafe get_default_language#}
-- str &lt;- peekUTFString strPtr
-- destruct strPtr
-- return str
-}</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="unsafeInitGUIForThreadedRTS"><span class="annot"><span class="annottext">unsafeInitGUIForThreadedRTS :: IO [String]
</span><a href="Graphics.UI.Gtk.General.General.html#unsafeInitGUIForThreadedRTS"><span class="hs-identifier hs-var hs-var">unsafeInitGUIForThreadedRTS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO [String]
</span><a href="Graphics.UI.Gtk.General.General.html#initGUI"><span class="hs-identifier hs-var">initGUI</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- We compile this module using -#include&quot;gtk/wingtk.h&quot; to bypass the win32 abi</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- check however we do not compile users programs with this header so if</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- initGUI was ever inlined in a users program, then that program would not</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- bypass the abi check and would fail on startup. So to stop that we must</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- prevent initGUI from being inlined.</span><span>
</span><span id="line-123"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#initGUI"><span class="hs-pragma hs-type">initGUI</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- | Initialize the GUI.</span><span>
</span><span id="line-125"></span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- This must be called before any other function in the Gtk2Hs library.</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- This function initializes the GUI toolkit and parses all Gtk</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- specific arguments. The remaining arguments are returned. If the</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- initialization of the toolkit fails for whatever reason, an exception</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- is thrown.</span><span>
</span><span id="line-132"></span><span class="hs-comment">--</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- * Throws: @error \&quot;Cannot initialize GUI.\&quot;@</span><span>
</span><span id="line-134"></span><span class="hs-comment">--</span><span>
</span><span id="line-135"></span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- * If you want to use Gtk2Hs and in a multi-threaded application then it is your obligation</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- to ensure that all calls to Gtk+ happen in a single OS thread.</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- If you want to make calls to Gtk2Hs functions from a Haskell thread other</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- than the one that calls this functions and 'mainGUI' then you will have to</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- \'post\' your GUI actions to the main GUI thread. You can do this using</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- 'postGUISync' or 'postGUIAsync'. See also 'threadsEnter'.</span><span>
</span><span id="line-142"></span><span class="hs-comment">--</span><span>
</span><span id="line-143"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#initGUI"><span class="hs-identifier hs-type">initGUI</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-144"></span><span id="initGUI"><span class="annot"><span class="annottext">initGUI :: IO [String]
</span><a href="Graphics.UI.Gtk.General.General.html#initGUI"><span class="hs-identifier hs-var hs-var">initGUI</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#initialise"><span class="hs-identifier hs-var">initialise</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">rtsSupportsBoundThreads</span></span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#initialiseGThreads"><span class="hs-identifier hs-var">initialiseGThreads</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-comment">-- note: initizliseGThreads calls 'threadsEnter'</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621679684270"><span class="annot"><a href="#local-6989586621679684270"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO String
</span><span class="hs-identifier hs-var">getProgName</span></span><span>
</span><span id="line-149"></span><span>  </span><span id="local-6989586621679684271"><span class="annot"><a href="#local-6989586621679684271"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">getArgs</span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679684272"><span class="annot"><a href="#local-6989586621679684272"><span class="hs-identifier hs-var hs-var">allArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679684270"><span class="hs-identifier hs-var">prog</span></a></span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679684271"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">withMany</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">withUTFString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">stringToGlib</span></span><span> </span><span class="annot"><a href="#local-6989586621679684272"><span class="hs-identifier hs-type">allArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684276"><span class="annot"><span class="annottext">[CString]
</span><a href="#local-6989586621679684276"><span class="hs-identifier hs-var">addrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">[CString] -&gt; (Int -&gt; Ptr CString -&gt; IO [String]) -&gt; IO [String]
forall a b. Storable a =&gt; [a] -&gt; (Int -&gt; Ptr a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">withArrayLen</span></span><span> </span><span class="annot"><span class="annottext">[CString]
</span><a href="#local-6989586621679684276"><span class="hs-identifier hs-var">addrs</span></a></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; Ptr CString -&gt; IO [String]) -&gt; IO [String])
-&gt; (Int -&gt; Ptr CString -&gt; IO [String]) -&gt; IO [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684278"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684278"><span class="hs-identifier hs-var">argc</span></a></span></span><span> </span><span id="local-6989586621679684279"><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679684279"><span class="hs-identifier hs-var">argv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">Ptr CString -&gt; (Ptr (Ptr CString) -&gt; IO [String]) -&gt; IO [String]
forall a b. Storable a =&gt; a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">Ptr CString
</span><a href="#local-6989586621679684279"><span class="hs-identifier hs-var">argv</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr (Ptr CString) -&gt; IO [String]) -&gt; IO [String])
-&gt; (Ptr (Ptr CString) -&gt; IO [String]) -&gt; IO [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684281"><span class="annot"><span class="annottext">Ptr (Ptr CString)
</span><a href="#local-6989586621679684281"><span class="hs-identifier hs-var">argvp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; (Ptr Int -&gt; IO [String]) -&gt; IO [String]
forall a b. Storable a =&gt; a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">with</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684278"><span class="hs-identifier hs-var">argc</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Int -&gt; IO [String]) -&gt; IO [String])
-&gt; (Ptr Int -&gt; IO [String]) -&gt; IO [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684282"><span class="annot"><span class="annottext">Ptr Int
</span><a href="#local-6989586621679684282"><span class="hs-identifier hs-var">argcp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>      </span><span id="local-6989586621679684283"><span class="annot"><a href="#local-6989586621679684283"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr CInt -&gt; Ptr (Ptr CString) -&gt; IO CInt
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_init_check"><span class="hs-identifier hs-var">gtk_init_check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr Int -&gt; Ptr CInt
forall a b. Ptr a -&gt; Ptr b
</span><span class="hs-identifier hs-var">castPtr</span></span><span> </span><span class="annot"><span class="annottext">Ptr Int
</span><a href="#local-6989586621679684282"><span class="hs-identifier hs-var">argcp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr (Ptr CString) -&gt; Ptr (Ptr CString)
forall a b. Ptr a -&gt; Ptr b
</span><span class="hs-identifier hs-var">castPtr</span></span><span> </span><span class="annot"><span class="annottext">Ptr (Ptr CString)
</span><a href="#local-6989586621679684281"><span class="hs-identifier hs-var">argvp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">toBool</span></span><span> </span><span class="annot"><a href="#local-6989586621679684283"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-157"></span><span>        </span><span id="local-6989586621679684287"><span class="annot"><a href="#local-6989586621679684287"><span class="hs-identifier hs-var">argc'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">peek</span></span><span> </span><span class="annot"><a href="#local-6989586621679684282"><span class="hs-identifier hs-type">argcp</span></a></span><span>
</span><span id="line-158"></span><span>        </span><span id="local-6989586621679684289"><span class="annot"><a href="#local-6989586621679684289"><span class="hs-identifier hs-var">argv'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">peek</span></span><span> </span><span class="annot"><a href="#local-6989586621679684281"><span class="hs-identifier hs-type">argvp</span></a></span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679684290"><span class="annot"><a href="#local-6989586621679684290"><span class="hs-identifier hs-var">addrs'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">peekArray</span></span><span> </span><span class="annot"><a href="#local-6989586621679684287"><span class="hs-identifier hs-type">argc'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679684289"><span class="hs-identifier hs-type">argv'</span></a></span><span>  </span><span class="hs-comment">-- drop the program name</span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">glibToString</span></span><span> </span><span class="annot"><span class="hs-operator">&lt;$&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">peekUTFString</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679684290"><span class="hs-identifier hs-type">addrs'</span></a></span><span>
</span><span id="line-161"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Cannot initialize GUI.&quot;</span></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- g_thread_init aborts the whole program if it's called more than once so</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- we've got to keep track of whether or not we've called it already. Sigh.</span><span>
</span><span id="line-165"></span><span class="hs-comment">--</span><span>
</span><span id="line-166"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hsgthread.h gtk2hs_threads_initialise&quot;</span></span><span>
</span><span id="line-167"></span><span>  </span><span id="initialiseGThreads"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#initialiseGThreads"><span class="hs-identifier hs-var">initialiseGThreads</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hsgthread.h gtk2hs_initialise&quot;</span></span><span>
</span><span id="line-170"></span><span>  </span><span id="initialise"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#initialise"><span class="hs-identifier hs-var">initialise</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Post an action to be run in the main GUI thread.</span><span>
</span><span id="line-173"></span><span class="hs-comment">--</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- The current thread blocks until the action completes and the result is</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- returned.</span><span>
</span><span id="line-176"></span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span id="local-6989586621679684076"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#postGUISync"><span class="hs-identifier hs-type">postGUISync</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679684076"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679684076"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-178"></span><span id="postGUISync"><span class="annot"><span class="annottext">postGUISync :: forall a. IO a -&gt; IO a
</span><a href="Graphics.UI.Gtk.General.General.html#postGUISync"><span class="hs-identifier hs-var hs-var">postGUISync</span></a></span></span><span> </span><span id="local-6989586621679684303"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679684303"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-179"></span><span>  </span><span id="local-6989586621679684304"><span class="annot"><a href="#local-6989586621679684304"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar a)
forall a. IO (MVar a)
</span><span class="hs-identifier hs-var">newEmptyMVar</span></span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#idleAdd"><span class="hs-identifier hs-type">idleAdd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679684303"><span class="hs-identifier hs-type">action</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">putMVar</span></span><span> </span><span class="annot"><a href="#local-6989586621679684304"><span class="hs-identifier hs-type">resultVar</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&gt;&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">priorityDefault</span></span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">takeMVar</span></span><span> </span><span class="annot"><a href="#local-6989586621679684304"><span class="hs-identifier hs-type">resultVar</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-comment">-- | Post an action to be run in the main GUI thread.</span><span>
</span><span id="line-184"></span><span class="hs-comment">--</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- The current thread continues and does not wait for the result of the</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- action.</span><span>
</span><span id="line-187"></span><span class="hs-comment">--</span><span>
</span><span id="line-188"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#postGUIAsync"><span class="hs-identifier hs-type">postGUIAsync</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span id="postGUIAsync"><span class="annot"><span class="annottext">postGUIAsync :: IO () -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#postGUIAsync"><span class="hs-identifier hs-var hs-var">postGUIAsync</span></a></span></span><span> </span><span id="local-6989586621679684305"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679684305"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><span class="annottext">IO Bool -&gt; Int -&gt; IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#idleAdd"><span class="hs-identifier hs-var">idleAdd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621679684305"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier hs-var">priorityDefault</span></span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-comment">-- | Acquire the global Gtk lock.</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- * During normal operation, this lock is held by the thread from which all</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- interaction with Gtk is performed. When calling 'mainGUI', the thread will</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- release this global lock before it waits for user interaction. During this</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- time it is, in principle, possible to use a different OS thread (any other</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- Haskell thread that is bound to the Gtk OS thread will be blocked anyway)</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- to interact with Gtk by explicitly acquiring the lock, calling Gtk functions</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- and releasing the lock. However, the Gtk functions that are called from this</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- different thread may not trigger any calls to the OS since this will</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- lead to a crash on Windows (the Win32 API can only be used from a single</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- thread). Since it is very hard to tell which function only interacts on</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- Gtk data structures and which function call actual OS functions, it</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- is best not to use this feature at all. A better way to perform updates</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- in the background is to spawn a Haskell thread and to perform the update</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- to Gtk widgets using 'postGUIAsync' or 'postGUISync'. These will execute</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- their arguments from the main loop, that is, from the OS thread of Gtk,</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- thereby ensuring that any Gtk and OS function can be called.</span><span>
</span><span id="line-211"></span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#threadsEnter"><span class="hs-identifier hs-type">threadsEnter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span id="threadsEnter"><span class="annot"><span class="annottext">threadsEnter :: IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsEnter"><span class="hs-identifier hs-var hs-var">threadsEnter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsEnter%27_"><span class="hs-identifier hs-var">threadsEnter'_</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (() -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684307"><span class="annot"><span class="annottext">()
</span><a href="#local-6989586621679684307"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span class="hs-pragma">{-# LINE 213 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Release the global Gtk lock.</span><span>
</span><span id="line-215"></span><span class="hs-comment">--</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- * The use of this function is not recommended. See 'threadsEnter'.</span><span>
</span><span id="line-217"></span><span class="hs-comment">--</span><span>
</span><span id="line-218"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#threadsLeave"><span class="hs-identifier hs-type">threadsLeave</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span id="threadsLeave"><span class="annot"><span class="annottext">threadsLeave :: IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsLeave"><span class="hs-identifier hs-var hs-var">threadsLeave</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsLeave%27_"><span class="hs-identifier hs-var">threadsLeave'_</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (() -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684309"><span class="annot"><span class="annottext">()
</span><a href="#local-6989586621679684309"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span class="hs-pragma">{-# LINE 219 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | Inquire the number of events pending on the event queue</span><span>
</span><span id="line-221"></span><span class="hs-comment">--</span><span>
</span><span id="line-222"></span><span class="hs-identifier">eventsPending</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">Int</span><span>
</span><span id="line-223"></span><span id="eventsPending"><span class="annot"><span class="annottext">eventsPending :: IO Int
</span><a href="Graphics.UI.Gtk.General.General.html#eventsPending"><span class="hs-identifier hs-var hs-var">eventsPending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Int) -&gt; IO CInt -&gt; IO Int
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">IO CInt
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_events_pending"><span class="hs-identifier hs-var">gtk_events_pending</span></a></span><span>
</span><span id="line-224"></span><span class="hs-pragma">{-# LINE 224 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- | Run the Gtk+ main event loop.</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainGUI"><span class="hs-identifier hs-type">mainGUI</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span id="mainGUI"><span class="annot"><span class="annottext">mainGUI :: IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#mainGUI"><span class="hs-identifier hs-var hs-var">mainGUI</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_main"><span class="hs-identifier hs-var">gtk_main</span></a></span><span>
</span><span id="line-229"></span><span class="hs-pragma">{-# LINE 229 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-comment">-- | Inquire the main loop level.</span><span>
</span><span id="line-231"></span><span class="hs-comment">--</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- * Callbacks that take more time to process can call 'mainIteration' to keep</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- the GUI responsive. Each time the main loop is restarted this way, the main</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- loop counter is increased. This function returns this counter.</span><span>
</span><span id="line-235"></span><span class="hs-comment">--</span><span>
</span><span id="line-236"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainLevel"><span class="hs-identifier hs-type">mainLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-237"></span><span id="mainLevel"><span class="annot"><span class="annottext">mainLevel :: IO Int
</span><a href="Graphics.UI.Gtk.General.General.html#mainLevel"><span class="hs-identifier hs-var hs-var">mainLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CUInt -&gt; Int) -&gt; IO CUInt -&gt; IO Int
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (CUInt -&gt; Int) -&gt; CUInt -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">CUInt -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_main_level"><span class="hs-identifier hs-var">gtk_main_level</span></a></span><span>
</span><span id="line-238"></span><span class="hs-pragma">{-# LINE 238 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | Exit the main event loop.</span><span>
</span><span id="line-240"></span><span class="hs-comment">--</span><span>
</span><span id="line-241"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainQuit"><span class="hs-identifier hs-type">mainQuit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span id="mainQuit"><span class="annot"><span class="annottext">mainQuit :: IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#mainQuit"><span class="hs-identifier hs-var hs-var">mainQuit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_main_quit"><span class="hs-identifier hs-var">gtk_main_quit</span></a></span><span>
</span><span id="line-243"></span><span class="hs-pragma">{-# LINE 243 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | Process an event, block if necessary.</span><span>
</span><span id="line-245"></span><span class="hs-comment">--</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- * Returns @True@ if 'mainQuit' was called while processing the event.</span><span>
</span><span id="line-247"></span><span class="hs-comment">--</span><span>
</span><span id="line-248"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainIteration"><span class="hs-identifier hs-type">mainIteration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-249"></span><span id="mainIteration"><span class="annot"><span class="annottext">mainIteration :: IO Bool
</span><a href="Graphics.UI.Gtk.General.General.html#mainIteration"><span class="hs-identifier hs-var hs-var">mainIteration</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CInt -&gt; Bool) -&gt; IO CInt -&gt; IO Bool
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Bool
forall a. (Eq a, Num a) =&gt; a -&gt; Bool
</span><span class="hs-identifier hs-var">toBool</span></span><span> </span><span class="annot"><span class="annottext">IO CInt
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_main_iteration"><span class="hs-identifier hs-var">gtk_main_iteration</span></a></span><span>
</span><span id="line-250"></span><span class="hs-pragma">{-# LINE 250 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-comment">-- | Process a single event.</span><span>
</span><span id="line-252"></span><span class="hs-comment">--</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- * Called with @True@, this function behaves as 'mainIteration' in that it</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- waits until an event is available for processing. It will return</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- immediately, if passed @False@.</span><span>
</span><span id="line-256"></span><span class="hs-comment">--</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- * Returns @True@ if the 'mainQuit' was called while processing the event.</span><span>
</span><span id="line-258"></span><span class="hs-comment">--</span><span>
</span><span id="line-259"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainIterationDo"><span class="hs-identifier hs-type">mainIterationDo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-260"></span><span id="mainIterationDo"><span class="annot"><span class="annottext">mainIterationDo :: Bool -&gt; IO Bool
</span><a href="Graphics.UI.Gtk.General.General.html#mainIterationDo"><span class="hs-identifier hs-var hs-var">mainIterationDo</span></a></span></span><span> </span><span id="local-6989586621679684317"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684317"><span class="hs-identifier hs-var">blocking</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><span class="annottext">(CInt -&gt; Bool) -&gt; IO CInt -&gt; IO Bool
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; Bool
forall a. (Eq a, Num a) =&gt; a -&gt; Bool
</span><span class="hs-identifier hs-var">toBool</span></span><span> </span><span class="annot"><span class="annottext">(IO CInt -&gt; IO Bool) -&gt; IO CInt -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CInt -&gt; IO CInt
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_main_iteration_do"><span class="hs-identifier hs-var">gtk_main_iteration_do</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; CInt
forall a. Num a =&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">fromBool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684317"><span class="hs-identifier hs-var">blocking</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- | Processes a single GDK event. This is public only to allow filtering of events between GDK and</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- GTK+. You will not usually need to call this function directly.</span><span>
</span><span id="line-265"></span><span class="hs-comment">--</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- While you should not call this function directly, you might want to know how exactly events are</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- handled. So here is what this function does with the event:</span><span>
</span><span id="line-268"></span><span class="hs-comment">--</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- 1. Compress enter\/leave notify events. If the event passed build an enter\/leave pair together with</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- the next event (peeked from GDK) both events are thrown away. This is to avoid a backlog of</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- (de-)highlighting widgets crossed by the pointer.</span><span>
</span><span id="line-272"></span><span class="hs-comment">--</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- 2. Find the widget which got the event. If the widget can't be determined the event is thrown away</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- unless it belongs to a INCR transaction. In that case it is passed to</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- 'selectionIncrEvent'.</span><span>
</span><span id="line-276"></span><span class="hs-comment">--</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- 3. Then the event is passed on a stack so you can query the currently handled event with</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- 'getCurrentEvent'.</span><span>
</span><span id="line-279"></span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- 4. The event is sent to a widget. If a grab is active all events for widgets that are not in the</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- contained in the grab widget are sent to the latter with a few exceptions:</span><span>
</span><span id="line-282"></span><span class="hs-comment">--</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- * Deletion and destruction events are still sent to the event widget for obvious reasons.</span><span>
</span><span id="line-284"></span><span class="hs-comment">--</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- * Events which directly relate to the visual representation of the event widget.</span><span>
</span><span id="line-286"></span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- * Leave events are delivered to the event widget if there was an enter event delivered to it</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- before without the paired leave event.</span><span>
</span><span id="line-289"></span><span class="hs-comment">--</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- * Drag events are not redirected because it is unclear what the semantics of that would be.</span><span>
</span><span id="line-291"></span><span class="hs-comment">--</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- Another point of interest might be that all key events are first passed through the key snooper</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- functions if there are any. Read the description of 'keySnooperInstall' if you need this</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- feature.</span><span>
</span><span id="line-295"></span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- 5. After finishing the delivery the event is popped from the event stack.</span><span>
</span><span id="line-297"></span><span id="local-6989586621679684095"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mainDoEvent"><span class="hs-identifier hs-type">mainDoEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Gdk.EventM.html#EventM"><span class="hs-identifier hs-type">EventM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679684095"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-298"></span><span id="mainDoEvent"><span class="annot"><span class="annottext">mainDoEvent :: forall t. EventM t ()
</span><a href="Graphics.UI.Gtk.General.General.html#mainDoEvent"><span class="hs-identifier hs-var hs-var">mainDoEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-299"></span><span>  </span><span id="local-6989586621679684328"><span class="annot"><a href="#local-6989586621679684328"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReaderT (Ptr t) IO (Ptr t)
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-300"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main_do_event"><span class="hs-identifier hs-type">gtk_main_do_event</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">castPtr</span></span><span> </span><span class="annot"><a href="#local-6989586621679684328"><span class="hs-identifier hs-type">ptr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-comment">-- | Trigger destruction of object in case the mainloop at level @mainLevel@ is quit.</span><span>
</span><span id="line-304"></span><span class="hs-comment">--</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- Removed in Gtk3.</span><span>
</span><span id="line-306"></span><span id="local-6989586621679684111"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#quitAddDestroy"><span class="hs-identifier hs-type">quitAddDestroy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#ObjectClass"><span class="hs-identifier hs-type">ObjectClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679684111"><span class="hs-identifier hs-type">obj</span></a></span><span>
</span><span id="line-307"></span><span>                 </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ @mainLevel@ Level of the mainloop which shall trigger the destruction.</span></span><span>
</span><span id="line-308"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679684111"><span class="hs-identifier hs-type">obj</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ @object@ Object to be destroyed.</span></span><span>
</span><span id="line-309"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-310"></span><span id="quitAddDestroy"><span class="annot"><span class="annottext">quitAddDestroy :: forall obj. ObjectClass obj =&gt; Int -&gt; obj -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#quitAddDestroy"><span class="hs-identifier hs-var hs-var">quitAddDestroy</span></a></span></span><span> </span><span id="local-6989586621679684334"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684334"><span class="hs-identifier hs-var">mainLevel</span></a></span></span><span> </span><span id="local-6989586621679684335"><span class="annot"><span class="annottext">obj
</span><a href="#local-6989586621679684335"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679684336"><span class="annot"><span class="annottext">CUInt
</span><a href="#local-6989586621679684336"><span class="hs-identifier hs-var">arg1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Object"><span class="hs-identifier hs-type">Object</span></a></span><span> </span><span id="local-6989586621679684338"><span class="annot"><span class="annottext">ForeignPtr Object
</span><a href="#local-6989586621679684338"><span class="hs-identifier hs-var">arg2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignPtr Object -&gt; (Ptr Object -&gt; IO ()) -&gt; IO ()
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">withForeignPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Object
</span><a href="#local-6989586621679684338"><span class="hs-identifier hs-var">arg2</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Object -&gt; IO ()) -&gt; IO ()) -&gt; (Ptr Object -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684340"><span class="annot"><span class="annottext">Ptr Object
</span><a href="#local-6989586621679684340"><span class="hs-identifier hs-var">argPtr2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span class="annot"><span class="annottext">CUInt -&gt; Ptr Object -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_quit_add_destroy"><span class="hs-identifier hs-var">gtk_quit_add_destroy</span></a></span><span> </span><span class="annot"><span class="annottext">CUInt
</span><a href="#local-6989586621679684336"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Object
</span><a href="#local-6989586621679684340"><span class="hs-identifier hs-var">argPtr2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span class="hs-pragma">{-# LINE 312 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-312"></span><span>     </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">mainLevel</span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">obj -&gt; Object
forall o. ObjectClass o =&gt; o -&gt; Object
</span><a href="Graphics.UI.Gtk.Types.html#toObject"><span class="hs-identifier hs-var">toObject</span></a></span><span> </span><span class="annot"><span class="annottext">obj
</span><a href="#local-6989586621679684335"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-comment">-- | Registers a function to be called when an instance of the mainloop is left.</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- Removed in Gtk3.</span><span>
</span><span id="line-318"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#quitAdd"><span class="hs-identifier hs-type">quitAdd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ @mainLevel@ Level at which termination the function shall be called. You can pass 0 here to have the function run at the current mainloop.</span></span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ @function@ The function to call. This should return 'False' to be removed from the list of quit handlers. Otherwise the function might be called again.</span></span><span>
</span><span id="line-320"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ returns A handle for this quit handler (you need this for 'quitRemove')</span></span><span>
</span><span id="line-321"></span><span id="quitAdd"><span class="annot"><span class="annottext">quitAdd :: Int -&gt; IO Bool -&gt; IO Int
</span><a href="Graphics.UI.Gtk.General.General.html#quitAdd"><span class="hs-identifier hs-var hs-var">quitAdd</span></a></span></span><span> </span><span id="local-6989586621679684343"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684343"><span class="hs-identifier hs-var">mainLevel</span></a></span></span><span> </span><span id="local-6989586621679684344"><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684344"><span class="hs-identifier hs-var">func</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-322"></span><span>  </span><span id="local-6989586621679684345"><span class="annot"><a href="#local-6989586621679684345"><span class="hs-identifier hs-var">funcPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Ptr () -&gt; IO CInt) -&gt; IO GtkFunction
</span><a href="Graphics.UI.Gtk.General.General.html#mkGtkFunction"><span class="hs-identifier hs-var">mkGtkFunction</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr () -&gt; IO CInt) -&gt; IO GtkFunction)
-&gt; (Ptr () -&gt; IO CInt) -&gt; IO GtkFunction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">Ptr ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><span class="annottext">(Bool -&gt; CInt) -&gt; IO Bool -&gt; IO CInt
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CInt
forall a. Num a =&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">fromBool</span></span><span> </span><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684344"><span class="hs-identifier hs-var">func</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">liftM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fromIntegral</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-325"></span><span>            </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_quit_add"><span class="hs-identifier hs-type">gtk_quit_add</span></a></span><span>
</span><span id="line-326"></span><span class="hs-pragma">{-# LINE 326 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-326"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">fromIntegral</span></span><span> </span><span class="annot"><a href="#local-6989586621679684343"><span class="hs-identifier hs-type">mainLevel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>              </span><span class="annot"><a href="#local-6989586621679684345"><span class="hs-identifier hs-type">funcPtr</span></a></span><span>
</span><span id="line-328"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">nullPtr</span></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-keyword">type</span><span> </span><span id="GtkFunction"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#GtkFunction"><span class="hs-identifier hs-var">GtkFunction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FunPtr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span class="hs-pragma">{-# LINE 331 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-string">&quot;wrapper&quot;</span></span><span> </span><span id="mkGtkFunction"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#mkGtkFunction"><span class="hs-identifier hs-var">mkGtkFunction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#GtkFunction"><span class="hs-identifier hs-type">GtkFunction</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-comment">-- | Removes a quit handler by its identifier.</span><span>
</span><span id="line-336"></span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- Removed in Gtk3.</span><span>
</span><span id="line-338"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#quitRemove"><span class="hs-identifier hs-type">quitRemove</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ @quitHandlerId@ Identifier for the handler returned when installing it.</span></span><span>
</span><span id="line-339"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span id="quitRemove"><span class="annot"><span class="annottext">quitRemove :: Int -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#quitRemove"><span class="hs-identifier hs-var hs-var">quitRemove</span></a></span></span><span> </span><span id="local-6989586621679684349"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684349"><span class="hs-identifier hs-var">quitHandlerId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-341"></span><span>  </span><span class="annot"><span class="annottext">CUInt -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_quit_remove"><span class="hs-identifier hs-var">gtk_quit_remove</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CUInt
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684349"><span class="hs-identifier hs-var">quitHandlerId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-comment">-- | add a grab widget</span><span>
</span><span id="line-345"></span><span class="hs-comment">--</span><span>
</span><span id="line-346"></span><span id="local-6989586621679684120"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#grabAdd"><span class="hs-identifier hs-type">grabAdd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#WidgetClass"><span class="hs-identifier hs-type">WidgetClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679684120"><span class="hs-identifier hs-type">wd</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679684120"><span class="hs-identifier hs-type">wd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-347"></span><span id="grabAdd"><span class="annot"><span class="annottext">grabAdd :: forall wd. WidgetClass wd =&gt; wd -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#grabAdd"><span class="hs-identifier hs-var hs-var">grabAdd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Widget"><span class="hs-identifier hs-type">Widget</span></a></span><span> </span><span id="local-6989586621679684354"><span class="annot"><span class="annottext">ForeignPtr Widget
</span><a href="#local-6989586621679684354"><span class="hs-identifier hs-var">arg1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignPtr Widget -&gt; (Ptr Widget -&gt; IO ()) -&gt; IO ()
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">withForeignPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Widget
</span><a href="#local-6989586621679684354"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Widget -&gt; IO ()) -&gt; IO ()) -&gt; (Ptr Widget -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684355"><span class="annot"><span class="annottext">Ptr Widget
</span><a href="#local-6989586621679684355"><span class="hs-identifier hs-var">argPtr1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span class="annot"><span class="annottext">Ptr Widget -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_grab_add"><span class="hs-identifier hs-var">gtk_grab_add</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Widget
</span><a href="#local-6989586621679684355"><span class="hs-identifier hs-var">argPtr1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Widget -&gt; IO ()) -&gt; (wd -&gt; Widget) -&gt; wd -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">wd -&gt; Widget
forall o. WidgetClass o =&gt; o -&gt; Widget
</span><a href="Graphics.UI.Gtk.Types.html#toWidget"><span class="hs-identifier hs-var">toWidget</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-comment">-- | inquire current grab widget</span><span>
</span><span id="line-350"></span><span class="hs-comment">--</span><span>
</span><span id="line-351"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#grabGetCurrent"><span class="hs-identifier hs-type">grabGetCurrent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Widget"><span class="hs-identifier hs-type">Widget</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span id="grabGetCurrent"><span class="annot"><span class="annottext">grabGetCurrent :: IO (Maybe Widget)
</span><a href="Graphics.UI.Gtk.General.General.html#grabGetCurrent"><span class="hs-identifier hs-var hs-var">grabGetCurrent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-353"></span><span>  </span><span id="local-6989586621679684358"><span class="annot"><a href="#local-6989586621679684358"><span class="hs-identifier hs-var">wPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Ptr Widget)
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_grab_get_current"><span class="hs-identifier hs-var">gtk_grab_get_current</span></a></span><span>
</span><span id="line-354"></span><span class="hs-pragma">{-# LINE 354 &quot;./Graphics/UI/Gtk/General/General.chs&quot; #-}</span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">wPtr</span><span class="hs-operator">==</span><span class="hs-identifier">nullPtr</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-keyword">else</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-identifier">Just</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">makeNewObject</span><span> </span><span class="hs-identifier">mkWidget</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">wPtr</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-comment">-- | remove a grab widget</span><span>
</span><span id="line-358"></span><span class="hs-comment">--</span><span>
</span><span id="line-359"></span><span id="local-6989586621679684361"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#grabRemove"><span class="hs-identifier hs-type">grabRemove</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#WidgetClass"><span class="hs-identifier hs-type">WidgetClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679684361"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679684361"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-360"></span><span id="grabRemove"><span class="annot"><span class="annottext">grabRemove :: forall wd. WidgetClass wd =&gt; wd -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#grabRemove"><span class="hs-identifier hs-var hs-var">grabRemove</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Widget"><span class="hs-identifier hs-type">Widget</span></a></span><span> </span><span id="local-6989586621679684364"><span class="annot"><span class="annottext">ForeignPtr Widget
</span><a href="#local-6989586621679684364"><span class="hs-identifier hs-var">arg1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignPtr Widget -&gt; (Ptr Widget -&gt; IO ()) -&gt; IO ()
forall a b. ForeignPtr a -&gt; (Ptr a -&gt; IO b) -&gt; IO b
</span><span class="hs-identifier hs-var">withForeignPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Widget
</span><a href="#local-6989586621679684364"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">((Ptr Widget -&gt; IO ()) -&gt; IO ()) -&gt; (Ptr Widget -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684365"><span class="annot"><span class="annottext">Ptr Widget
</span><a href="#local-6989586621679684365"><span class="hs-identifier hs-var">argPtr1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span class="annot"><span class="annottext">Ptr Widget -&gt; IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#gtk_grab_remove"><span class="hs-identifier hs-var">gtk_grab_remove</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Widget
</span><a href="#local-6989586621679684365"><span class="hs-identifier hs-var">argPtr1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Widget -&gt; IO ()) -&gt; (w -&gt; Widget) -&gt; w -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">w -&gt; Widget
forall o. WidgetClass o =&gt; o -&gt; Widget
</span><a href="Graphics.UI.Gtk.Types.html#toWidget"><span class="hs-identifier hs-var">toWidget</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- | Sets a function to be called at regular intervals, with the default</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- priority 'priorityDefault'. The function is called repeatedly until it</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- returns @False@, after which point the timeout function will not be called</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- again. The first call to the function will be at the end of the first interval.</span><span>
</span><span id="line-366"></span><span class="hs-comment">--</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- Note that timeout functions may be delayed, due to the processing of other</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- event sources. Thus they should not be relied on for precise timing. After</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- each call to the timeout function, the time of the next timeout is</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- recalculated based on the current time and the given interval (it does not</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- try to 'catch up' time lost in delays).</span><span>
</span><span id="line-372"></span><span class="hs-comment">--</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- This function differs from 'ML.timeoutAdd' in that the action will</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- be executed within the global Gtk+ lock. It is therefore possible to</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- call Gtk+ functions from the action.</span><span>
</span><span id="line-376"></span><span class="hs-comment">--</span><span>
</span><span id="line-377"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#timeoutAdd"><span class="hs-identifier hs-type">timeoutAdd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HandlerId</span></span><span>
</span><span id="line-378"></span><span id="timeoutAdd"><span class="annot"><span class="annottext">timeoutAdd :: IO Bool -&gt; Int -&gt; IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#timeoutAdd"><span class="hs-identifier hs-var hs-var">timeoutAdd</span></a></span></span><span> </span><span id="local-6989586621679684368"><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684368"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621679684369"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684369"><span class="hs-identifier hs-var">msec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; Int -&gt; Int -&gt; IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#timeoutAddFull"><span class="hs-identifier hs-var">timeoutAddFull</span></a></span><span> </span><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684368"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier hs-var">priorityDefault</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684369"><span class="hs-identifier hs-var">msec</span></a></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">-- | Sets a function to be called at regular intervals, with the given</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- priority. The function is called repeatedly until it returns @False@, after</span><span>
</span><span id="line-382"></span><span class="hs-comment">-- which point the timeout function will not be called again. The first call</span><span>
</span><span id="line-383"></span><span class="hs-comment">-- to the function will be at the end of the first interval.</span><span>
</span><span id="line-384"></span><span class="hs-comment">--</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- Note that timeout functions may be delayed, due to the processing of other</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- event sources. Thus they should not be relied on for precise timing. After</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- each call to the timeout function, the time of the next timeout is</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- recalculated based on the current time and the given interval (it does not</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- try to 'catch up' time lost in delays).</span><span>
</span><span id="line-390"></span><span class="hs-comment">--</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- This function differs from 'ML.timeoutAddFull' in that the action will</span><span>
</span><span id="line-392"></span><span class="hs-comment">-- be executed within the global Gtk+ lock. It is therefore possible to</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- call Gtk+ functions from the action.</span><span>
</span><span id="line-394"></span><span class="hs-comment">--</span><span>
</span><span id="line-395"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#timeoutAddFull"><span class="hs-identifier hs-type">timeoutAddFull</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Priority</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HandlerId</span></span><span>
</span><span id="line-396"></span><span id="timeoutAddFull"><span class="annot"><span class="annottext">timeoutAddFull :: IO Bool -&gt; Int -&gt; Int -&gt; IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#timeoutAddFull"><span class="hs-identifier hs-var hs-var">timeoutAddFull</span></a></span></span><span> </span><span id="local-6989586621679684371"><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684371"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621679684372"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684372"><span class="hs-identifier hs-var">pri</span></a></span></span><span> </span><span id="local-6989586621679684373"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684373"><span class="hs-identifier hs-var">msec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-397"></span><span>  </span><span class="annot"><span class="annottext">IO Bool -&gt; Int -&gt; Int -&gt; IO CUInt
</span><span class="hs-identifier hs-var">ML.timeoutAddFull</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsEnter"><span class="hs-identifier hs-var">threadsEnter</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684371"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; (Bool -&gt; IO Bool) -&gt; IO Bool
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684374"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684374"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsLeave"><span class="hs-identifier hs-var">threadsLeave</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684374"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>                    </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684372"><span class="hs-identifier hs-var">pri</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684373"><span class="hs-identifier hs-var">msec</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">-- | Add a callback that is called whenever the system is idle.</span><span>
</span><span id="line-401"></span><span class="hs-comment">--</span><span>
</span><span id="line-402"></span><span class="hs-comment">-- * A priority can be specified via an integer. This should usually be</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- 'priorityDefaultIdle'.</span><span>
</span><span id="line-404"></span><span class="hs-comment">--</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- * If the function returns @False@ it will be removed.</span><span>
</span><span id="line-406"></span><span class="hs-comment">--</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- This function differs from 'ML.idleAdd' in that the action will</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- be executed within the global Gtk+ lock. It is therefore possible to</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- call Gtk+ functions from the action.</span><span>
</span><span id="line-410"></span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#idleAdd"><span class="hs-identifier hs-type">idleAdd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Priority</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HandlerId</span></span><span>
</span><span id="line-412"></span><span id="idleAdd"><span class="annot"><span class="annottext">idleAdd :: IO Bool -&gt; Int -&gt; IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#idleAdd"><span class="hs-identifier hs-var hs-var">idleAdd</span></a></span></span><span> </span><span id="local-6989586621679684376"><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684376"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621679684377"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684377"><span class="hs-identifier hs-var">pri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-413"></span><span>  </span><span class="annot"><span class="annottext">IO Bool -&gt; Int -&gt; IO CUInt
</span><span class="hs-identifier hs-var">ML.idleAdd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsEnter"><span class="hs-identifier hs-var">threadsEnter</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684376"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; (Bool -&gt; IO Bool) -&gt; IO Bool
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684378"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684378"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsLeave"><span class="hs-identifier hs-var">threadsLeave</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684378"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684377"><span class="hs-identifier hs-var">pri</span></a></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="hs-keyword">type</span><span> </span><span id="FD"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#FD"><span class="hs-identifier hs-var">FD</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- | Adds the file descriptor into the main event loop with the given priority.</span><span>
</span><span id="line-418"></span><span class="hs-comment">--</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- This function differs from 'ML.inputAdd' in that the action will</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- be executed within the global Gtk+ lock. It is therefore possible to</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- call Gtk+ functions from the action.</span><span>
</span><span id="line-422"></span><span class="hs-comment">--</span><span>
</span><span id="line-423"></span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#inputAdd"><span class="hs-identifier hs-type">inputAdd</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#FD"><span class="hs-identifier hs-type">FD</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ a file descriptor</span></span><span>
</span><span id="line-425"></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">IOCondition</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ the condition to watch for</span></span><span>
</span><span id="line-426"></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Priority</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the priority of the event source</span></span><span>
</span><span id="line-427"></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ the function to call when the condition is satisfied.</span><span>
</span><span id="line-428"></span><span>                  </span><span class="hs-comment">-- The function should return False if the event source</span><span>
</span><span id="line-429"></span><span>                  </span><span class="hs-comment">-- should be removed.</span><span>
</span><span id="line-430"></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HandlerId</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the event source id</span></span><span>
</span><span id="line-431"></span><span id="inputAdd"><span class="annot"><span class="annottext">inputAdd :: Int -&gt; [IOCondition] -&gt; Int -&gt; IO Bool -&gt; IO CUInt
</span><a href="Graphics.UI.Gtk.General.General.html#inputAdd"><span class="hs-identifier hs-var hs-var">inputAdd</span></a></span></span><span> </span><span id="local-6989586621679684380"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684380"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span id="local-6989586621679684381"><span class="annot"><span class="annottext">[IOCondition]
</span><a href="#local-6989586621679684381"><span class="hs-identifier hs-var">conds</span></a></span></span><span> </span><span id="local-6989586621679684382"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684382"><span class="hs-identifier hs-var">pri</span></a></span></span><span> </span><span id="local-6989586621679684383"><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684383"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; [IOCondition] -&gt; Int -&gt; IO Bool -&gt; IO CUInt
</span><span class="hs-identifier hs-var">ML.inputAdd</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684380"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">[IOCondition]
</span><a href="#local-6989586621679684381"><span class="hs-identifier hs-var">conds</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679684382"><span class="hs-identifier hs-var">pri</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsEnter"><span class="hs-identifier hs-var">threadsEnter</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679684383"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; (Bool -&gt; IO Bool) -&gt; IO Bool
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679684384"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684384"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="Graphics.UI.Gtk.General.General.html#threadsLeave"><span class="hs-identifier hs-var">threadsLeave</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO Bool -&gt; IO Bool
forall a b. IO a -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679684384"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">unsafe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_init_check&quot;</span></span><span>
</span><span id="line-435"></span><span>  </span><span id="gtk_init_check"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_init_check"><span class="hs-identifier hs-var">gtk_init_check</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CChar</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gdk_threads_enter&quot;</span></span><span>
</span><span id="line-438"></span><span>  </span><span id="threadsEnter%27_"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#threadsEnter%27_"><span class="hs-identifier hs-var">threadsEnter'_</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">unsafe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gdk_threads_leave&quot;</span></span><span>
</span><span id="line-441"></span><span>  </span><span id="threadsLeave%27_"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#threadsLeave%27_"><span class="hs-identifier hs-var">threadsLeave'_</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_events_pending&quot;</span></span><span>
</span><span id="line-444"></span><span>  </span><span id="gtk_events_pending"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_events_pending"><span class="hs-identifier hs-var">gtk_events_pending</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_main&quot;</span></span><span>
</span><span id="line-447"></span><span>  </span><span id="gtk_main"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main"><span class="hs-identifier hs-var">gtk_main</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">unsafe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_main_level&quot;</span></span><span>
</span><span id="line-450"></span><span>  </span><span id="gtk_main_level"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main_level"><span class="hs-identifier hs-var">gtk_main_level</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CUInt</span></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_main_quit&quot;</span></span><span>
</span><span id="line-453"></span><span>  </span><span id="gtk_main_quit"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main_quit"><span class="hs-identifier hs-var">gtk_main_quit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_main_iteration&quot;</span></span><span>
</span><span id="line-456"></span><span>  </span><span id="gtk_main_iteration"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main_iteration"><span class="hs-identifier hs-var">gtk_main_iteration</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_main_iteration_do&quot;</span></span><span>
</span><span id="line-459"></span><span>  </span><span id="gtk_main_iteration_do"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main_iteration_do"><span class="hs-identifier hs-var">gtk_main_iteration_do</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_main_do_event&quot;</span></span><span>
</span><span id="line-462"></span><span>  </span><span id="gtk_main_do_event"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_main_do_event"><span class="hs-identifier hs-var">gtk_main_do_event</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_quit_add_destroy&quot;</span></span><span>
</span><span id="line-465"></span><span>  </span><span id="gtk_quit_add_destroy"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_quit_add_destroy"><span class="hs-identifier hs-var">gtk_quit_add_destroy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CUInt</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Object"><span class="hs-identifier hs-type">Object</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_quit_add&quot;</span></span><span>
</span><span id="line-468"></span><span>  </span><span id="gtk_quit_add"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_quit_add"><span class="hs-identifier hs-var">gtk_quit_add</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CUInt</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FunPtr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CUInt</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_quit_remove&quot;</span></span><span>
</span><span id="line-471"></span><span>  </span><span id="gtk_quit_remove"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_quit_remove"><span class="hs-identifier hs-var">gtk_quit_remove</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CUInt</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_grab_add&quot;</span></span><span>
</span><span id="line-474"></span><span>  </span><span id="gtk_grab_add"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_grab_add"><span class="hs-identifier hs-var">gtk_grab_add</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Widget"><span class="hs-identifier hs-type">Widget</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_grab_get_current&quot;</span></span><span>
</span><span id="line-477"></span><span>  </span><span id="gtk_grab_get_current"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_grab_get_current"><span class="hs-identifier hs-var">gtk_grab_get_current</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Widget"><span class="hs-identifier hs-type">Widget</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">ccall</span></span><span> </span><span class="annot"><span class="hs-keyword">safe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;gtk_grab_remove&quot;</span></span><span>
</span><span id="line-480"></span><span>  </span><span id="gtk_grab_remove"><span class="annot"><a href="Graphics.UI.Gtk.General.General.html#gtk_grab_remove"><span class="hs-identifier hs-var">gtk_grab_remove</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Graphics.UI.Gtk.Types.html#Widget"><span class="hs-identifier hs-type">Widget</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-481"></span></pre></body></html>